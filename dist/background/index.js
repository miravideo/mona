{const e=function(){return this||globalThis}(),{Boolean:t,Error:n,Object:r,Promise:o,document:s,window:i}=e,{hasOwnProperty:a,toString:c}={},l=r.call.bind(r.call),u=!e.chrome.app;(e=>{function t(t){for(var o,i,c=t[0],l=t[1],u=t[2],d=0,h=[];d<c.length;d++)i=c[d],r.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(o in l)r.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(p&&p(t);h.length;)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==s[i]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},s={3:0},a=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=(e,t,n)=>{c.o(e,t)||r.defineProperty(e,t,{enumerable:!0,get:n})},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&r.defineProperty(e,Symbol.toStringTag,{value:"Module"}),r.defineProperty(e,"__esModule",{value:!0})},c.t=(e,t)=>{if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=r.create(null);if(c.r(n),r.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,(t=>e[t]).bind(null,o));return n},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,"a",t),t},c.o=(e,t)=>r.prototype.hasOwnProperty.call(e,t),c.p="";var l=i.webpackJsonp=i.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;a.push([175,7,0]),n()})({175:function(c,d,p){"use strict";p.r(d),p(26);var h=p(0),f=p(6),m=p(1),g=p(50),w=p.n(g);function v(){}function y(e){return(...t)=>w.a&&w.a[e](...t)}function b(){return!!w.a}const x=y("getDomain"),k=(y("getSubdomain"),y("getPublicSuffix"));var S=p(23);const C={};function $(e){browser.notifications.create(e.id||"ViolentMonkey",{type:"basic",iconUrl:h.e,title:`${e.title} - ${r(h.p)("extName")}`,message:e.body,isClickable:e.isClickable})}async function I(e){const t=await browser.tabs.query({});let n=0;for(const r of t)e(r),n+=1,n%20==0&&await new o(setTimeout)}const U=r(S.a)({lifetime:36e5});r.assign(C,{CacheLoad:e=>U.get(e)||null,CacheHit(e){U.hit(e.key,e.lifetime)},CachePop:e=>U.pop(e)||null});var R=U;function j(){const e={};return{on:t,off:n,fire:r};function t(t,n){let r=e[t];r||(r=[],e[t]=r),r.push(n)}function n(t,n){const r=e[t];if(r){const e=r.indexOf(n);e>=0&&r.splice(e,1)}}function r(t,n){const r=e[t];r&&r.forEach(e=>{e(n,t)})}}var T=p(20);const _=browser.runtime.getURL("/"),D=[],O=[];async function M(e){const t=e=>"function"==typeof e?e():e;await o.all(D.map(t)),await t(e),await o.all(O.map(t)),D.length=0,O.length=0}r.assign(C,{GetAllOptions:()=>C.GetOptions(T.a),GetOptions:e=>l(m.f,e,([e])=>H(e)),SetOptions(e){r(h.h)(e).forEach(e=>F(e.key,e.value))}});let E={};const L=r(h.q)(),A=r(h.d)(z,100);let q={},P=browser.storage.local.get("options").then(({options:e})=>{e&&"object"==typeof e&&(q=e),r(m.h)(q,"version")||F("version",1),P=null});function N(e,t){const n=e.join(".");delete E[n],E[n]=t,A()}function z(){L.fire(E),E={}}function H(e,t){const n=r(h.v)(e),o=n[0];let s=q[o];return null==s&&(s=T.a[o]),null==s&&(s=t),n.length>1?r(m.h)(s,n.slice(1),t):s}function W(e){return r(m.h)(T.a,e)}function F(e,t){if(P)return void P.then(()=>{F(e,t)});const n=r(h.v)(e);n.join(".");let o=t;const s=n[0];s in T.a&&(n.length>1&&(o=r(m.j)(H(s),n.slice(1),t)),q[s]=o,browser.storage.local.set({options:q}),N(n,t))}D.push(P);const V=L.hook;function B(e){return e.split("&").reduce((e,t)=>{const[n,r]=t.split("=").map(decodeURIComponent);return e[n]=r,e},{})}function G(e){return r.entries(e).map(e=>e.map(encodeURIComponent).join("=")).join("&")}var K=p(3),J=p.n(K),X=p(2);class Z{constructor(e){this.events={},this.allowed=e}checkType(e){if(this.allowed&&!this.allowed.includes(e))throw new n(`Unknown event type: ${e}`)}on(e,t){this.checkType(e);const{events:n}=this;let r=n[e];return r||(r=[],n[e]=r),()=>this.off(e,t)}off(e,t){this.checkType(e);const n=this.events[e];if(n){const e=n.indexOf(t);e>=0&&n.splice(e,1)}}emit(e,t){this.checkType(e);const n=this.events[e];if(n){const r={type:e,data:t,defaultPrevented:!1,preventDefault(){r.defaultPrevented=!0}};n.some(e=>(e(r),r.defaultPrevented))}}}var Q=new Z(["scriptEdit","scriptChanged"]);function Y(e){return!(/^\s*</.test(e)||e.indexOf("// ==UserScript==")<0)}r.assign(C,{CacheNewScript(e){const t=r(h.o)();return R.put(`new-${t}`,ie(e)),t},NewScript:e=>e&&R.get(`new-${e}`)||ie(),ParseMeta:oe});const ee={default:()=>[],transform:(e,t)=>(e.push(t),e)},te={default:()=>null,transform:(e,t)=>null==e?t:e},ne={include:ee,exclude:ee,match:ee,excludeMatch:ee,require:ee,resource:{default:()=>({}),transform:(e,t)=>{const n=t.match(/^(\w\S*)\s+(.*)/);return n&&(e[n[1]]=n[2]),e}},grant:ee,noframes:{default:()=>!1,transform:()=>!0}},re={antifeature:ee,compatible:ee,connect:ee};function oe(e){const t=l(m.f,ne,([,e])=>e.default());return(e.match(f.i)[1]||"").replace(/(?:^|\n)\s*\/\/\x20(@\S+)(.*)/g,(e,n,r)=>{const[o,s]=n.slice(1).split(":"),i=o.replace(/[-_](\w)/g,(e,t)=>t.toUpperCase()),a=s?`${i}:${s.toLowerCase()}`:i,c=r.trim(),l=ne[a]||re[a]||te;let u=t[a];void 0===u&&(u=l.default()),t[a]=l.transform(u,c)}),t.resources=t.resource,delete t.resource,!t.homepageURL&&t.homepage&&(t.homepageURL=t.homepage),t}function se(){return{origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0}}function ie(e){const t=J()({url:"*://*/*",name:"",date:(new Date).toLocaleString()},e),n=H("scriptTemplate").replace(/{{(\w+)}}/g,(e,n)=>{const r=t[n];return null==r?e:r});return{script:{custom:se(),config:{enabled:1,shouldUpdate:1},meta:oe(n),props:{}},code:n}}function ae(e){const t=e.meta.namespace||"",n=e.meta.name||"";let o=r(h.g)(`${t}\n${n}\n`);return t||n||(o+=e.props.id||""),o}r.assign(C,{TestBlacklist:Re}),O.push(je),v(!0);const ce=/(.*?):\/\/([^/]*)\/(.*)/;let le=[];V(e=>{"blacklist"in e&&je(e.blacklist||"")});const ue=/^https?$/i,de=1e5;let pe={},he=0;function fe(e,t,n,r){return t.some(t=>{const o=`${n}:${t}`;return(R.get(o)||R.put(o,r(t))).test(e)})}function me(e,t){return fe(e,t,"re",xe)}function ge(e,t){return fe(e,t,"match",Ue)}function we(e,t){R.batch(!0);const{custom:n,meta:r}=t,o=ve(n.origMatch&&r.match,n.match),s=ve(n.origInclude&&r.include,n.include),i=ve(n.origExclude&&r.exclude,n.exclude),a=ve(n.origExcludeMatch&&r.excludeMatch,n.excludeMatch);let c=!o.length&&!s.length;return c=c||ge(e,o),c=c||me(e,s),c=c&&!ge(e,a),c=c&&!me(e,i),R.batch(!1),c}function ve(...e){return e.reduce((e,t)=>t?e.concat(t):e,[])}function ye(e){return e.replace(/([.?+[\]{}()|^$])/g,"\\$1").replace(/\*/g,".*?")}function be(e){return e.test.bind(e)}function xe(e){if(e.length>1&&"/"===e[0]&&"/"===e[e.length-1]){let t;try{t=new RegExp(e.slice(1,-1),"i")}catch(e){}return{test:t?be(t):()=>!1}}const t=ye(e.toLowerCase());if(b()&&e.includes(".tld/")){const e=t.replace("\\.tld/","((?:\\.[-\\w]+)+)/");return{test:t=>{const n=t.toLowerCase().match(e);if(n){const e=n[1].slice(1);if(k(e)===e)return!0}return!1}}}return{test:be(new RegExp(`^${t}$`,"i"))}}function ke(e,t){return e===t||["*","http*"].includes(e)&&ue.test(t)?1:0}const Se="(?:|.*?\\.)",Ce="((?:\\.[-\\w]+)+)";function $e(e){if("*"===e)return()=>1;const t=e.toLowerCase();let n="",r=t,o="";e.startsWith("*.")&&(r=r.slice(2),n=Se),b()&&e.endsWith(".tld")&&(r=r.slice(0,-4),o=Ce);const s=new RegExp(`^${n}${ye(r)}${o}$`);return e=>{if(e=e.toLowerCase(),t===e)return 1;const n=e.match(s);if(n){const[,e]=n;if(!e)return 1;const t=e.slice(1);return k(t)===t}return 0}}function Ie(e){const t=e.indexOf("#");let n=e.indexOf("?"),r=ye(e);return n>t&&(n=-1),t<0&&(r=n<0?`^${r}(?:[?#]|$)`:`^${r}(?:#|$)`),be(new RegExp(r))}function Ue(e){let t;if("<all_urls>"===e)t=()=>!0;else{const n=e.match(ce);if(n){const e=$e(n[2]),r=Ie(n[3]);t=t=>{const o=t.match(ce);return!!n&&!!o&&ke(n[1],o[1])&&e(o[2])&&r(o[3])}}else t=()=>!1}return{test:t}}function Re(e){let t=pe[e];if(void 0===t){const n=le.find(({test:t})=>t(e));t=(null==n?void 0:n.reject)&&n.text,Te(e,t||!1)}return t}function je(e){R.batch(!0);const n=null==e?H("blacklist"):e;le=(Array.isArray(n)?n:(n||"").split("\n")).map(e=>{if(!(e=e.trim())||e.startsWith("#"))return null;const t=e.startsWith("@")&&e.split(/\s/,1)[0],n=t?e.slice(t.length+1).trim():e,r="@include"!==t&&"@match"!==t,{test:o}="@include"===t||"@exclude"===t&&xe(n)||!t&&!n.includes("/")&&Ue(`*://${n}/*`)||Ue(n);return{reject:r,test:o,text:e}}).filter(t),pe={},he=0,R.batch(!1)}function Te(e,t){pe[e]=t,he+=e.length,he>de&&r.keys(pe).some(e=>(he-=e.length,delete pe[e],he<3*de/4))}var _e=()=>new o((e,t)=>{function n(){const e=indexedDB.open("Violentmonkey",1);e.onsuccess=()=>{try{o(e.result)}catch(e){t(e)}},e.onerror=t,e.onupgradeneeded=()=>{t()}}function o(n){const r=n.transaction(["scripts","require","cache","values"]),o={};let i=3;const a=()=>{i-=1,i||e(browser.storage.local.set(o))},c=(e,n)=>{const o=r.objectStore(e).getAll();o.onsuccess=()=>n(o.result),o.onerror=t};c("scripts",e=>{const t={};e.forEach(e=>{const{code:n,id:r,uri:i}=e;o[`${X.a.script.prefix}${r}`]=s(e),o[`${X.a.code.prefix}${r}`]=n,t[i]=r}),c("values",e=>{e.forEach(({uri:e,values:n})=>{const r=t[e];r&&(o[`${X.a.value.prefix}${r}`]=n)}),a()})}),c("cache",e=>{e.forEach(({uri:e,data:t})=>{o[`${X.a.cache.prefix}${e}`]=t}),a()}),c("require",e=>{e.forEach(({uri:e,code:t})=>{o[`${X.a.require.prefix}${e}`]=t}),a()})}function s(e){return{meta:oe(e.code),custom:r.assign({origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},e.custom),props:{id:e.id,uri:e.uri,position:e.position},config:{enabled:e.enabled,shouldUpdate:e.update}}}console.info("Upgrade database..."),n()}).catch(()=>{});function De(e={}){const t={},{init:n,transform:o}=e;return function(...e){const[n]=e;return t[n]||(t[n]=l(s,this,...e))};async function s(...e){const[s,i]=e;try{const a=await r(h.w)(s,(null==n?void 0:n(i))||i);if(await Oe(a,s)){const t=o?await o(a,...e):a.data;await this.set(s,t)}}catch(e){throw e}finally{delete t[s]}}}async function Oe({headers:e},t){const n=e.get("etag")||+new Date(e.get("last-modified"))||+new Date(e.get("date"));if(!n||n!==await X.a.mod.getOne(t))return n&&await X.a.mod.set(t,n),!0}X.a.cache.fetch=De({init:e=>J()({},e,{responseType:"blob"}),async transform(e,t,n,r){const[o,s]=await X.a.cache.makeRaw(e,!0);return await(null==r?void 0:r(t,e.data,o)),`${o},${s}`}}),X.a.require.fetch=De({transform:({data:e},t)=>/^\s*</.test(e)?o.reject(`NOT_JS: ${t} "${e.slice(0,100).trim().replace(/\s{2,}/g," ")}"`):e});const Me={};function Ee(e){return+e||0}function Le(e){return null==e?void 0:e.props.id}function Ae(){F("lastModified",Date.now())}async function qe(){const e=Me.scripts.filter(({props:e},t)=>{const n=t+1,r=e.position!==n;return r&&(e.position=n),r});return Me.storeInfo.position=Me.scripts.length,e.length&&(await X.a.script.dump(e),Ae()),e.length}async function Pe(){Me.scripts.sort((e,t)=>Ee(e.props.position)-Ee(t.props.position));const e=await qe();return r(h.x)("ScriptsUpdated",null),e}function Ne(e){return Me.scriptMap[e]}function ze({id:e,uri:t,meta:n}){let r;return e?r=Ne(e):(t||(t=ae({meta:n,id:"@@should-have-name"})),r=Me.scripts.find(({props:e})=>t===e.uri)),r}function He(){return Me.scripts.filter(e=>!e.config.removed)}function We(e){return X.a.value.getMulti(e)}async function Fe(e){return await X.a.value.dump(e),e}X.a.base.setDataCache(R),X.a.script.onDump=e=>{Me.scriptMap[e.props.id]=e},r.assign(C,{CheckPosition:Pe,CheckRemove:nt,GetScript:ze,async ExportZip({values:e}){const t=He(),n=t.map(Le),r=await X.a.code.getMulti(n);return{items:t.map(e=>({script:e,code:r[e.props.id]})),values:e?await X.a.value.getMulti(n):void 0}},GetScriptCode:e=>X.a.code.getOne(e),GetScriptVer(e){const t=ze(e);return t&&!t.config.removed?t.meta.version:null},MarkRemoved:({id:e,removed:t})=>st(e,{config:{removed:t?1:0},props:{lastModified:Date.now()}}),Move({id:e,offset:t}){const n=Ne(e),r=Me.scripts.indexOf(n);return Me.scripts.splice(r,1),Me.scripts.splice(r+t,0,n),qe()},async RemoveScript(e){const t=Me.scripts.indexOf(Ne(e));return t>=0&&(Me.scripts.splice(t,1),await o.all([X.a.script.remove(e),X.a.code.remove(e),X.a.value.remove(e)])),r(h.x)("RemoveScript",e)},ParseMeta:oe,ParseScript:it,UpdateScriptInfo:({id:e,config:t,custom:n})=>st(e,{config:t,custom:n,props:{lastModified:Date.now()}}),Vacuum:pt}),D.push(async()=>{var e;const{version:t}=await browser.storage.local.get("version"),n="2.13.0.12";t||await _e(),n!==t&&browser.storage.local.set({version:n});const o=await browser.storage.local.get(),s=[],i={id:0,position:0},a={},c={},d=[],p=[],g=function(e){p.push(this[e]||e)};return l(m.c,o,([e,t])=>{if(R.put(e,t),e.startsWith(X.a.script.prefix)){var n;const o=Ee(e.slice(X.a.script.prefix.length));if(!o||a[o])return;a[o]=t;const u=ae(t);if(c[u])return;c[u]=t,t.props=J()({},t.props,{id:o,uri:u}),t.custom=J()({},se(),{},t.custom),i.id=Math.max(i.id,o),i.position=Math.max(i.position,Ee(t.props.position)),s.push(t);const{custom:{pathMap:d={}}={},meta:p=(t.meta={})}=t;p.grant=[...new Set(p.grant||[])],null==(n=p.require)||n.forEach(g,d),r.values(p.resources||{}).forEach(g,d),l(g,d,p.icon)}else e.startsWith(X.a.mod.prefix)&&d.push(e.slice(X.a.mod.prefix.length))}),X.a.mod.removeMulti(d.filter(e=>!p.includes(e))),r.assign(Me,{scripts:s,storeInfo:i,scriptMap:s.reduce((e,t)=>(e[t.props.id]=t,e),{})}),n!==t&&u&&(null==(e=o.options)?void 0:e.defaultInjectInto)===f.h&&r(h.c)(t,"2.12.7")<=0&&F("defaultInjectInto",f.e),pt(o),Pe()});const Ve="cacheKeys",Be="reqKeys",Ge="valueIds",Ke=/^GM[_.](listValues|([gs]et|delete)Value)$/,Je=/^document-(start|body|end|idle)$/;async function Xe(e,t){const n=Re(e)?[]:Me.scripts.filter(n=>{var r;return!n.config.removed&&(t||!(null!=(r=n.custom.noframes)?r:n.meta.noframes))&&we(e,n)}),o=[],[s,i]=[0,1].map(()=>({ids:[],scripts:[],[Ve]:[],[Be]:[],[Ge]:[]}));return n.forEach(e=>{var t;const{id:n}=e.props;if(!e.config.enabled)return void o.push(n);const{meta:a,custom:c}=e,{pathMap:l=at(e)}=c,u=(null==(t=`${c.runAt||a.runAt||""}`.match(Je))?void 0:t[1])||"end",d="start"===u||"body"===u?s:i;d.ids.push(n),a.grant.some(Ke.test,Ke)&&d[Ge].push(n);for(const[e,t]of[[a.require,Be],[r.values(a.resources),Ve]])e.forEach(e=>{e=l[e]||e,s[t].includes(e)||d[t].push(e)});d.scripts.push(J()({},e,{runAt:u}))}),i.ids.length&&(i.promise=Ye(i)),J()({},s,{},await Ye(s),{disabledIds:o,envDelayed:i})}const Ze=r.entries({cache:Ve,code:"ids",require:Be,value:Ge}),Qe={};async function Ye(e,t){const n=[];Ze.forEach(([t,r])=>{e[r].forEach(e=>{n.push(X.a[t].getKey(e))})});const r=await X.a.base.getMulti(n);for(const[n,o]of Ze){e[n]={};for(const s of e[o]){const o=r[X.a[n].getKey(s)];if(e[n][s]=o,null==o&&"value"!==n&&2!==Qe[n+s]){const r=`The "${n}" storage is missing "${s}"!`,o="Vacuuming did not help. Please reinstall the affected scripts.";if(Qe[n+s]=t?2:1,!t&&(console.warn(r,"Vacuuming..."),await pt()))return Ye(e,!0);console.error(r,o),$({title:r,body:o})}}}return e}async function et(e){const t=e?e.map(Ne):Me.scripts;return{scripts:t,cache:await tt(t)}}function tt(e){const t=[];return e.forEach(e=>{const{icon:n}=e.meta;var o;r(h.s)(n)&&t.push((null==(o=e.custom.pathMap)?void 0:o[n])||n)}),t.length?X.a.cache.getMulti(t,void 0,X.a.cache.makeDataUri):{}}function nt({force:e}={}){const t=Date.now(),n=Me.scripts.filter(n=>n.config.removed&&(e||t-Ee(n.props.lastModified)>f.m));if(n.length){Me.scripts=Me.scripts.filter(e=>!e.config.removed);const e=n.map(Le);X.a.script.removeMulti(e),X.a.code.removeMulti(e),X.a.value.removeMulti(e)}return n.length}function rt(){const e=new Uint16Array(8);return i.crypto.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768,"01-2-3-4-567".replace(/\d/g,t=>(e[t]+65536).toString(16).slice(-4))}async function ot(e,t){const n=e.config||{};n.enabled=Ee(n.enabled),n.shouldUpdate=Ee(n.shouldUpdate);const s=e.props||{};let i;if(s.id?i=Me.scriptMap[s.id]:(Me.storeInfo.id+=1,s.id=Me.storeInfo.id),s.uri=ae(e),s.uuid=s.uuid||(null==crypto.randomUUID?void 0:crypto.randomUUID())||rt(),Me.scripts.some(({props:{id:e,uri:t}={}})=>s.id!==e&&s.uri===t))throw r(h.p)("msgNamespaceConflict");if(i){e.config=J()({},i.config,{},n),e.props=J()({},i.props,{},s);const t=Me.scripts.indexOf(i);Me.scripts[t]=e}else s.position?Me.storeInfo.position<s.position&&(Me.storeInfo.position=s.position):(Me.storeInfo.position+=1,s.position=Me.storeInfo.position),e.config=n,e.props=s,Me.scripts.push(e);return o.all([X.a.script.dump(e),X.a.code.set(s.id,t)])}async function st(e,t){const n=Me.scriptMap[e];if(!n)throw null;return n.props=J()({},n.props,{},t.props),n.config=J()({},n.config,{},t.config),n.custom=J()({},n.custom,{},t.custom),await X.a.script.dump(n),r(h.x)(f.c,{where:{id:e},update:n})}async function it(e){const t=oe(e.code);if(!t.name)throw`${r(h.p)("msgInvalidScript")}\n${r(h.p)("labelNoName")}`;const n={update:{message:null==e.message?r(h.p)("msgUpdated"):e.message||""}};let o,s=f.c;const i=await ze({id:e.id,meta:t});if(i){if(e.isNew)throw r(h.p)("msgNamespaceConflict");o=J()({},i)}else({script:o}=ie()),s=f.b,n.isNew=!0,n.update.message=r(h.p)("msgInstalled");return o.config=J()({},o.config,{},e.config,{removed:0}),o.custom=J()({},o.custom,{},e.custom),o.props=J()({},o.props,{lastModified:Date.now(),lastUpdated:Date.now()},e.props),o.meta=t,t.homepageURL||o.custom.homepageURL||!r(h.s)(e.from)||(o.custom.homepageURL=e.from),r(h.s)(e.url)&&(o.custom.lastInstallURL=e.url),e.position&&(o.props.position=+e.position),at(o,e.url),await ot(o,e.code),ct(o,e),r.assign(n.update,o,e.update),n.where={id:o.props.id},r(h.x)(s,n),Q.emit("scriptChanged",n),n}function at(e,t){const{meta:n}=e,o=t||e.custom.lastInstallURL,s=o?[...n.require,...r.values(n.resources),n.icon].reduce((e,t)=>{if(t){const n=r(h.l)(t,o);n!==t&&(e[t]=n)}return e},{}):{};return e.custom.pathMap=s,s}async function ct(e,t,n){const{custom:{pathMap:s},meta:i}=e,a=(e,r,o)=>{var i;e=s[e]||e;const a=null==t||null==(i=t[r])?void 0:i[e];return null==a||o?X.a[r].fetch(e,n,o).catch(e=>e):X.a[r].set(e,a)&&null},c=await o.all([...i.require.map(e=>a(e,"require")),...r.values(i.resources).map(e=>a(e,"cache")),r(h.s)(i.icon)&&a(i.icon,"cache",lt)]);if(!(null==t?void 0:t.ignoreDepsErrors)){const t=l(h.B,c.map(ut),"\n");if(t){const n=r(h.p)("msgErrorFetchingResource");return r(h.x)(f.c,{update:{error:t,message:n},where:{id:e.props.id}}),`${n}\n${t}`}}}function lt(e,t,n){return new o((r,o)=>{const s=URL.createObjectURL(new Blob([t],{type:n})),i=t=>{URL.revokeObjectURL(s),"load"===t.type?r():o(`IMAGE_ERROR: ${e}`)},a=new Image;a.onload=i,a.onerror=i,a.src=s})}function ut(e){return e&&l(h.B,[e.status&&`HTTP${e.status}`,e.url]," ")||e}let dt;async function pt(e){if(dt)return dt;let n,s=0;dt=new o(e=>{n=e});const i={},a=[],c=[],u={},d={},p={},f={},g=[[X.a.value,u],[X.a.cache,d],[X.a.require,p],[X.a.code,f]];e||(e=await browser.storage.local.get()),l(m.d,e,e=>{g.some(([t,n])=>{const{prefix:r}=t;return!!e.startsWith(r)&&(n[e.slice(r.length)]=-1,!0)})});const w=(e,t,n)=>{e[t]<0?e[t]=1:e[t]||(e[t]=2+n)};return Me.scripts.forEach(e=>{const{id:t}=e.props;w(f,t,t),w(u,t,t),e.custom.pathMap||at(e);const{pathMap:n}=e.custom;e.meta.require.forEach(e=>{w(p,n[e]||e,t)}),l(m.e,e.meta.resources,e=>{w(d,n[e]||e,t)});const{icon:o}=e.meta;if(r(h.s)(o)){const e=n[o]||o;w(d,e,t)}}),g.forEach(([e,t])=>{l(m.c,t,([t,n])=>{n<0?(c.push(e.getKey(t)),s+=1):n>=2&&e.fetch&&(c.push(X.a.mod.getKey(t)),a.push(e.fetch(t).catch(e=>`${r(h.n)(Ne(n-2))}: ${ut(e)}`)),s+=1)})}),s&&(await X.a.base.removeMulti(c),i.errors=(await o.all(a)).filter(t)),dt=null,i.fixes=s,n(i),i}const ht={update:C.ParseScript,list:async()=>He(),get:C.GetScriptCode,remove:e=>C.MarkRemoved({id:e,removed:!0})},ft=[],mt=[],gt={},wt=r(h.d)(Pt,f.k);let vt,yt=o.resolve();function bt({name:e,uri:t}){return e||`vm@2-${t}`}function xt(e){return/^vm(?:@\d+)?-/.test(e)}function kt(e){const t=e.indexOf("-"),[,n]=e.slice(0,t).split("@");if("2"===n)return e.slice(t+1);try{return decodeURIComponent(e.slice(3))}catch(t){return e.slice(3)}}function St(){function e(e,t){const n=r(h.v)(e);return n.unshift("sync"),H(n,t)}function t(e,t){const n=r(h.v)(e);n.unshift("sync"),F(n,t)}function n(){let e=H("sync");e&&e.services||(e={services:{}},t([],e))}return n(),{get:e,set:t}}function Ct(e){function t(t){const n=r(h.v)(t);return n.unshift("services",e),n}function n(e,n){return vt.get(t(e),n)}function o(e,n){"object"==typeof e?l(m.c,e,([e,n])=>{vt.set(t(e),n)}):vt.set(t(e),n)}function s(){vt.set(t(),{})}return{get:n,set:o,clear:s}}function $t(e,t,n){let o=t||e[0];function s(){return o}function i(t){return e.includes(t)?(o=t,n&&n()):console.warn("Invalid state:",t),s()}function a(e){return r(h.h)(e).includes(o)}return{get:s,set:i,is:a}}function It(){return ft.map(e=>{const t=gt[e];return{name:t.name,displayName:t.displayName,authState:t.authState.get(),syncState:t.syncState.get(),lastSync:t.config.get("meta",{}).lastSync,progress:t.progress,properties:t.properties,userConfig:t.getUserConfig()}})}function Ut(e,t,n){let o;return 2===t?o={version:t,custom:e.custom,config:e.config,props:r(m.i)(e.props,["lastUpdated"])}:1===t&&(o={version:t,more:{custom:e.custom,enabled:e.config.enabled,update:e.config.shouldUpdate,lastUpdated:e.props.lastUpdated}}),r.assign(o,n)}function Rt(e){const t={};try{const n=JSON.parse(e);t.code=n.code,2===n.version?(t.config=n.config,t.custom=n.custom,t.props=n.props):1===n.version&&n.more&&(t.custom=n.more.custom,t.config=jt({enabled:n.more.enabled,shouldUpdate:n.more.update}),t.props=jt({lastUpdated:n.more.lastUpdated}))}catch(n){t.code=e}return t}function jt(e){return Array.isArray(e)?e.forEach(jt):e&&"object"==typeof e&&l(m.c,e,([t,n])=>{void 0===n?delete e[t]:jt(n)}),e}function Tt(e){const t=function(){this.initialize()};return t.prototype=e,t.extend=_t,t}function _t(e){return Tt(r.assign(r.create(this.prototype),e))}const Dt=r(h.d)(()=>{r(h.x)("UpdateSync",It())}),Ot=Tt({name:"base",displayName:"BaseService",delayTime:1e3,urlPrefix:"",metaFile:"Violentmonkey",properties:{authType:"oauth"},getUserConfig:h.u,setUserConfig:h.u,initialize(){this.progress={finished:0,total:0},this.config=Ct(this.name),this.authState=$t(["idle","no-auth","initializing","authorizing","authorized","unauthorized","error"],null,Dt),this.syncState=$t(["idle","ready","syncing","error"],null,Dt),this.lastFetch=o.resolve(),this.startSync=this.syncFactory();const e=j();["on","off","fire"].forEach(t=>{this[t]=(...n)=>{e[t](...n)}})},log(...e){console.log(...e)},syncFactory(){let e,t;const n=()=>this.authState.is("authorized")&&Et()===this.name,s=()=>{if(!n())return o.resolve();this.log("Ready to sync:",this.displayName),this.syncState.set("ready"),yt=yt.then(()=>new o(e=>{t=r(h.d)(e,1e4),t()})).then(()=>{if(n())return this.sync();this.syncState.set("idle")}).catch(e=>{console.error(e)}).then(()=>{e=null,t=null}),e=yt};function i(){return e||s(),t&&t(),e}return i},prepareHeaders(){this.headers={}},prepare(){return this.authState.set("initializing"),(this.initToken()?o.resolve(this.user()):o.reject({type:"no-auth"})).then(()=>{this.authState.set("authorized")},e=>{throw["no-auth","unauthorized"].includes(null==e?void 0:e.type)?this.authState.set(e.type):(console.error(e),this.authState.set("error")),this.syncState.set("idle"),e})},checkSync(){return this.prepare().then(()=>this.startSync())},user:h.u,acquireLock:h.u,releaseLock:h.u,handleMetaError(e){throw e},getMeta(){return this.get({name:this.metaFile}).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>({name:this.metaFile,data:e}))},initToken(){this.prepareHeaders();const e=this.config.get("token");return this.headers.Authorization=e?`Bearer ${e}`:null,!!e},loadData(e){const{progress:t}=this,{delay:n=this.delayTime}=e;let s=o.resolve();return n&&(s=this.lastFetch.then(e=>r(h.t)(n-(Date.now()-e))).then(()=>Date.now()),this.lastFetch=s),t.total+=1,Dt(),s.then(()=>{var t;(e=r.assign({},e)).headers=r.assign({},this.headers,e.headers);let{url:n}=e;return n.startsWith("/")&&(n=(null!=(t=e.prefix)?t:this.urlPrefix)+n),r(h.w)(n,e)}).then(({data:e})=>({data:e}),e=>({error:e})).then(({data:e,error:n})=>(t.finished+=1,Dt(),n?o.reject(n):e))},getLocalData:()=>ht.list(),getSyncData(){return this.getMeta().then(e=>o.all([e,this.list(),this.getLocalData()]))},sync(){return this.progress={finished:0,total:0},this.syncState.set("syncing"),this.prepare().then(()=>this.getSyncData()).then(e=>o.resolve(this.acquireLock()).then(()=>e)).then(([e,n,s])=>{const i=e.data||{},a=i.info||{},c=i.timestamp||0;let u=!c||r.keys(a).length!==n.length;const d=Date.now(),p=H("lastModified"),f={},g=this.config.get("meta",{}),w=!g.timestamp,v=w||c>g.timestamp;this.log("First sync:",w),this.log("Outdated:",v,"(","local:",g.timestamp,"remote:",c,")");const y=[],b=[],x=[],k=[],S=[];i.info=n.reduce((e,t)=>{f[t.uri]=t;let n=a[t.uri];return n||(n={},u=!0),e[t.uri]=n,n.modified||(n.modified=d,u=!0),e},{}),s.forEach(e=>{const{props:{uri:t,position:n,lastModified:r}}=e,o=i.info[t],s=f[t];o&&s?(w||!r||o.modified>r?y.push({local:e,remote:s,info:o}):(o.modified<r&&(b.push({local:e,remote:s}),o.modified=r,u=!0),o.position!==n&&(o.position&&p<=c?S.push({local:e,remote:s,info:o}):(o.position=n,u=!0))),delete f[t]):w||!v||r>c?b.push({local:e}):k.push({local:e})}),l(m.c,f,([e,t])=>{const n=i.info[e];v?y.push({remote:t,info:n}):x.push({remote:t})});const C=[...y.map(({remote:e,info:t})=>(this.log("Download script:",e.uri),this.get(e).then(e=>{const n=Rt(e);if(!n.code)return;t.modified&&r(m.j)(n,"props.lastModified",t.modified);const o=+t.position;return o&&(n.position=o),!H("syncScriptStatus")&&n.config&&delete n.config.enabled,ht.update(n)}))),...b.map(({local:e,remote:t})=>(this.log("Upload script:",e.props.uri),ht.get(e.props.id).then(n=>{const o=Ut(e,1,{code:n});return i.info[e.props.uri]={modified:e.props.lastModified,position:e.props.position},u=!0,this.put(r.assign({},t,{uri:e.props.uri,name:null}),JSON.stringify(o))}))),...x.map(({remote:e})=>(this.log("Remove remote script:",e.uri),delete i.info[e.uri],u=!0,this.remove(e))),...k.map(({local:e})=>(this.log("Remove local script:",e.props.uri),ht.remove(e.props.id))),...S.map(({local:e,info:t})=>{const n={};return t.position&&(n.props={position:t.position}),st(e.props.id,n)})];return C.push(o.all(C).then(()=>Pe()).then(e=>{if(e)return u=!0,ht.list().then(e=>{e.forEach(e=>{const t=i.info[e.props.uri];t&&(t.position=e.props.position)})})})),C.push(o.all(C).then(()=>{const t=[];return u&&(i.timestamp=Date.now(),t.push(this.put(e,JSON.stringify(i)))),g.timestamp=i.timestamp,g.lastSync=Date.now(),this.config.set("meta",g),o.all(t)})),o.all(C.map(e=>e.then(h.u,e=>e||!0))).then(e=>e.filter(t)).then(e=>{if(e.length)throw e})}).then(()=>{this.syncState.set("idle"),this.log("Sync finished:",this.displayName)},e=>{this.syncState.set("error"),this.log("Failed syncing:",this.displayName),this.log(e)}).then(()=>o.resolve(this.releaseLock()).catch(h.u))}});function Mt(e){mt.push(e)}function Et(){return vt.get("current")}function Lt(e){return gt[e||Et()]}function At(){vt||(vt=St(),mt.forEach(e=>{const t=new e,{name:n}=t;ft.push(n),gt[n]=t})),Pt()}function qt(e){if(!e.syncState.is(["ready","syncing"]))return e.authState.is(["idle","error"])?e.checkSync():e.authState.is("authorized")?e.startSync():void 0}function Pt(){const e=Lt();return e&&o.resolve(qt(e)).then(wt)}function Nt(){const e=Lt();e&&e.authorize()}function zt(){const e=Lt();e&&e.revoke()}function Ht(e){const t=Lt();if(t)return t.setUserConfig(e),t.checkSync()}async function Wt(e,t){Vt(),browser.webRequest.onBeforeRequest.addListener(Ft,{urls:[`${t}*`],types:["main_frame"],tabId:(await browser.tabs.create({url:e})).id},["blocking"])}function Ft(e){var t,n;if(null==(t=(n=Lt()).checkAuth)?void 0:t.call(n,e.url))return browser.tabs.remove(e.tabId),setTimeout(Vt,0),{cancel:!0}}function Vt(){browser.webRequest.onBeforeRequest.removeListener(Ft)}V(e=>{(null==e?void 0:e["sync.current"])&&At()});const Bt={client_id:"f0q12zup2uys5w8",redirect_uri:"https://violentmonkey.github.io/auth_dropbox.html"},Gt=/[\u007f-\uffff]/g,Kt=e=>`\\u${(e.charCodeAt(0)+65536).toString(16).slice(1)}`;function Jt(e){return JSON.stringify(e).replace(Gt,Kt)}function Xt(e){return{name:e.name,size:e.size,uri:kt(e.name)}}Mt(Ot.extend({name:"dropbox",displayName:"Dropbox",user(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/users/get_current_account"}).catch(e=>401===e.status?o.reject({type:"unauthorized"}):o.reject({type:"error",data:e}))},handleMetaError(e){if(409!==e.status)throw e},list(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/list_folder",body:{path:""},responseType:"json"}).then(e=>e.entries.filter(e=>"file"===e[".tag"]&&xt(e.name)).map(Xt))},get(e){const t=bt(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/download",headers:{"Dropbox-API-Arg":Jt({path:`/${t}`})}})},put(e,t){const n=bt(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/upload",headers:{"Dropbox-API-Arg":Jt({path:`/${n}`,mode:"overwrite"}),"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(Xt)},remove(e){const t=bt(e);return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/delete",body:{path:`/${t}`},responseType:"json"}).then(Xt)},authorize(){Wt(`https://www.dropbox.com/oauth2/authorize?${G({response_type:"token",client_id:Bt.client_id,redirect_uri:Bt.redirect_uri})}`,Bt.redirect_uri)},authorized(e){const t=B(e);t.access_token&&this.config.set({uid:t.uid,token:t.access_token})},checkAuth(e){const t=`${Bt.redirect_uri}#`;if(e.startsWith(t))return this.authorized(e.slice(t.length)),this.checkSync(),!0},revoke(){return this.config.set({uid:null,token:null}),this.prepare()}}));const Zt={client_id:void 0,client_secret:void 0,redirect_uri:"https://violentmonkey.github.io/auth_onedrive.html"};function Qt(e){return{name:e.name,size:e.size,uri:kt(e.name)}}Mt(Ot.extend({name:"onedrive",displayName:"OneDrive",urlPrefix:"https://api.onedrive.com/v1.0",refreshToken(){const e=this.config.get("refresh_token");return this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare())},user(){const e=()=>this.loadData({url:"/drive",responseType:"json"});return e().catch(t=>{if(401===t.status)return this.refreshToken().then(e);throw t}).catch(e=>400===e.status&&"invalid_grant"===r(m.h)(e,"data.error")?o.reject({type:"unauthorized"}):o.reject({type:"error",data:e}))},handleMetaError(e){if(404===e.status){var t;const n=(null==(t=e.headers.get("WWW-Authenticate"))?void 0:t[0])||"";return/^Bearer realm="OneDriveAPI"/.test(n)?this.refreshToken().then(()=>this.getMeta()):void 0}throw e},list(){return this.loadData({url:"/drive/special/approot/children",responseType:"json"}).then(e=>e.value.filter(e=>e.file&&xt(e.name)).map(Qt))},get(e){const t=bt(e);return this.loadData({url:`/drive/special/approot:/${encodeURIComponent(t)}`,responseType:"json"}).then(e=>this.loadData({url:e["@content.downloadUrl"],delay:!1}))},put(e,t){const n=bt(e);return this.loadData({method:"PUT",url:`/drive/special/approot:/${encodeURIComponent(n)}:/content`,headers:{"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(Qt)},remove(e){const t=bt(e);return this.loadData({method:"DELETE",url:`/drive/special/approot:/${encodeURIComponent(t)}`}).catch(h.u)},authorize(){Wt(`https://login.live.com/oauth20_authorize.srf?${G({client_id:Zt.client_id,scope:"onedrive.appfolder wl.offline_access",response_type:"code",redirect_uri:Zt.redirect_uri})}`,Zt.redirect_uri)},checkAuth(e){const t=`${Zt.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:e.slice(t.length)}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({uid:null,token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://login.live.com/oauth20_token.srf",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G(r.assign({},{client_id:Zt.client_id,client_secret:Zt.client_secret,redirect_uri:Zt.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;this.config.set({uid:e.user_id,token:e.access_token,refresh_token:e.refresh_token})})}}));const Yt={client_id:void 0,client_secret:void 0,redirect_uri:"https://violentmonkey.github.io/auth_googledrive.html",scope:"https://www.googleapis.com/auth/drive.appdata"},en={status:"UNAUTHORIZED"};function tn(e){return{id:e.id,name:e.name,size:+e.size,uri:kt(e.name)}}Mt(Ot.extend({name:"googledrive",displayName:"Google Drive",urlPrefix:"https://www.googleapis.com/drive/v3",refreshToken(){const e=this.config.get("refresh_token");return e?this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare()):o.reject({type:"unauthorized"})},user(){const e=()=>this.loadData({url:`https://www.googleapis.com/oauth2/v3/tokeninfo?${G({access_token:this.config.get("token")})}`,responseType:"json"});return e().then(e=>"online"===e.access_type?this.loadData({method:"POST",url:`https://accounts.google.com/o/oauth2/revoke?token=${this.config.get("token")}`,prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(()=>($({title:"Sync Upgraded",body:"Please reauthorize access to your Google Drive to complete the upgradation."}),o.reject("Online access revoked."))):e.scope!==Yt.scope?o.reject(en):void 0).catch(t=>t===en||400===t.status&&"Invalid Value"===r(m.h)(t,"data.error_description")?this.refreshToken().then(e):o.reject({type:"error",data:t}))},getSyncData(){const e={spaces:"appDataFolder",fields:"files(id,name,size)"};return this.loadData({url:`/files?${G(e)}`,responseType:"json"}).then(({files:e})=>{let t;const n=e.filter(e=>!!xt(e.name)||(t||e.name!==this.metaFile?this.remove(e):t=e,!1)).map(tn).filter(e=>!!e.size||(this.remove(e),!1)),s=t?tn(t):{},i=this.get(s).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>r.assign({},s,{name:this.metaFile,uri:null,data:e}));return o.all([i,n,this.getLocalData()])})},authorize(){const e={response_type:"code",access_type:"offline",client_id:Yt.client_id,redirect_uri:Yt.redirect_uri,scope:Yt.scope};this.config.get("refresh_token")||(e.prompt="consent"),Wt(`https://accounts.google.com/o/oauth2/v2/auth?${G(e)}`,Yt.redirect_uri)},checkAuth(e){const t=`${Yt.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:decodeURIComponent(e.split("#")[0].slice(t.length))}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://www.googleapis.com/oauth2/v4/token",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G(r.assign({},{client_id:Yt.client_id,client_secret:Yt.client_secret,redirect_uri:Yt.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;{const t={token:e.access_token};e.refresh_token&&(t.refresh_token=e.refresh_token),this.config.set(t)}})},handleMetaError:h.u,list(){throw new n("Not supported")},get({id:e}){return e?this.loadData({url:`/files/${e}?alt=media`}):o.reject()},put(e,t){const n=bt(e),{id:o}=e,s=r(h.o)("violentmonkey-is-great-"),i={"Content-Type":`multipart/related; boundary=${s}`},a=o?{name:n}:{name:n,parents:["appDataFolder"]},c=[`--${s}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(a),`--${s}`,"Content-Type: text/plain","",t,`--${s}--`,""].join("\r\n"),l=o?`https://www.googleapis.com/upload/drive/v3/files/${o}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart";return this.loadData({url:l,body:c,headers:i,method:o?"PATCH":"POST"})},remove({id:e}){return this.loadData({method:"DELETE",url:`/files/${e}`})}}));const nn=Symbol("children");class rn{constructor(e,t){this.node=e,this.nsMap=J()({},t),this.parseAttrs(),this.parseName()}static fromXML(e){const t=(new DOMParser).parseFromString(e,"application/xml");return new rn(t)}parseAttrs(){const{node:e,nsMap:t}=this,n={},{attributes:r}=e;if(r)for(const r of e.attributes){const{name:e,value:o}=r;"xmlns"===e?t.$=o:e.startsWith("xmlns:")&&(t[e.slice(6)]=o),n[e]=o}this.attrs=n}parseName(){const{node:e,nsMap:t}=this;if(1===e.nodeType){let r=e.tagName,o=t.$;if(r.includes(":")){let e;if([e,r]=r.split(":"),o=t[e],!o)throw new n(`Unknown namespace: ${e}`)}this.name=o+r}}text(){const{node:e}=this;if(e)return(e.textContent||"").trim()}children(){if(!this[nn]){const{node:e,nsMap:t}=this;this[nn]=[...e.children].map(e=>new rn(e,t))}return this[nn]}map(e){return this.children().map(e)}getCallback(e){return"string"==typeof e?(t=e,e=>e.name===t):e;var t}filter(e){return this.children().filter(this.getCallback(e))}find(e){return this.children().find(this.getCallback(e))}attr(e){return this.attrs[e]}}const on={serverUrl:"",anonymous:!1,username:"",password:""};function sn(e){return{name:e.name,size:e.size,uri:kt(e.name)}}Mt(Ot.extend({name:"webdav",displayName:"WebDAV",properties:{authType:"password",serverUrl:null},getUserConfig(){return this.userConfig||(this.userConfig=J()({},on,{},this.config.get("userConfig"))),this.userConfig},setUserConfig(e){r.assign(this.userConfig,e),this.config.set("userConfig",this.userConfig)},initToken(){var e;this.prepareHeaders();const t=this.getUserConfig();let n=(null==(e=t.serverUrl)?void 0:e.trim())||"";n.includes("://")||(n=`http://${n}`),n.endsWith("/")||(n+="/");try{new URL(n)}catch(e){return this.properties.serverUrl=null,!1}this.properties.serverUrl=`${n}Violentmonkey/`;const{anonymous:r,username:o,password:s}=t;if(r)return!0;if(!o||!s)return!1;const a=i.btoa(`${o}:${s}`);return this.headers.Authorization=`Basic ${a}`,!0},loadData(e){return Ot.prototype.loadData.call(this,r.assign({credentials:"omit"},e))},handleMetaError(e){if(![404,409].includes(e.status))throw e},list(){const{serverUrl:e}=this.properties,n=()=>this.loadData({method:"MKCOL",url:e}),r=()=>this.loadData({method:"PROPFIND",url:e,headers:{depth:"1"}}).then(e=>rn.fromXML(e).children()[0].map(e=>{const t=e.find("DAV:propstat").find("DAV:prop");if("file"==(t.find("DAV:resourcetype").find("DAV:collection")?"directory":"file")){let n;const r=t.find("DAV:displayname");if(void 0!==r)n=r.text();else{const t=e.find("DAV:href").text();n=decodeURIComponent(t.substring(t.lastIndexOf("/")+1))}if(xt(n)){const e=t.find("DAV:getcontentlength");return sn({name:n,size:e?+e.text():0})}}return null}).filter(t));return r().catch(e=>{if(404===e.status)return n().then(r);throw e})},get(e){const t=bt(e),{serverUrl:n}=this.properties;return this.loadData({url:n+t})},put(e,t){const n=bt(e),r={"Content-Type":"text/plain"},o=this.config.get("lock");o&&(r.If=`(<${o}>)`);const{serverUrl:s}=this.properties;return this.loadData({method:"PUT",url:s+n,body:t,headers:r})},remove(e){const t=bt(e),n={},r=this.config.get("lock");r&&(n.If=`(<${r}>)`);const{serverUrl:o}=this.properties;return this.loadData({method:"DELETE",url:o+t,headers:n})}})),r.assign(C,{SyncAuthorize:Nt,SyncRevoke:zt,SyncStart:Pt,SyncSetConfig:Ht});const an={};function cn(e){const t=+e.name;an[t]=1,r(h.z)(t,"PopupShown",!0),e.onDisconnect.addListener(ln),delete C.SetPopup}function ln({name:e}){delete an[e],r(h.z)(+e,"PopupShown",!1)}async function un(){const e=(await r(h.k)()).id;r(h.z)(e,"PopupShown",!0),C.SetPopup=async(e,t)=>{r.assign(e,await et(e.ids)),R.put("SetPopup",r.assign({[t.frameId]:[e,t]},R.get("SetPopup")))}}O.push(()=>{browser.runtime.onConnect.addListener(cn),browser.webRequest.onBeforeRequest.addListener(un,{urls:[browser.runtime.getURL(browser.runtime.getManifest().browser_action.default_popup)],types:["main_frame"]})});var dn=p(14);const pn={urls:["*://*/*"],types:["main_frame","sub_frame"]},hn=1e4,fn=1e3,mn=6e4,gn=r(S.a)({lifetime:mn}),wn=r(S.a)({lifetime:mn,onDispose:async e=>{const t=await e,n=await(null==t?void 0:t.rcsPromise);null==n||n.unregister()}}),vn="injectInto",yn="expose",bn="defaultInjectInto",xn="isApplied",kn="xhrInject",Sn={};let Cn,$n,In;function Un([e,t]){const n=gn.pop(e);t&&n&&browser.tabs.executeScript(this.tab.id,{code:n,frameId:this.frameId,runAt:"document_start"})}V(Tn),O.push(()=>{for(const e of[yn,bn,xn,kn])Tn({[e]:H(e)})}),r.assign(C,{async InjectionFeedback({feedId:e,feedback:n,forceContent:o},s){if(n.forEach(Un,s),e){wn.del(e.cacheKey);const n=await wn.pop(e.envKey);if(n)return n.forceContent=o,n.scripts.map(Nn,n).filter(t).forEach(Un,s),r(m.i)(n,["cache","scripts"])}}});const Rn={[X.a.cache.prefix]:Ve,[X.a.code.prefix]:!0,[X.a.require.prefix]:Be,[X.a.script.prefix]:!0,[X.a.value.prefix]:Ge};function jn(e){return l(a,f.g,e)?e:$n||f.e}function Tn(e){l(m.c,e,([e,t])=>{switch(e){case bn:$n=jn(t),wn.destroy();break;case kn:Mn(t),wn.destroy();break;case xn:On(t);break;case yn:l(m.c,t,([e,t])=>{Sn[decodeURIComponent(e)]=t});break;default:e.includes(".")&&Tn(r(m.j)({},e,t))}})}function _n(e,t,n,r){const o=Dn(e,!n);return wn.pop(o)||qn(o,e,t,n,r)}function Dn(e,t){return t?e:`-${e}`}function On(e){Cn=e;const t=`${e?"add":"remove"}Listener`,n=e?pn:void 0;browser.webRequest.onSendHeaders[t](En,n),Cn&&In||browser.webRequest.onHeadersReceived[t](Ln,n),wn.destroy()}function Mn(e){In=e,browser.webRequest.onHeadersReceived.removeListener(Ln),e&&browser.webRequest.onHeadersReceived.addListener(Ln,pn,["blocking","responseHeaders",browser.webRequest.OnHeadersReceivedOptions.EXTRA_HEADERS].filter(t))}function En({url:e,tabId:t,frameId:n}){if(!f.d.test(e))return;const r=Dn(e,!n);wn.has(r)||wn.put(r,qn(r,e,t,n),hn)}function Ln(e){const t=Dn(e.url,!e.frameId),n=In&&wn.get(t);return wn.hit(t,fn),(null==n?void 0:n.inject)&&An(e,n)}function An({url:e,responseHeaders:t},n){e.startsWith("https:")&&Fn(t)&&Vn(n);const r=URL.createObjectURL(new Blob([JSON.stringify(n.inject)]));return t.push({name:"Set-Cookie",value:`"Violentmonkey:5oPsP/mAXlM="=${r.split("/").pop()}; SameSite=Lax`}),setTimeout(URL.revokeObjectURL,mn,r),{responseHeaders:t}}function qn(e,t,n,r,o){const s={inject:{expose:!r&&t.startsWith("https://")&&Sn[t.split("/",3)[2]]}};return Cn?Pn(s,e,t,n,r,o):s}async function Pn(e,n,o,s,i,a){const c=await Xe(o,!i),{envDelayed:l,scripts:d}=c,p=null!=a;c.forceContent=a;const f=d.map(Nn,c).filter(t),m=l.promise,g=r(h.o)(`${s}:${i}:`),{inject:w}=e;return r.assign(w,{scripts:d,[vn]:$n,cache:c.cache,feedId:{cacheKey:n,envKey:g},hasMore:!!m,forceContent:a||f.length===d.length&&l.scripts.every(e=>Bn(e,a)),ids:c.disabledIds,info:{ua:dn.a}}),r.assign(e,{feedback:f,valOpIds:[...c[Ge],...l[Ge]],rcsPromise:p||In||!u?null:Wn(w,o,!!i)}),m&&wn.put(g,m),wn.put(n,e),e}function Nn(e){var n;const{custom:o,meta:s,props:i}=e,{id:a}=i,{forceContent:c,require:l,value:d}=this,p=this.code[a],m=r(h.o)("VMin"),g=r(h.n)(e),w=encodeURIComponent(g.replace(/[#&',/:;?@=+]/g,zn)),v=Bn(e,c),y=o.pathMap||{},b=null==(n=s.require)?void 0:n.map(e=>l[y[e]||e]).filter(t),x=b?[].concat(...b.map(e=>[e,"\n;"])):[],k=x.length,S=[`window.${m}=function(${m}){try{with(this)((define,module,exports)=>{`,...x,k?"(()=>{":"",p,p.endsWith("\n")?"":"\n",k?"})()":"",`})()}catch(e){${m}(e)}};0`,`\n//# sourceURL=${_}${u?"%20":""}${w}.user.js#${a}`].join("");return gn.put(m,S,mn),r.assign(e,{dataKey:m,displayName:g,code:v?"":c||S,metaStr:p.match(f.i)[1]||"",values:d[a]||null}),v&&[m,!0]}function zn(e){return String.fromCharCode(e.charCodeAt(0)-32+65280)}browser.storage.onChanged.addListener(async e=>{const t=r.keys(e);(await o.all(wn.getValues())).some(e=>e.inject&&t.some(t=>{var n;const r=t.slice(0,t.indexOf(":")+1),o=Rn[r];return t=t.slice(r.length),!0===o||(null==(n=e[o])?void 0:n.includes(r===X.a.value.prefix?+t:t))}))&&wn.destroy()});const Hn=`(${function(e){const{vmResolve:t}=this;t?t(e):this.vmData=e}})`;function Wn(e,t,n){var r;return null==(r=browser.contentScripts)?void 0:r.register({allFrames:n,js:[{code:`${Hn}(${JSON.stringify(e)})`}],matches:t.split("#",1),runAt:"document_start"})}function Fn(e){return e.some(({name:e,value:t})=>/^content-security-policy$/i.test(e)&&/^.(?!.*'unsafe-inline')/.test(t.match(/(?:^|;)\s*script-src-elem\s[^;]+/)||t.match(/(?:^|;)\s*script-src\s[^;]+/)||t.match(/(?:^|;)\s*default-src\s[^;]+/)||""))}function Vn(e){const t=e.inject;t.forceContent=!0,t.scripts.forEach(t=>{t.code=!Bn(t,!0)||"",e.feedback.push([t.dataKey,!0])})}function Bn(e,t){const n=e[vn]||(e[vn]=jn(e.custom[vn]||e.meta[vn]));return n===f.f||t&&n===f.e}const Gn="scriptTemplate",Kn=`${Gn}Edited`,Jn="// ==UserScript==\n// @name New Script\n// @namespace Violentmonkey Scripts\n// @match {{url}}\n// @grant none\n// ==/UserScript==\n";function Xn(e={}){const t=W(Gn);let n=e[Gn];n||(n=t,e[Gn]=n,F(Gn,n));const r=n!==t;r!==e[Kn]&&(e[Kn]=r,F(Kn,r))}O.push(()=>{let e=H(Kn);if(e)return;const t=H(Gn);null==e?(e=t!==Jn,e?F(Kn,!0):Xn()):t!==W(Gn)&&Xn()});const Zn={};let Qn,Yn={};function er(e){l(m.c,Zn,([t,n])=>{e in n&&(delete n[e],r(h.r)(n)&&delete Zn[t])})}function tr(e,t,n){n.forEach(n=>{r(m.j)(Zn,[n,e,t],1)})}async function nr(){for(;!Qn;){Qn=!0,await 0;const e=Yn;if(Yn={},await rr(e),Qn=!1,r(h.r)(Yn))break}}async function rr(e){const t=r.keys(e),n=await We(t);t.forEach(t=>{l(m.c,e[t],([e,{last:o}])=>{r(m.j)(n,[t,e],o||void 0)})}),await o.all([Fe(n),or(sr(e),{partial:!0})])}async function or(e,{partial:t}={}){const n=[];for(const[s,i]of r.entries(e))for(const[e,a]of r.entries(i))r(h.r)(a)||(t&&(a.partial=!0),n.push(r(h.z)(+s,"UpdatedValues",a,{frameId:+e})),20===n.length&&await o.all(n.splice(0)));await o.all(n)}function sr(e){const t={};return l(m.c,e,([e,n])=>{const o=r.entries(n);l(m.c,Zn[e],([n,s])=>{l(m.d,s,s=>{o.forEach(([o,i])=>{var a;i.last!==(null==(a=i[n])?void 0:a[s])&&r(m.j)(t,[n,s,e,o],i.last)})})})}),t}function ir(e){const t={};return l(m.c,e,([e,n])=>{l(m.c,Zn[e],([o,s])=>{l(m.d,s,s=>{r(m.j)(t,[o,s,e],n)})})}),t}r.assign(C,{GetValueStore:async e=>(await We([e]))[e]||{},async SetValueStores(e){const t=e.reduce((e,{where:t,store:n})=>{var r;const o=t.id||(null==(r=ze(t))?void 0:r.props.id);return o&&(e[o]=n),e},{});await o.all([Fe(t),or(ir(t))])},UpdateValue({id:e,key:t,value:n=null},o){r(m.j)(Yn,[e,t,"last"],n),r(m.j)(Yn,[e,t,o.tab.id,o.frameId],n),nr()}}),browser.tabs.onRemoved.addListener(er),browser.tabs.onReplaced.addListener((e,t)=>er(t));const ar="VM-Verify",cr=`${_}confirm/index.html#`,lr={},ur={},dr={},pr={},{chrome:hr}=e;let fr;const mr=e=>"application/octet-stream"===e.overrideMimeType&&"blob"===e.responseType&&e.fileName;hr&&hr.downloads.onChanged.addListener(e=>{var t;if(console.info("onChanged",e),!ur[e.id])return;const{req:n,src:o}=ur[e.id],{tab:{id:s},frameId:i}=o;"complete"===(null==(t=e.state)?void 0:t.current)&&(r(h.z)(s,"HttpRequested",{type:"load",id:n.id,downloadId:e.id},{frameId:i}),delete ur[e.id],delete lr[n.id])}),r.assign(C,{ConfirmInstall:Ir,async CheckInstallerTab(e,t){const n=u&&(t.url||"").startsWith("file:")&&await browser.tabs.get(e).catch(h.u);return n&&(n.pendingUrl||n.url||"").startsWith(cr)},HttpRequest(e,t){const{tab:{id:n},frameId:o}=t,{id:s,eventsToNotify:i}=e;if(hr&&mr(e))return hr.downloads.download({url:e.url,filename:e.fileName},a=>{lr[s]={id:s,downloadId:a,tabId:n,eventsToNotify:i,xhr:null},ur[a]={req:lr[s],opts:e,src:t},(null==i?void 0:i.includes("progress"))&&r(h.z)(n,"HttpRequested",{type:"progress",id:s,downloadId:a},{frameId:o})});lr[s]={id:s,tabId:n,eventsToNotify:i,xhr:new XMLHttpRequest},(pr[n]||(pr[n]={}))[s]=1,Sr(e,t,e=>lr[s]&&r(h.z)(n,"HttpRequested",e,{frameId:o}))},AbortRequest(e){const t=lr[e];t&&(hr?(hr.downloads.cancel(t.id),delete lr[t.id]):(t.xhr.abort(),Cr(t)))},RevokeBlob(e){const t=R.pop(`xhrBlob:${e}`);t&&(clearTimeout(t),URL.revokeObjectURL(e))}});const gr=["user-agent","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],wr=(()=>{const e={urls:["<all_urls>"],types:["xmlhttprequest"]},n=[browser.webRequest.OnBeforeSendHeadersOptions.EXTRA_HEADERS].filter(t),o={},s=e=>e.name===ar,i=e=>!/^cookie2?$/i.test(e.name),a=e=>e.name!==ar,c=e=>a(e)&&i(e),u=/^set-cookie2?$/i,d=/^\s*(?:__(Secure|Host)-)?([^=\s]+)\s*=\s*(")?([!#-+\--:<-[\]-~]*)\3(.*)/,p=/\s*;?\s*(\w+)(?:=(")?([!#-+\--:<-[\]-~]*)\2)?/y,f={strict:"strict",lax:"lax",none:"no_restriction"},g=(e,t,n)=>{let r=d.exec(e);if(r){var o;const[,e,s,,i,a]=r,c={},l="Host"===e;for(p.lastIndex=0;r=p.exec(a);)c[r[1].toLowerCase()]=r[3];const u=null==(o=c.sameSite)?void 0:o.toLowerCase();browser.cookies.set({url:n,name:s,value:i,domain:l?void 0:c.domain,expirationDate:Math.max(0,+new Date(1e3*c["max-age"]||c.expires))||void 0,httpOnly:"httponly"in c,path:l?"/":c.path,sameSite:f[u],secure:n.startsWith("https:")&&(!!e||"none"===u||"secure"in c),storeId:t.storeId})}},w={onBeforeSendHeaders:{options:["requestHeaders","blocking",...n],listener({requestHeaders:e,requestId:t}){var n;const r=(null==(n=e.find(s))?void 0:n.value)||dr[t],l=r&&lr[r];return r&&l&&(dr[t]=r,l.coreId=t,e=(l.noNativeCookie?e.filter(i):e).concat(o[r]||[]).filter(l.anonymous?c:a)),{requestHeaders:e}}},onHeadersReceived:{options:["responseHeaders","blocking",...n],listener({responseHeaders:e,requestId:t,url:n}){const r=lr[dr[t]];if(r)return(r.anonymous||r.storeId)&&(e=e.filter(e=>!u.test(e.name)||!r.storeId||g(e.value,r,n))),r.responseHeaders=e.map(Mr).join(""),{responseHeaders:e}}}};return dn.a.chrome>=74&&dn.a.chrome<=91&&browser.webRequest.onBeforeSendHeaders.addListener(h.u,e,["extraHeaders"]),{add(t,n){o[t]=n,l(m.c,w,([t,{listener:n,options:r}])=>{browser.webRequest[t].addListener(n,e,r)})},del(e){e in o&&(delete o[e],r(h.r)(o)&&l(m.c,w,([e,{listener:t}])=>{browser.webRequest[e].removeListener(t)}))}}})(),vr=1e6;async function yr(e,t){return r(h.a)(e,t*vr,vr)}function br(e){const t=URL.createObjectURL(e);return R.put(`xhrBlob:${t}`,setTimeout(C.RevokeBlob,6e4,t),61e3),t}function xr(e){let t,n,s,i,a,c,l=o.resolve(),u=!1;const{id:d,blobbed:p,chunked:h,xhr:f}=e,g=p&&br||h&&yr,w=()=>{const t=e.responseHeaders||f.getAllResponseHeaders();if(c!==t)return c=t,{responseHeaders:c}};return o=>{const c=o.type;if(t||(t=f.getResponseHeader("Content-Type")||"application/octet-stream"),f.response!==i){i=f.response,u=!1;try{a=f.responseText,a===i&&(a=["same"])}catch(e){}(p||h)&&i&&(n=i.size,s=h&&Math.ceil(n/vr)||1)}const v=e.eventsToNotify.includes(c),y=4===f.readyState&&v&&!u;l=l.then(async()=>{if(await e.cb({blobbed:p,chunked:h,contentType:t,dataSize:n,id:d,numChunks:s,type:c,data:v&&J()({finalUrl:f.responseURL},w(),{},r(m.i)(f,["readyState","status","statusText"]),{},"loaded"in o&&r(m.i)(o,["lengthComputable","loaded","total"]),{response:y?s&&await g(i,0)||i:null,responseText:y?a:null})}),y)for(let t=1;t<s;t+=1)await e.cb({id:d,chunk:{pos:t*vr,data:await g(i,t),last:t+1===s}});"loadend"===c&&Cr(e)})}}function kr(e){return gr.includes(e)||e.startsWith("proxy-")||e.startsWith("sec-")}async function Sr(e,t,n){const{tab:r}=t,{incognito:o}=r,{anonymous:s,id:i,overrideMimeType:a,responseType:c,url:d}=e,p=lr[i];if(!p||p.cb)return;p.cb=n,p.anonymous=s;const{xhr:h}=p,f=[],g=!u&&o,w=c&&!u&&!o,[v,y]=$r(e.data);p.blobbed=w,p.chunked=g;let b=!s&&(o||u);if(h.open(e.method||"GET",d,!0,e.user||"",e.password||""),h.setRequestHeader(ar,i),y&&h.setRequestHeader("Content-Type",y),l(m.c,e.headers,([e,t])=>{const n=e.toLowerCase();kr(n)?f.push({name:e,value:t}):n.startsWith("vm-")||h.setRequestHeader(e,t),"cookie"===n&&(b=!1)}),h.responseType=(g||w?"blob":c)||"text",h.timeout=Math.max(0,Math.min(2147483647,e.timeout))||0,a&&h.overrideMimeType(a),b){p.noNativeCookie=!0;for(const e of await browser.cookies.getAllCookieStores())if(e.tabIds.includes(r.id)){(u?"firefox-default"!==e.id:"0"!==e.id)&&(p.storeId=e.id);break}const e=Date.now()/1e3,t=(await browser.cookies.getAll(J()({url:d,storeId:p.storeId},dn.a.firefox>=59&&{firstPartyDomain:null}))).filter(t=>t.session||t.expirationDate>e);t.length&&f.push({name:"cookie",value:t.map(e=>`${e.name}=${e.value};`).join(" ")})}wr.add(i,f);const x=xr(p);p.eventsToNotify.forEach(e=>{h[`on${e}`]=x}),h.onloadend=x,h.send(v)}function Cr(e){e.coreId&&delete dr[e.coreId],delete lr[e.id],delete(pr[e.tabId]||{})[e.id],wr.del(e.id)}function $r([e,t,n]){if("query"===t)t="application/x-www-form-urlencoded";else if(t){const o=r(h.A)(atob(e.slice(e.indexOf(",")+1)));n||(t=e.match(/^data:(.+?);base64/)[1].replace(/(boundary=)[^;]+/,(e,t)=>t+String.fromCharCode(...o.slice(2,o.indexOf(13))))),e=o}return[e,t]}async function Ir({code:e,from:t,url:n},{tab:o={}}){if(e||(e=(await r(h.w)(n)).data),!Y(e))throw r(h.p)("msgInvalidScript");R.put(n,e,3e3);const s=r(h.o)(),{active:i,id:a,incognito:c}=o,l=(!c||u)&&(n===t||R.has(`autoclose:${a}`)||/^(chrome:\/\/(newtab|startpage)\/|about:(home|newtab))$/.test(t));R.put(`confirm-${s}`,{incognito:c,url:n,from:t,tabId:a,ff:dn.a.firefox});const d=cr+s,{windowId:p}=l?await browser.tabs.update(a,{url:d}):await C.TabOpen({url:d,active:!!i},{tab:o});i&&p!==o.windowId&&await browser.windows.update(p,{focused:!0})}const Ur=new RegExp(`^https://(${["greasyfork\\.org/scripts/%/code/","openuserjs\\.org/install/%/","github\\.com/%/%/raw/%/","github\\.com/%/%/releases/%/download/","raw\\.githubusercontent\\.com(/%){3}/","gist\\.github\\.com/.*?/"].join("|")})%?\\.user\\.js([?#]|$)`.replace(/%/g,"[^/]*")),Rr=new RegExp(`^https://(${["(gist\\.)?github\\.com","greasyfork\\.org","openuserjs\\.org"].join("|")})/`),jr=e=>`${_}options/index.html#scripts/${+e.split("#")[1]}`,Tr=u&&new RegExp(`^(view-source:)?(${_.replace("://","$&)?")}[^/]*\\.user\\.js#\\d+`),_r=Tr&&((e,t)=>{Tr.test(t)&&browser.tabs.update(e,{url:jr(t)})});if(Tr){const e=(e,{url:t})=>t&&_r(e,t),t=browser.tabs.onUpdated,n=t.addListener.bind(t,e);try{n({properties:["url"]})}catch(e){n()}}async function Dr(e,t){const{data:n}=await r(h.w)(t).catch(h.u)||{};if(n&&oe(n).name){const r=e>=0&&await browser.tabs.get(e)||{};Ir({code:n,url:t,from:r.url},{tab:r})}else R.put(`bypass:${t}`,!0,1e4),e>=0&&browser.tabs.update(e,{url:t})}function Or(e){const t=pr[e];t&&(delete pr[e],l(m.c,t,([e])=>C.AbortRequest(e)))}function Mr({name:e,value:t,binaryValue:n}){return`${Er(e)}: ${n?r(h.b)(n):Er(t)}\r\n`}function Er(e){return/[\u0080-\uFFFF]/.test(e)?(fr||(fr=new TextEncoder),r(h.b)(fr.encode(e))):e}browser.tabs.onCreated.addListener(e=>{const{id:t,title:n,url:r}=e;(!r.startsWith("file:")||dn.a.firefox<68)&&/\.user\.js([?#]|$)/.test(e.pendingUrl||r)&&R.put(`autoclose:${t}`,!0,1e4),Tr&&"about:blank"===r&&_r(t,n)}),browser.webRequest.onBeforeRequest.addListener(e=>{const{method:t,tabId:n,url:r}=e;if("GET"===t)return r.startsWith(_)?{redirectUrl:jr(r)}:R.has(`bypass:${r}`)||Rr.test(r)&&!Ur.test(r)?void 0:(Dr(n,r),{redirectUrl:"javascript:void 0"})},{urls:["*://*/*.user.js","*://*/*.user.js?*","file://*/*.user.js","file://*/*.user.js?*",`${_}*.user.js`],types:["main_frame"]},["blocking"]),browser.tabs.onRemoved.addListener(e=>{Or(e)});const Lr=s.createElement("textarea");let Ar;r.assign(C,{SetClipboard(e){Ar=e,Lr.focus(),s.execCommand("copy",!1,null)}}),s.body.appendChild(Lr),s.addEventListener("copy",e=>{e.preventDefault();const{type:t,data:n}=Ar;e.clipboardData.setData(t||"text/plain",n)}),O.push(()=>{browser.commands.onCommand.addListener(e=>{if("newScript"===e)C.OpenEditor();else{const t="settings"===e?`#${e}`:"";C.TabOpen({url:`/options/index.html${t}`})}})});const qr=1e3;r.assign(C,{async GetImageData(e){const t=`GetImageData:${e}`;return R.get(t)||R.put(t,ro(e,{base64:!0}).catch(h.u),qr)},SetBadge:Qr});const Pr=(()=>{const{chrome:t}=e,n=t.browserAction,o=()=>t.runtime.lastError,s=e=>(...t)=>{try{l(e,n,...t,o)}catch(r){l(e,n,...t)}};return r(m.i)(n,["setIcon","setBadgeText","setBadgeBackgroundColor","setTitle"],e=>e?s(e):h.u)})(),Nr={},zr="isApplied",Hr="showBadge",Wr="badgeColor",Fr="badgeColorBlocked";let Vr,Br,Gr,Kr,Jr,Xr;const Zr=!u&&{};function Qr(e,{tab:t,frameId:n}){const o=t.id,s=Nr[o]||{};s.idMap&&0!==n||(s.total=0,s.unique=0,s.idMap={},Nr[o]=s),s.total+=e.length,e&&(e.forEach(e=>{s.idMap[e]=1}),s.unique=r.keys(s.idMap).length),eo(t,s),Yr(t,s)}function Yr(e,t=Nr[e.id]){t&&Pr.setBadgeText({text:`${t[Br]||""}`,tabId:e.id})}function eo(e,t=Nr[e.id]){t&&Pr.setBadgeBackgroundColor({color:t.blocked?Kr:Gr,tabId:e.id})}function to(e,t=e.pendingUrl||e.url){const n=e.id,r=f.d.test(t),o=(r?Re(t):void 0)&&Jr||!r&&Xr||"";if(o||(Nr[n]||{}).blocked){Pr.setTitle({title:o,tabId:n});const t=o?{blocked:!0}:{};Nr[n]=t,no(e,t),Yr(e,t)}}async function no(e={},t={}){const n=(t.blocked?"b":!Vr&&"w")||"",r={};for(const e of[16,19,32,38]){const t=`/public/images/icon${e}${n}.png`;let o=Zr?Zr[t]:t;o||(o=await ro(t),Zr[t]=o),r[e]=o}Pr.setIcon({tabId:e.id,[Zr?"imageData":"path"]:r})}function ro(e,{base64:t}={}){return new o((n,r)=>{const o=new Image;o.src=e,o.onload=()=>{const{width:r,height:i}=o;if(!r)return void n(e);const a=s.createElement("canvas"),c=a.getContext("2d");a.width=r,a.height=i,c.drawImage(o,0,0,r,i),n(t?a.toDataURL():c.getImageData(0,0,r,i))},o.onerror=r})}V(e=>{let t;const n=[];null!=(t=e[zr])&&(Vr=t,no(),n.push(no)),null!=(t=e[Hr])&&(Br=t,n.push(Yr)),((t=e[Wr])&&(Gr=t)||(t=e[Fr])&&(Kr=t))&&n.push(eo),"blacklist"in e&&n.push(to),n.length&&I(e=>n.forEach(t=>t(e)))}),O.push(()=>{Vr=H(zr),Br=H(Hr),Gr=H(Wr),Kr=H(Fr),Jr=r(h.p)("failureReasonBlacklisted"),Xr=r(h.p)("failureReasonNoninjectable"),I(to),Vr||no()}),browser.tabs.onRemoved.addListener(e=>{delete Nr[e]}),browser.tabs.onUpdated.addListener((e,t,n)=>{const{url:r}=t;("loading"===t.status||t.favIconUrl&&n.url.startsWith("about:"))&&to(n,r)});const oo={};r.assign(C,{async Notification(e,t,n){const o=await browser.notifications.create({type:"basic",title:e.title||(u?r(h.p)("extName"):""),message:e.text,iconUrl:e.image||h.e});return oo[o]=(null==n?void 0:n.onClick)||t.tab.id,o},RemoveNotification:e=>browser.notifications.clear(e)}),browser.notifications.onClicked.addListener(e=>{const t=oo[e];t>=0&&r(h.z)(t,"NotificationClick",e),"function"==typeof t&&t()}),browser.notifications.onClosed.addListener(e=>{const t=oo[e];delete oo[e],t>=0&&r(h.z)(t,"NotificationClose",e)});const so={};function io(e){return 0===e?"firefox-default":e>0&&`firefox-container-${e}`}async function ao(e){const t=[],n=await o.all(e.map(e=>lo(e,t)));return 1===t.length?fo(t[0]):t.length&&fo({text:t.map(e=>e.text).join("\n"),onClick:browser.runtime.openOptionsPage}),n}r.assign(C,{async OpenEditor(e){if(!e){const{tab:t,domain:n}=await C.GetTabDomain(),r=n&&C.CacheNewScript({url:(t.pendingUrl||t.url).split(/[#?]/)[0],name:`${H("scriptTemplateEdited")?"":"- "}${n}`});e=`_new${r?`/${r}`:""}`}const t=`${_}options/index.html#scripts/${e}`;for(const e of browser.extension.getViews())if(e.location.href===t){const t=r(m.a)(await e.browser.tabs.getCurrent());return browser.tabs.update(t.id,{active:!0}),browser.windows.update(t.windowId,{focused:!0}),t}return C.TabOpen({url:t,maybeInWindow:!0})},async TabOpen({url:e,active:t=!0,container:n,insert:o=!0,maybeInWindow:s=!1,pinned:i},a={}){const c=a.tab||await r(h.k)()||{},l=a.url,d=!l||l.startsWith(_),{incognito:p,windowId:f}=c;let m=c.cookieStoreId;m&&!p&&(m=io(d?0:n)||m),m&&(m={cookieStoreId:m}),/^[-\w]+:/.test(e)||(e=d?browser.runtime.getURL(e):r(h.l)(e,l));const g=!p||u||!/^(chrome[-\w]*):/.test(e);let w;if(s&&browser.windows&&H("editorWindow")&&(!m||dn.a.firefox>=64)){const n=J()({url:e,incognito:g&&p},H("editorWindowSimple")&&{type:"popup"},{},!u&&{focused:!!t},{},m),r=H("editorWindowPos"),o=r&&"top"in r;w=(await browser.windows.create(J()({},n,{},r)).catch(o&&h.u)||o&&await browser.windows.create(n)).tabs[0]}w||(w=await browser.tabs.create(J()({url:e,active:!!t,pinned:!!i},m,{},g&&J()({windowId:f},o&&{index:c.index+1},{},dn.a.openerTabIdSupported&&{openerTabId:c.id}))));const{id:v}=w;return t&&w.windowId!==f&&await browser.windows.update(w.windowId,{focused:!0}),so[v]=c.id,d?w:{id:v}},TabClose({id:e}={},t){var n;const r=e||(null==t||null==(n=t.tab)?void 0:n.id);r>=0&&browser.tabs.remove(r)},TabFocus(e,t){browser.tabs.update(t.tab.id,{active:!0}).catch(h.u),browser.windows.update(t.tab.windowId,{focused:!0}).catch(h.u)}}),dn.a.ready.then(()=>{r.defineProperties(dn.a,{openerTabIdSupported:{value:!u||dn.a.firefox>=57&&"android"!==dn.a.os}})}),browser.tabs.onRemoved.addListener(e=>{const t=so[e];t>=0&&(r(h.z)(t,"TabClosed",e),delete so[e])}),r.assign(C,{async CheckUpdate(e){const t=Ne(e);return(await ao([t]))[0]},async CheckUpdateAll(){F("lastUpdate",Date.now());const e=He().filter(e=>e.config.shouldUpdate);return(await ao(e)).includes(!0)}});const co={};function lo(e,t){const{id:n}=e.props;return co[n]||(co[n]=uo(e,t))}async function uo(e,t){const{id:n}=e.props;let o,s,i;try{const{update:a}=await it({id:n,code:await po(e),update:{checking:!1}});return o=r(h.p)("msgScriptUpdated",[r(h.n)(a)]),i={cache:"no-cache"},!0}catch(e){s=e.error,i=!e.error&&!e.checking&&{}}finally{i&&(s=await ct(e,null,i)),ho(e)&&(o||s)&&t.push({script:e,text:l(h.B,[o,s],"\n")}),delete co[n]}}async function po({props:{id:e},meta:t,custom:n}){const o=n.downloadURL||t.downloadURL||n.lastInstallURL,s=n.updateURL||t.updateURL||o;if(!s)throw!1;let i;const a={},c={update:a,where:{id:e}};l(r(h.p)("msgCheckingForUpdate"));try{const{data:e}=await r(h.w)(s,{cache:"no-cache",headers:{Accept:"text/x-userscript-meta,*/*"}}),{version:n}=oe(e);if(r(h.c)(t.version,n)>=0)l(r(h.p)("msgNoUpdate"),{checking:!1});else{if(o)return l(r(h.p)("msgUpdating")),i=r(h.p)("msgErrorFetchingScript"),(await r(h.w)(o,{cache:"no-cache"})).data;l(r(h.p)("msgNewVersion"),{checking:!1})}}catch(e){l(i||r(h.p)("msgErrorFetchingUpdateInfo"),{error:e})}throw a;function l(e,{error:t,checking:n=!t}={}){r.assign(a,{message:e,checking:n,error:t?`${r(h.p)("genericError")} ${t.status}, ${t.url}`:null}),r(h.x)(f.c,c)}}function ho(e){var t;const n=H("notifyUpdates");return H("notifyUpdatesGlobal")?n:null!=(t=e.config.notifyUpdates)?t:n}function fo({script:e,text:t,onClick:n=(()=>C.OpenEditor(e.props.id))}){C.Notification({text:t,title:u?`${r(h.p)("titleScriptUpdated")} - ${r(h.p)("extName")}`:""},void 0,{onClick:n})}V(e=>{"autoUpdate"in e&&vo(),Gn in e&&Xn(e),r(h.x)("UpdateOptions",e)}),r.assign(C,{async GetData(e){const t=await et(e);return t.sync=It(),t},async GetInjected({url:e,forceContent:t},n){const{frameId:r,tab:o}=n,s=o.id;e||(e=n.url||o.url),r||(er(s),Or(s));const i=await _n(e,s,r,t),{feedback:a,inject:c,valOpIds:l}=i;return c.isPopupShown=an[s],a.length&&setTimeout(C.InjectionFeedback,0,{feedback:a},n),tr(s,r,l),c},async GetTabDomain(){const e=await r(h.k)()||{},t=(e.pendingUrl||e.url||"").match(/^https?:\/\/([^/]+)|$/)[1];return{tab:e,domain:t&&x(t)||t}},SetTimeout:e=>e>0&&r(h.t)(e)});const mo=["MarkRemoved","Move","ParseScript","RemoveScript","UpdateScriptInfo"],go=["CheckRemove","CheckUpdate","CheckUpdateAll"];async function wo(e,t){var n;const{cmd:r}=e,o=await(null==(n=C[r])?void 0:n.call(C,e.data,t));return(mo.includes(r)||o&&go.includes(r))&&Pt(),null!=o?o:null}function vo(){const e=(+H("autoUpdate")||0)*f.j;if(!e)return;let t=Date.now()-H("lastUpdate");t>=e&&(wo({cmd:"CheckUpdateAll"}),t=0),clearTimeout(vo.timer),vo.timer=setTimeout(vo,Math.min(f.l,e-t))}async function yo(){const{data:e}=await r(h.w)(f.a,{cache:"no-cache",headers:{Accept:"text/x-userscript-meta,*/*"}}),t=await C.ParseScript({url:f.a,code:e,custom:{buildIn:!0}});if(Pt(),1!==t.where.id)throw`wrong id: ${t.where.id}`}M(()=>{e.handleCommandMessage=wo,e.deepCopy=m.a,browser.runtime.onMessage.addListener(u?(...e)=>wo(...e).catch(e=>o.reject(e instanceof n?e:new n(e))):wo),yo(),setTimeout(vo,2e4),At(),nt(),setInterval(nt,f.j);const t=e.chrome.declarativeContent;t&&t.onPageChanged.getRules(async([e])=>{const n=null==e?void 0:e.id,r="Violentmonkey:5oPsP/mAXlM=";n!==r&&(n&&await browser.declarativeContent.onPageChanged.removeRules([n]),t.onPageChanged.addRules([{id:r,conditions:[new t.PageStateMatcher({pageUrl:{urlContains:"://"}})],actions:[new t.RequestContentScript({js:browser.runtime.getManifest().content_scripts[0].js})]}]))})})},65:function(e,t,n){"use strict";var o=n(66),s=n(68);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=x,t.resolve=S,t.resolveObject=C,t.format=k,t.Url=i;var a=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),p=["%","/","?",";","#"].concat(d),h=["/","?","#"],f=255,m=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(69);function x(e,t,n){if(e&&s.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}function k(e){return s.isString(e)&&(e=x(e)),e instanceof i?e.format():i.prototype.format.call(e)}function S(e,t){return x(e,!1,!0).resolve(t)}function C(e,t){return e?x(e,!1,!0).resolveObject(t):t}i.prototype.parse=function(e,t,n){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",c=e.split(i),u=/\\/g;c[0]=c[0].replace(u,"/");var x=e=c.join(i);if(x=x.trim(),!n&&1===e.split("#").length){var k=l.exec(x);if(k)return this.path=x,this.href=x,this.pathname=k[1],k[2]?(this.search=k[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=a.exec(x);if(S){var C=(S=S[0]).toLowerCase();this.protocol=C,x=x.substr(S.length)}if(n||S||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var $="//"===x.substr(0,2);!$||S&&v[S]||(x=x.substr(2),this.slashes=!0)}if(!v[S]&&($||S&&!y[S])){for(var I,U,R=-1,j=0;j<h.length;j++)-1!==(T=x.indexOf(h[j]))&&(-1===R||T<R)&&(R=T);for(-1!==(U=-1===R?x.lastIndexOf("@"):x.lastIndexOf("@",R))&&(I=x.slice(0,U),x=x.slice(U+1),this.auth=decodeURIComponent(I)),R=-1,j=0;j<p.length;j++){var T;-1!==(T=x.indexOf(p[j]))&&(-1===R||T<R)&&(R=T)}-1===R&&(R=x.length),this.host=x.slice(0,R),x=x.slice(R),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var D=this.hostname.split(/\./),O=(j=0,D.length);j<O;j++){var M=D[j];if(M&&!M.match(m)){for(var E="",L=0,A=M.length;L<A;L++)M.charCodeAt(L)>127?E+="x":E+=M[L];if(!E.match(m)){var q=D.slice(0,j),P=D.slice(j+1),N=M.match(g);N&&(q.push(N[1]),P.unshift(N[2])),P.length&&(x="/"+P.join(".")+x),this.hostname=q.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=o.toASCII(this.hostname));var z=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+z,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!w[C])for(j=0,O=d.length;j<O;j++){var W=d[j];if(-1!==x.indexOf(W)){var F=encodeURIComponent(W);F===W&&(F=escape(W)),x=x.split(W).join(F)}}var V=x.indexOf("#");-1!==V&&(this.hash=x.substr(V),x=x.slice(0,V));var B=x.indexOf("?");if(-1!==B?(this.search=x.substr(B),this.query=x.substr(B+1),t&&(this.query=b.parse(this.query)),x=x.slice(0,B)):t&&(this.search="",this.query={}),x&&(this.pathname=x),y[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var G=this.search||"";this.path=z+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",o=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&r.keys(this.query).length&&(a=b.stringify(this.query));var c=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),o&&"#"!==o.charAt(0)&&(o="#"+o),c&&"?"!==c.charAt(0)&&(c="?"+c),t+i+(n=n.replace(/[?#]/g,e=>encodeURIComponent(e)))+(c=c.replace("#","%23"))+o},i.prototype.resolve=function(e){return this.resolveObject(x(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(s.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,o=r.keys(this),a=0;a<o.length;a++){var c=o[a];n[c]=this[c]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=r.keys(e),u=0;u<l.length;u++){var d=l[u];"protocol"!==d&&(n[d]=e[d])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var p=r.keys(e),h=0;h<p.length;h++){var f=p[h];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",w=n.search||"";n.path=g+w}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=x||b||n.host&&e.pathname,S=k,C=n.pathname&&n.pathname.split("/")||[],$=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if($&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),k=k&&(""===m[0]||""===C[0])),x)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=m;else if(m.length)C||(C=[]),C.pop(),C=C.concat(m),n.search=e.search,n.query=e.query;else if(!s.isNullOrUndefined(e.search))return $&&(n.hostname=n.host=C.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=e.search,n.query=e.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var I=C.slice(-1)[0],U=(n.host||e.host||C.length>1)&&("."===I||".."===I)||""===I,R=0,j=C.length;j>=0;j--)"."===(I=C[j])?C.splice(j,1):".."===I?(C.splice(j,1),R++):R&&(C.splice(j,1),R--);if(!k&&!S)for(;R--;R)C.unshift("..");!k||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),U&&"/"!==C.join("/").substr(-1)&&C.push("");var T,_=""===C[0]||C[0]&&"/"===C[0].charAt(0);return $&&(n.hostname=n.host=_?"":C.length?C.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(k=k||n.host&&C.length)&&!_&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=c.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},66:function(t,n,r){(t=>{var o;(s=>{n&&n.nodeType,t&&t.nodeType;var i="object"==typeof e&&e;i.global!==i&&i.window!==i&&i.self;var a,c=2147483647,l=36,u=1,d=26,p=38,h=700,f=72,m=128,g="-",w=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-u,k=Math.floor,S=String.fromCharCode;function C(e){throw new RangeError(b[e])}function $(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function I(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+$((e=e.replace(y,".")).split("."),t).join(".")}function U(e){for(var t,n,r=[],o=0,s=e.length;o<s;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function R(e){return $(e,e=>{var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+S(e)}).join("")}function j(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l}function T(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?k(e/h):e>>1,e+=k(e/t);e>x*d>>1;r+=l)e=k(e/x);return k(r+(x+1)*e/(e+p))}function D(e){var t,n,r,o,s,i,a,p,h,w,v=[],y=e.length,b=0,x=m,S=f;for((n=e.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&C("not-basic"),v.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<y;){for(s=b,i=1,a=l;o>=y&&C("invalid-input"),((p=j(e.charCodeAt(o++)))>=l||p>k((c-b)/i))&&C("overflow"),b+=p*i,!(p<(h=a<=S?u:a>=S+d?d:a-S));a+=l)i>k(c/(w=l-h))&&C("overflow"),i*=w;S=_(b-s,t=v.length+1,0==s),k(b/t)>c-x&&C("overflow"),x+=k(b/t),b%=t,v.splice(b++,0,x)}return R(v)}function O(e){var t,n,r,o,s,i,a,p,h,w,v,y,b,x,$,I=[];for(y=(e=U(e)).length,t=m,n=0,s=f,i=0;i<y;++i)(v=e[i])<128&&I.push(S(v));for(r=o=I.length,o&&I.push(g);r<y;){for(a=c,i=0;i<y;++i)(v=e[i])>=t&&v<a&&(a=v);for(a-t>k((c-n)/(b=r+1))&&C("overflow"),n+=(a-t)*b,t=a,i=0;i<y;++i)if((v=e[i])<t&&++n>c&&C("overflow"),v==t){for(p=n,h=l;!(p<(w=h<=s?u:h>=s+d?d:h-s));h+=l)$=p-w,x=l-w,I.push(S(T(w+$%x,0))),p=k($/x);I.push(S(T(p,0))),s=_(n,b,r==o),n=0,++r}++n,++t}return I.join("")}function M(e){return I(e,e=>w.test(e)?D(e.slice(4).toLowerCase()):e)}function E(e){return I(e,e=>v.test(e)?"xn--"+O(e):e)}a={version:"1.4.1",ucs2:{decode:U,encode:R},decode:D,encode:O,toASCII:E,toUnicode:M},void 0===(o=(()=>a).call(n,r,n,t))||(t.exports=o)})()}).call(this,r(67)(t))},67:(e,t)=>{e.exports=e=>(e.webpackPolyfill||(e.deprecate=()=>{},e.paths=[],e.children||(e.children=[]),r.defineProperty(e,"loaded",{enumerable:!0,get:()=>e.l}),r.defineProperty(e,"id",{enumerable:!0,get:()=>e.i}),e.webpackPolyfill=1),e)},68:(e,t,n)=>{"use strict";e.exports={isString:e=>"string"==typeof e,isObject:e=>"object"==typeof e&&null!==e,isNull:e=>null===e,isNullOrUndefined:e=>null==e}},69:(e,t,n)=>{"use strict";t.decode=t.parse=n(70),t.encode=t.stringify=n(71)},70:(e,t,n)=>{"use strict";function o(e,t){return r.prototype.hasOwnProperty.call(e,t)}e.exports=(e,t,n,r)=>{t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var c=1e3;r&&"number"==typeof r.maxKeys&&(c=r.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,p,h,f,m=e[u].replace(a,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),o(i,h)?s(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i};var s=Array.isArray||(e=>"[object Array]"===r.prototype.toString.call(e))},71:(e,t,n)=>{"use strict";var o=e=>{switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=(e,t,n,r)=>(t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),r=>{var a=encodeURIComponent(o(r))+n;return s(e[r])?i(e[r],e=>a+encodeURIComponent(o(e))).join(t):a+encodeURIComponent(o(e[r]))}).join(t):r?encodeURIComponent(o(r))+n+encodeURIComponent(o(e)):"");var s=Array.isArray||(e=>"[object Array]"===r.prototype.toString.call(e));function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=r.keys||(e=>{var t=[];for(var n in e)r.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t})}})}