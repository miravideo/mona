{const t=function(){return this||globalThis}(),{Boolean:e,Error:n,Object:s,Promise:a,document:o,window:i}=t,{hasOwnProperty:r,toString:l}={},c=s.call.bind(s.call),d=!t.chrome.app;(t=>{function e(e){for(var a,i,l=e[0],c=e[1],d=e[2],p=0,h=[];p<l.length;p++)i=l[p],s.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in c)s.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(u&&u(e);h.length;)h.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(s=!1)}s&&(r.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},o={5:0},r=[];function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=a,l.d=(t,e,n)=>{l.o(t,e)||s.defineProperty(t,e,{enumerable:!0,get:n})},l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&s.defineProperty(t,Symbol.toStringTag,{value:"Module"}),s.defineProperty(t,"__esModule",{value:!0})},l.t=(t,e)=>{if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=s.create(null);if(l.r(n),s.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,(e=>t[e]).bind(null,a));return n},l.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return l.d(e,"a",e),e},l.o=(t,e)=>s.prototype.hasOwnProperty.call(t,e),l.p="";var c=i.webpackJsonp=i.webpackJsonp||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var p=0;p<c.length;p++)e(c[p]);var u=d;r.push([174,1,2,0]),n()})(Array(33).concat([(t,e,n)=>{var s=n(147);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("65eb5497",s,!0,{})},(t,e,n)=>{var s=n(149);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("67121510",s,!0,{})},(t,e,n)=>{var s=n(151);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("9be4d3d0",s,!0,{})},(t,e,n)=>{var s=n(153);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("22b3a990",s,!0,{})},(t,e,n)=>{var s=n(155);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("8950f020",s,!0,{})},(t,e,n)=>{var s=n(157);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("5b715712",s,!0,{})},(t,e,n)=>{var s=n(159);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("25852b5a",s,!0,{})},(t,e,n)=>{var s=n(161);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("1a6495f1",s,!0,{})},(t,e,n)=>{var s=n(163);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("2629ca3f",s,!0,{})},(t,e,n)=>{var s=n(165);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("2aa989e3",s,!0,{})},(t,e,n)=>{var s=n(167);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("75912501",s,!0,{})},(t,e,n)=>{var s=n(169);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("bdbb32d2",s,!0,{})},(t,e,n)=>{var s=n(171);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("6e158366",s,!0,{})},,,,,,,,,,,,,,,,(t,e,n)=>{t.exports=n(142),n(143)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,n,s){"use strict";function a(t,e,n,s,a,o,i,r,l,c){"boolean"!=typeof i&&(l=r,r=i,i=!1);const d="function"==typeof n?n.options:n;let p;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),s&&(d._scopeId=s),o?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=p):e&&(p=i?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),p)if(d.functional){const t=d.render;d.render=(e,n)=>(p.call(n),t(e,n))}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,p):[p]}return n}const i=a({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vl-dropdown",class:"vl-dropdown-"+t.align+" vl-dropdown-"+t.direction,on:{mouseup:t.onMouseUp}},[n("div",{staticClass:"vl-dropdown-toggle",on:{click:t.onToggle,focus:t.onFocus,blur:t.onBlur}},[t._t("toggle")],2),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"vl-dropdown-menu",on:{mousedown:t=>{t.stopPropagation()}}},[t._t("default")],2)])},staticRenderFns:[]},void 0,{props:{closeAfterClick:{type:e,default:!1},toggleOnOnly:{type:e,default:!1},focusOpen:{type:e,default:!1},align:{type:String,default:"left"},direction:{type:String,default:"down"}},data:()=>({active:!1}),watch:{active(t,e){t!==e&&(t?o.addEventListener("mousedown",this.onClose,!1):o.removeEventListener("mousedown",this.onClose,!1),this.$emit("stateChange",t))}},methods:{onToggle(){this.active=!this.active},onOpen(){this.active=!0},onClose(){this.active=!1},onFocus(){this.focusOpen&&this.onOpen()},onBlur(){const{activeElement:t}=o;t===o.body||this.$el.contains(t)||this.onClose()},onMouseUp(){this.closeAfterClick&&this.onClose()}}},void 0,!1,void 0,!1,void 0,void 0,void 0);i.install=t=>{t.component("vl-dropdown",i)},t.exports=i},(t,e,n)=>{n(144)},(t,e,n)=>{var s=n(145);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),(0,n(12).default)("25a399c0",s,!0,{})},(t,e,n)=>{(e=n(11)(!1)).push([t.i,".vl-dropdown{position:relative;display:inline-block}.vl-dropdown-toggle{cursor:pointer}.vl-dropdown-menu{position:absolute;z-index:10}.vl-dropdown-right .vl-dropdown-menu{right:0}.vl-dropdown-down .vl-dropdown-menu{top:100%;margin-top:5px}.vl-dropdown-up .vl-dropdown-menu{bottom:100%;margin-bottom:5px}",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(33);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,'.dragging {\n  /* using both classes to override normal .script regardless of bundling order*/\n}\n.dragging.script {\n    position: fixed;\n    top: 0;\n    left: 0;\n    margin: 0;\n    z-index: 9;\n    transition: none;\n    pointer-events: none;\n    background-color: hsl(34, 75%, 93%)\n}\n@media (prefers-color-scheme: dark) {\n.dragging.script {\n      background: hsl(34, 15%, 15%)\n}\n}\n.dragging.script.disabled {\n      background-color: hsl(34, 30%, 88%)\n}\n@media (prefers-color-scheme: dark) {\n.dragging.script.disabled {\n        background: hsl(34, 10%, 12%)\n}\n}\n.dragging-noscroll {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: "";\n    touch-action: none;\n}\n.dragging-placeholder {\n    visibility: hidden;\n}\n\n/* The icon should use the real size we generate in `dist` to ensure crispness*/\n.script {\n  position: relative;\n  margin: 8px 0 0 8px;\n  padding: 12px 10px 5px;\n  border: 1px solid var(--fill-3);\n  border-radius: .3rem;\n  transition: transform .25s\n  /* added in Chrome 41, FF64*/\n}\n@media (pointer: coarse) {\n.script {\n    transition: none\n}\n}\n\n/* fallback for pre-FF64*/\n.touch .script {\n    transition: none;\n}\n@media (prefers-reduced-motion: reduce) {\n.script {\n    transition: none\n}\n}\n.script {\n  background: var(--bg);\n  width: calc((100% - 8px)/var(--num-columns) - 8px);\n  height: 70px\n}\n.script:hover {\n    border-color: var(--fill-5);\n}\n.script .secondary {\n    color: var(--fill-8);\n    font-size: small;\n}\n.script.disabled,\n  .script.removed {\n    background: var(--fill-1);\n    color: var(--fill-6);\n}\n.script.disabled .secondary {\n      color: var(--fill-5);\n}\n.script.removed {\n    height: 54px;\n    padding-bottom: 10px;\n}\n.script.removed .secondary {\n      display: none;\n}\n.script.focused {\n    /* bring the focused item to the front so that the box-shadow will not be overlapped*/\n    /* by the next item*/\n    z-index: 1;\n    box-shadow: 1px 2px 9px var(--fill-7)\n}\n.script.focused:focus {\n      box-shadow: 1px 2px 9px var(--fill-9);\n}\n.script.error {\n    border-color: rgba(255,0,0,0.53333);\n}\n.script.error [*|href="#refresh"] {\n      fill: #f00;\n}\n.script.error .script-message {\n      color: #f00;\n}\n.script-buttons {\n    line-height: 1;\n    color: hsl(215, 13%, 28%)\n}\n@media (prefers-color-scheme: dark) {\n.script-buttons {\n      color: hsl(215, 10%, 55%)\n}\n}\n.script-buttons > .flex {\n      align-items: center;\n}\n.removed .script-buttons {\n      display: none;\n}\n.script-buttons .disabled {\n      color: var(--fill-2);\n}\n.script-buttons .disabled [data-hotkey]::after {\n        content: none;\n}\n.script-buttons .icon {\n      display: block;\n}\n.script-info {\n    line-height: 1.5;\n    align-items: center;\n}\n.script-icon {\n    width: 38px;\n    height: 38px;\n    float: left;\n    cursor: pointer;\n}\n.script-icon a {\n      display: block;\n}\n.script-icon img {\n      display: block;\n      width: 100%;\n      height: 100%\n}\n.script-icon img:not([src]) {\n        visibility: hidden; /* hiding the empty outline border while the image loads*/\n}\n.disabled .script-icon img, .removed .script-icon img {\n        filter: grayscale(.8);\n        opacity: .5;\n}\n.removed .script-icon {\n      width: 32px;\n      height: 32px;\n}\n.script-name {\n    font-weight: 500;\n    font-size: 14px;\n}\n.disabled .script-name {\n      color: var(--fill-8);\n}\n.script-author {\n    display: flex;\n    align-items: center;\n    max-width: 30%;\n}\n.script-author > .ellipsis {\n      display: inline-block;\n      max-width: 100px;\n}\n.script-message {\n    white-space: nowrap;\n}\n.hotkeys [data-hotkey] {\n  position: relative\n}\n.hotkeys [data-hotkey]::after {\n    content: attr(data-hotkey);\n    position: absolute;\n    left: 50%;\n    bottom: 80%;\n    transform-origin: bottom;\n    transform: translate(-50%,0);\n    padding: .2em;\n    background: #fe6;\n    color: #333;\n    border: 1px solid #880;\n    border-radius: .2em;\n    font: .8rem monospace; /* monospace usually provides differentiation between l and I, 0 and O*/\n    line-height: 1;\n}\n.scripts {\n  display: flex;\n  flex-wrap: wrap;\n  align-content: flex-start;\n  padding: 0 0 8px 0\n}\n.scripts[data-table][data-columns="1"] .script,\n    .scripts[data-table][data-columns="2"] .script:nth-child(odd),\n    .scripts[data-table][data-columns="3"] .script:nth-child(3n + 1),\n    .scripts[data-table][data-columns="4"] .script:nth-child(4n + 1) {\n      border-left: none;\n      margin-left: 0;\n}\n.scripts[data-table][data-columns="1"] .script:nth-child(even), .scripts[data-table][data-columns="3"] .script:nth-child(even) {\n        background-color: var(--fill-0-5);\n}\n.scripts[data-table][data-columns="2"] .script:nth-child(4n + 2),\n      .scripts[data-table][data-columns="2"] .script:nth-child(4n + 3) {\n        background-color: var(--fill-0-5);\n}\n.scripts[data-table][data-columns="4"] .script:nth-child(8n + 2),\n      .scripts[data-table][data-columns="4"] .script:nth-child(8n + 4),\n      .scripts[data-table][data-columns="4"] .script:nth-child(8n + 5),\n      .scripts[data-table][data-columns="4"] .script:nth-child(8n + 7) {\n        background-color: var(--fill-0-5);\n}\n.scripts[data-table] .script {\n      display: flex;\n      align-items: center;\n      height: 2.5rem;\n      /* --num-columns is set in tab-installed.vue*/\n      width: calc((100% - 8px*(var(--num-columns) - 1))/var(--num-columns));\n      margin: -1px 0 0 8px;\n      padding: 0 16px 0 8px;\n      border-radius: 0;\n      background: none\n}\n.scripts[data-table] .script:hover::after {\n        /* using a separate element with z-index higher than a sibling\'s overlapped border*/\n        content: \'\';\n        position: absolute;\n        top: -1px;\n        left: -1px;\n        right: -1px;\n        bottom: -1px;\n        border: 1px solid var(--fill-6);\n        pointer-events: none;\n        z-index: 2;\n}\n.scripts[data-table] .script-name {\n        cursor: pointer;\n}\n.scripts[data-table] .script-icon {\n        width: 2rem;\n        height: 2rem;\n        order: 1;\n        margin-left: .5rem;\n}\n.scripts[data-table] .script-info {\n        order: 2;\n        flex: 1;\n        margin-left: .5rem;\n        line-height: 1.2;\n}\n\n/* not using 1.1 as it cuts descender in "g" */\n.scripts[data-table] .script-info .updated, .scripts[data-table] .script-info .version {\n          width: 6em;\n          text-align: right;\n          color: var(--fill-8);\n}\n.scripts[data-table] .script-info .updated {\n          width: 3em;\n}\n.scripts[data-table] .script-buttons {\n        margin: 0;\n        min-width: 14rem;\n}\n.scripts[data-table] .script-buttons > .flex {\n          width: auto;\n}\n.scripts[data-table] .script-buttons > .flex > :first-child { /* edit button */\n            display: none;\n}\n.scripts[data-table] .script-author > .ellipsis {\n        max-width: 15vw;\n}\n.scripts[data-table] .script-message:not(:empty) {\n        position: absolute;\n        right: .5em;\n        top: 2em;\n        z-index: 3;\n        font-size: smaller;\n        padding: 1px .5em;\n        border-radius: .5em;\n        border: 1px solid var(--fill-5);\n        background: var(--bg);\n}\n.scripts:not([data-table]) [data-hotkey-table]::after {\n      content: none;\n}\n.scripts[data-show-order] .script-order::after {\n    content: \'. \';\n}\n.scripts:not([data-show-order]) .script-order {\n    display: none;\n}\n',""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(34);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.edit-settings.edit-body { /* using 2 classes to ensure we override .edit-body in index.vue*/\n    column-width: 50em;\n    grid-column-gap: 4em;\n    column-gap: 4em;\n    padding-left: 4em;\n    padding-right: 4em;\n}\n.edit-settings h4 {\n    margin: 2em 0 1em;\n}\n.edit-settings .form-group {\n    display: flex;\n    position: relative;\n    margin-bottom: .5em;\n    break-inside: avoid-column;\n    align-items: center;\n}\n.edit-settings .form-group input[type=checkbox] + span {\n      -moz-user-select: none;\n           user-select: none;\n}\n.edit-settings .form-group input[type=text] {\n      display: block;\n      width: 100%;\n}\n.edit-settings .form-group:not(.condensed) > :nth-child(1) {\n        display: flex;\n        flex: 0 0 11em;\n        flex-direction: column;\n}\n.edit-settings .form-group:not(.condensed) > :nth-child(2):not(select) {\n        flex-grow: 1;\n}\n.edit-settings .form-group.fit-width {\n      display: block;\n      width: -moz-fit-content;\n      width: fit-content;\n}\n.edit-settings .form-group.fit-width > :nth-child(1) {\n        display: inline-block;\n        width: 11em;\n}\n.edit-settings label[focus-within] span {\n    text-decoration: underline;\n}\n.edit-settings label:focus-within span {\n    text-decoration: underline;\n}\n.mr-tooltip {\n  margin-right: 6em;\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(35);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.edit-values-row {\n    border: 1px solid var(--fill-2);\n    cursor: pointer\n}\n.edit-values-row:first-child {\n      padding: 8px 6px;\n}\n.edit-values-row:not(:first-child) {\n      border-top: 0;\n}\n.edit-values-row > * {\n      font-size: 12px;\n      padding: 4px 6px\n}\n.edit-values-row > *:first-child {\n        position: relative;\n        flex: 0 0 30%;\n        max-width: 240px;\n}\n.edit-values-row > *:not(:first-child) {\n        border-left: 1px solid var(--fill-2);\n}\n.edit-values-row pre {\n      width: 5em;\n      text-align: right;\n}\n.edit-values-row:focus,\n    .edit-values-row:hover {\n      background-color: var(--fill-0-5);\n}\n.edit-values-row:focus a, .edit-values-row:hover a {\n        text-decoration: underline;\n}\n.edit-values-row:focus {\n      text-decoration: underline;\n}\n.edit-values-row:focus .edit-values-btn,\n    .edit-values-row:hover .edit-values-btn {\n      display: block;\n}\n.edit-values-empty {\n    color: var(--fill-7);\n}\n.edit-values-panel {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 50%;\n    height: 100%;\n    padding: 8px;\n    box-shadow: -5px 0 5px var(--fill-2);\n    background: var(--bg);\n    z-index: 10\n}\n@media (max-width: 767px) {\n.edit-values-panel {\n      width: 100%\n}\n}\n.edit-values-panel .control {\n      display: flex;\n      align-items: center;\n}\n.edit-values-panel .control h4 {\n        flex: auto;\n        width: 0;\n}\n.edit-values-panel input {\n      width: 100%;\n}\n.edit-values-panel label {\n      display: flex;\n      flex-direction: column\n}\n.edit-values-panel label:last-child,\n      .edit-values-panel label:last-child textarea {\n        flex: auto;\n        height: 0;\n}\n.edit-values-panel label > textarea, .edit-values-panel label input {\n        margin: .25em 0;\n        padding: .25em;\n}\n.edit-values-panel textarea {\n      width: 100%;\n      word-break: break-all;\n      resize: none;\n}\n.edit-values-btn {\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 4px;\n    background: inherit;\n    box-shadow: 0 0 5px 5px var(--fill-0-5);\n    display: none;\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(36);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.edit-help h3 {\n    margin: .5em 0;\n}\n.edit-help .keyboard {\n    column-width: 25em;\n}\n.edit-help .keyboard h3 {\n      column-span: all;\n}\n.edit-help .keyboard dl {\n      display: flex;\n      align-items: center;\n      padding: .25em 0;\n}\n.edit-help .keyboard dt {\n      text-align: right;\n      padding-right: .5em;\n      flex: 0 40%;\n      font-weight: bold;\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(37);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.edit {\n  z-index: 2000;\n}\n.edit-header {\n    align-items: center;\n    justify-content: space-between;\n    border-bottom: 1px solid var(--fill-3);\n}\n.edit-name {\n    font-weight: bold;\n}\n.edit-body {\n    padding: .5rem 1rem;\n    overflow: auto;\n    background: var(--bg);\n}\n.edit-nav-item {\n    display: inline-block;\n    padding: 8px 16px;\n    cursor: pointer\n}\n.edit-nav-item.active {\n      background: var(--bg);\n      box-shadow: 0 -1px 1px var(--fill-7);\n}\n.edit-nav-item:not(.active):hover {\n      background: var(--fill-0-5);\n      box-shadow: 0 -1px 1px var(--fill-4);\n}\n.edit .edit-externals {\n    --border: 0;\n}\n.edit .edit-externals .select {\n      padding-top: 0.5em\n}\n@media (max-width: 1599px) {\n.edit .edit-externals .select {\n        resize: vertical\n}\n.edit .edit-externals .select[style*=height] {\n          max-height: 80%;\n}\n.edit .edit-externals .select[style*=width] {\n          width: auto !important;\n}\n}\n@media (min-width: 1600px) {\n.edit .edit-externals {\n      flex-direction: row;\n}\n.edit .edit-externals .select {\n        resize: horizontal;\n        min-width: 15em;\n        width: 30%;\n        max-height: none;\n        border-bottom: none\n}\n.edit .edit-externals .select[style*=height] {\n          height: auto !important;\n}\n.edit .edit-externals .select[style*=width] {\n          max-width: 80%;\n}\n}\n@media (max-width: 767px) {\n.edit-hint {\n    display: none;\n}\n}\n@media (max-width: 500px) {\n.edit-name {\n    display: none;\n}\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(38);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n:root {\n  --columns-cards: 1300, 1900, 2500; /* 1366x768, 1920x1080, 2560x1440*/\n  --columns-table: 1600, 2500, 3400; /* 1680x1050, 2560x1440, 3440x1440*/\n}\n.tab.tab-installed {\n  padding: 0;\n}\n.tab.tab-installed header {\n    height: 4rem;\n    align-items: center;\n    padding: 0 1rem;\n    line-height: 1;\n    border-bottom: 1px solid var(--fill-5);\n}\n.tab.tab-installed .vl-dropdown-menu {\n    white-space: nowrap;\n}\n.tab.tab-installed .vl-dropdown.active .vl-tooltip-wrap {\n    display: none;\n}\n@media (max-width: 500px) { /* same size as `hidden-sm` in #/common/ui/style/style.css*/\n.tab.tab-installed .vl-dropdown-right .vl-dropdown-menu {\n      position: fixed;\n      top: auto;\n      left: 0;\n      right: auto;\n}\n}\n.backdrop {\n  text-align: center;\n  color: var(--fill-8);\n}\n.scripts {\n  overflow-y: auto;\n}\n.backdrop > *,\n.backdrop::after {\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 2rem;\n}\n.backdrop::after {\n  content: ' ';\n  width: 0;\n  height: 100%;\n}\n.mask {\n  background: rgba(0,0,0,.08);\n  /*transition: opacity 1s;*/\n}\n.dropdown-menu-item {\n  display: block;\n  width: 100%;\n  padding: .5rem;\n  text-decoration: none;\n  color: var(--fill-9);\n  cursor: pointer\n}\n.dropdown-menu-item:focus,\n  .dropdown-menu-item:hover {\n    color: inherit;\n    background: var(--fill-0-5);\n}\n.filter-search {\n  height: 2rem;\n}\n.filter-search label {\n    position: relative;\n}\n.filter-search .icon {\n    position: absolute;\n    height: 100%;\n    top: 0;\n    right: .5rem;\n}\n.filter-search input {\n    width: 14rem;\n    max-width: calc(100vw - 16rem);\n    padding-left: .5rem;\n    padding-right: 2rem;\n    height: 100%;\n}\n.filter-search-tooltip {\n    white-space: pre-wrap;\n}\n.filter-sort .vl-dropdown-menu {\n    padding: 1rem;\n}\n.filter-sort .vl-dropdown-menu > :nth-last-child(n + 2) {\n      margin-bottom: .5rem;\n}\n.trash-button {\n  position: relative;\n}\n.trash-button b {\n    position: absolute;\n    font-size: 10px;\n    line-height: 1;\n    text-align: center;\n    left: 0;\n    right: 0;\n    bottom: -4px;\n}\n.trash-button.active b {\n    display: none;\n}\n.trash-hint {\n  line-height: 1.5;\n  color: var(--fill-6);\n  align-items: center;\n  justify-items: center;\n  place-items: center;\n}\n.trash-animate {\n  animation: .5s linear rotate;\n}\n@keyframes rotate {\n0% {\n    transform: scale(1.2) rotate(0);\n}\n100% {\n    transform: scale(1.2) rotate(360deg);\n}\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(39);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,'\nbutton.drop-allowed {\n  background-color: green;\n  color: white;\n}\n.import-report {\n  white-space: pre-wrap;\n  padding-top: 1rem;\n  font-size: 90%;\n  color: #c80\n}\n.import-report:empty {\n    display: none;\n}\n.import-report td {\n    padding: 1px .5em 3px;\n    vertical-align: top; /* in case of super long multiline text*/\n}\n.import-report [data-type="critical"] {\n    color: #fff;\n    background-color: red;\n    font-weight: bold;\n}\n.import-report [data-type="script"] {\n    color: red;\n}\n.import-report [data-type="info"] {\n    color: blue;\n}\n@media (prefers-color-scheme: dark) {\n.import-report {\n    color: #a83;\n}\n.import-report [data-type="info"] {\n      color: #fff;\n}\n}\n',""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(40);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.export .modal-content {\n    width: 13rem;\n}\n.export .icon {\n    width: 16px;\n    height: 16px;\n    fill: var(--fg);\n}\n.export .tpl {\n    max-width: 30em\n}\n.export .tpl[focus-within] ~ [hidden] {\n      display: initial;\n}\n.export .tpl:focus-within ~ [hidden] {\n      display: initial;\n}\n.export .tpl textarea {\n      height: auto;\n      resize: none;\n      white-space: nowrap;\n      overflow: hidden;\n      min-width: 10em;\n}\n.export .tpl button[disabled] { /* Hide a disabled `reset` button*/\n      display: none;\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(41);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.sync-server-url > input {\n    width: 400px;\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(42);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.dim-hint {\n  font-size: .85rem;\n  color: var(--fill-8);\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(43);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,'\n.tab-settings {\n  overflow-y: auto;\n}\n.tab-settings label {\n    display: inline-block;\n}\n.tab-settings label > * {\n      vertical-align: middle;\n}\n.tab-settings label.valign-tb * {\n      vertical-align: text-bottom;\n}\n.tab-settings textarea {\n    height: 10em;\n}\n.tab-settings input[type="number"] {\n    width: 3.5em;\n    padding-left: .25em;\n}\n.show-advanced {\n  margin: 20px 0;\n}\n.show-advanced .rotate {\n    transform: rotate(-90deg);\n}\n',""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(44);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"\n.current {\n  color: green\n}\n@media (prefers-color-scheme: dark) {\n.current {\n    color: greenyellow\n}\n}\n",""]),t.exports=e},(t,e,n)=>{"use strict";var s=n(45);n.n(s).a},(t,e,n)=>{(e=n(11)(!1)).push([t.i,"html,\nbody {\n  height: 100%;\n}\naside {\n  position: relative;\n  z-index: 1000;\n}\n.aside-content {\n  width: 14rem;\n  height: 100%;\n  padding: 4rem 1rem 0;\n  text-align: right;\n  border: solid var(--fill-5);\n  border-width: 0 1px 0 0\n}\n@media (prefers-color-scheme: dark) {\n.aside-content {\n    border-color: var(--fill-3)\n}\n}\n.aside-content {\n  background: var(--fill-0-5);\n}\n.aside-content img {\n    width: 5rem;\n    height: 5rem;\n}\n.aside-menu {\n  border-top: 1px solid var(--fill-4)\n}\n@media (prefers-color-scheme: dark) {\n.aside-menu {\n    border-color: var(--fill-3)\n}\n}\n.aside-menu > a {\n    display: block;\n    padding-top: .6rem;\n    padding-bottom: .6rem;\n    font-size: 1rem;\n    font-weight: 500;\n    color: var(--fill-8)\n}\n.aside-menu > a.active,\n    .aside-menu > a:hover {\n      color: var(--fg);\n}\n.aside-menu [data-num-scripts]::before {\n    content: '(' attr(data-num-scripts) ') ';\n}\n.text-red {\n  color: red;\n}\n.text-right {\n  text-align: right;\n}\nsection {\n  position: relative;\n  margin-top: 2rem;\n  padding: 1.2rem .8rem .8rem;\n  border: none;\n  border-top: 1px solid var(--fill-4)\n}\n@media (prefers-color-scheme: dark) {\nsection {\n    border-color: var(--fill-3)\n}\n}\nsection > h3 {\n    position: absolute;\n    margin: 0;\n    padding: 0 .2rem;\n    top: -.6em;\n    left: .8rem;\n    line-height: 1;\n    background: var(--bg);\n}\nsection > h4 {\n    margin-bottom: .3rem;\n}\nsection > p {\n    margin-bottom: .3rem;\n}\n.tab {\n  position: relative;\n  padding: 1.2rem;\n  overflow-y: auto;\n  background: var(--bg);\n}\n.vl-modal {\n  z-index: 3000;\n}\n.in-out-appear > .modal-content, .in-out-enter > .modal-content, .in-out-leave-active > .modal-content {\n      transform: translateY(-120%);\n}\n.in-out-appear > .vl-modal-backdrop, .in-out-enter > .vl-modal-backdrop, .in-out-leave-active > .vl-modal-backdrop {\n      opacity: 0;\n}\n.in-out-appear-active,\n    .in-out-appear-active > .modal-content,\n    .in-out-enter-active,\n    .in-out-enter-active > .modal-content,\n    .in-out-leave-active,\n    .in-out-leave-active > .modal-content {\n      transition: transform .5s;\n}\n.in-out-appear-active > .vl-modal-backdrop, .in-out-enter-active > .vl-modal-backdrop, .in-out-leave-active > .vl-modal-backdrop {\n      transition: opacity .5s;\n}\n@media (max-width: 767px) {\n.page-options {\n    flex-direction: column;\n}\n.tab {\n    width: auto !important;\n}\n.aside-content {\n    display: flex;\n    width: auto;\n    height: 3rem;\n    padding: 0;\n    border-width: 0 0 1px 0;\n}\n.aside-content img {\n      width: 3rem;\n      height: 3rem;\n      margin: 0 .5rem 0 1.25rem;\n}\n.aside-content h1 {\n      align-self: center;\n      font-size: 1.25rem;\n      margin: 0;\n}\n.aside-menu {\n    display: flex;\n    border: none;\n}\n.aside-menu a {\n      padding: 0 0 0 1.5rem;\n      display: flex;\n      flex-direction: column; /* stretch to full height... */\n      justify-content: center; /* ...and center vertically */\n}\n}\n",""]),t.exports=e},,,function(n,l,p){"use strict";p.r(l),p.d(l,"loadData",()=>Es);var u=p(22),h=(p(26),p(0)),m=p(24),g=p(25),v=p(4),f=(p(51),p(19)),b=p(53);const x={route:f.c,scripts:[],get installedScripts(){return x.scripts.filter(t=>!t.config.removed)},get removedScripts(){return x.scripts.filter(t=>t.config.removed)},HiDPI:b.a,storageSize:0};var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-options flex h-100"},[t.canRenderAside?n("aside",{class:{"show-aside":t.aside}},[n("div",{staticClass:"aside-content"},[n("img",{attrs:{src:"/public/images/icon128.png"}}),n("h1",{staticClass:"hidden-sm",domProps:{textContent:t._s(t.i18n("extName"))}}),n("div",{staticClass:"aside-menu"},t._l(t.tabs,e=>n("a",{key:e.name,class:{active:e===t.current},attrs:{href:"#"+e.name,"data-num-scripts":"scripts"===e.name&&t.store.installedScripts.length||null},domProps:{textContent:t._s(e.label)}})),0)])]):t._e(),n("keep-alive",[n(t.tabComponent,{tag:"component",staticClass:"tab flex-auto"})],1)],1)},w=[],C=p(16),k=p(7),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-installed flex flex-col"},[t.canRenderScripts?n("div",{staticClass:"flex flex-col flex-auto"},[n("header",{staticClass:"flex"},[t.showRecycle?n("div",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("headerRecycleBin")+(t.trash.length?" ("+t.trash.length+")":""))}}):n("div",{staticClass:"flex-auto"},[n("dropdown",{class:{active:t.menuNewActive},attrs:{closeAfterClick:!0},on:{stateChange:t.onStateChange}},[n("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonNew"),placement:"bottom",align:"start"},slot:"toggle"},[n("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"}},[n("icon",{attrs:{name:"plus"}})],1)]),n("a",{staticClass:"dropdown-menu-item",attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("buttonNew"))},on:{click:e=>(e.preventDefault(),t.editScript("_new"))}}),n("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","OpenUserJS"))}}),n("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","GreasyFork"))}}),n("a",{staticClass:"dropdown-menu-item",attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("buttonInstallFromURL"))},on:{click:e=>(e.preventDefault(),t.installFromURL(e))}})],1),n("tooltip",{attrs:{content:t.i18n("buttonUpdateAll"),placement:"bottom",align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"},on:{click:t.updateAll}},[n("icon",{attrs:{name:"refresh"}})],1)])],1),n("tooltip",{attrs:{content:t.i18n("buttonRecycleBin"),placement:"bottom"}},[n("a",{staticClass:"btn-ghost trash-button",class:{active:t.showRecycle,filled:t.trash.length},attrs:{tabindex:"0"},on:{click:e=>{t.showRecycle=!t.showRecycle}}},[n("icon",{class:{"trash-animate":t.removing},attrs:{name:"trash"}}),t.trash.length?n("b",{domProps:{textContent:t._s(t.trash.length)}}):t._e()],1)]),n("dropdown",{staticClass:"filter-sort",attrs:{align:"right"}},[n("tooltip",{attrs:{slot:"toggle",content:t.i18n("labelSettings"),placement:"bottom"},slot:"toggle"},[n("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"}},[n("icon",{attrs:{name:"cog"}})],1)]),n("div",[n("locale-group",{attrs:{"i18n-key":"labelFilterSort"}},[n("select",{domProps:{value:t.filters.sort.value},on:{change:t.onOrderChange}},t._l(t.filterOptions.sort,(e,s)=>n("option",{key:s,domProps:{value:s,textContent:t._s(e.title)}})),0)])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentSortCompare,expression:"currentSortCompare"}]},[n("setting-check",{attrs:{name:"filters.showEnabledFirst",label:t.i18n("optionShowEnabledFirst")}})],1),n("div",[n("setting-check",{attrs:{name:"filters.showOrder",label:t.i18n("labelShowOrder")}})],1),n("div",{staticClass:"mr-2c"},[n("setting-check",{attrs:{name:"filters.viewTable",label:t.i18n("labelViewTable")}}),n("setting-check",{attrs:{name:"filters.viewSingleColumn",label:t.i18n("labelViewSingleColumn")}})],1)],1),n("form",{staticClass:"filter-search hidden-xs flex",on:{submit:t=>{t.preventDefault()}}},[n("tooltip",{attrs:{placement:"bottom"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",class:{"has-error":t.searchError},attrs:{type:"search",placeholder:t.i18n("labelSearchScript"),id:"installed-search"},domProps:{value:t.search},on:{input:e=>{e.target.composing||(t.search=e.target.value)}}}),n("icon",{attrs:{name:"search"}})],1),n("pre",{staticClass:"filter-search-tooltip",attrs:{slot:"content"},domProps:{textContent:t._s(t.searchError||t.i18n("titleSearchHint"))},slot:"content"},[t._v("          ")])]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.searchScope,expression:"filters.searchScope"}],on:{change:[e=>{var n=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.filters,"searchScope",e.target.multiple?n:n[0])},t.onScopeChange]}},[n("option",{attrs:{value:"name"},domProps:{textContent:t._s(t.i18n("filterScopeName"))}}),n("option",{attrs:{value:"code"},domProps:{textContent:t._s(t.i18n("filterScopeCode"))}}),n("option",{attrs:{value:"all"},domProps:{textContent:t._s(t.i18n("filterScopeAll"))}})])],1)],1),t.showRecycle?n("div",{staticClass:"trash-hint mx-1 my-1 flex flex-col"},[n("span",{domProps:{textContent:t._s(t.i18n("hintRecycleBin"))}}),t.trash.length?n("a",{attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("buttonEmptyRecycleBin"))},on:{click:t.emptyRecycleBin}}):t._e()]):t._e(),n("div",{ref:"scriptList",staticClass:"scripts flex-auto",style:"--num-columns:"+t.numColumns,attrs:{"data-columns":t.numColumns,"data-show-order":t.filters.showOrder,"data-table":t.filters.viewTable}},t._l(t.sortedScripts,(e,s)=>n("script-item",{directives:[{name:"show",rawName:"v-show",value:!t.search||!1!==e.$cache.show,expression:"!search || script.$cache.show !== false"}],key:e.props.id,attrs:{focused:t.selectedScript===e,showHotkeys:t.showHotkeys,script:e,draggable:"exec"===t.filters.sort.value&&!e.config.removed,visible:s<t.batchRender.limit,nameClickable:t.filters.viewTable,hotkeys:t.scriptHotkeys},on:{edit:t.handleActionEdit,remove:t.handleActionRemove,restore:t.handleActionRestore,toggle:t.handleActionToggle,update:t.handleActionUpdate,move:t.moveScript,scrollDelta:t.handleSmoothScroll},nativeOn:{tiptoggle:e=>{t.showHotkeys=!t.showHotkeys}}})),1)]):t._e(),t.script?n("edit",{attrs:{initial:t.script},on:{close:e=>t.editScript()}}):t._e()],1)},S=[],P=p(61),$=p.n(P),U=p(15),E=p.n(U),R=p(13),A=p(21),D=p(18),I=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v(" "+t._s(t.parts[0])+" "),t._t("default"),t._v(" "+t._s(t.parts[1])+" ")],2)},N=[];const L="\x02";var T={props:["i18nKey"],computed:{parts(){return s(h.p)(this.i18nKey,[L]).split(L)}}},M=p(5),z=s(M.a)(T,I,N,!1,null,null,null).exports,V=p(1),O=p(2),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"script",class:{disabled:!t.script.config.enabled,removed:t.script.config.removed,error:t.script.error,focused:t.focused,hotkeys:t.focused&&t.showHotkeys},attrs:{tabIndex:t.tabIndex,draggable:t.draggable},on:{focus:t.onFocus,blur:t.onBlur}},[n("div",{staticClass:"script-icon hidden-xs"},[n("a",{attrs:{"data-hotkey":t.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},on:{click:t.onEdit}},[n("img",{attrs:{src:t.script.safeIcon}})])]),n("div",{staticClass:"script-info flex ml-1c"},[n("span",{staticClass:"script-order",domProps:{textContent:t._s(t.script.props.position)}}),n("span",{staticClass:"script-name ellipsis flex-auto",attrs:{tabIndex:t.nameClickable?t.tabIndex:-1},domProps:{textContent:t._s(t.script.$cache.name)},on:{click:e=>{if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;t.nameClickable&&t.onEdit()}}}),t.canRender?[t.author?n("tooltip",{staticClass:"script-author ml-1c hidden-sm",attrs:{content:t.i18n("labelAuthor")+t.script.meta.author,align:"end"}},[n("icon",{attrs:{name:"author"}}),t.author.email?n("a",{staticClass:"ellipsis",attrs:{href:"mailto:"+t.author.email,tabIndex:t.tabIndex},domProps:{textContent:t._s(t.author.name)}}):n("span",{staticClass:"ellipsis",domProps:{textContent:t._s(t.author.name)}})],1):t._e(),n("span",{staticClass:"version ellipsis",domProps:{textContent:t._s(t.script.meta.version?"v"+t.script.meta.version:"")}}),n("tooltip",{staticClass:"updated hidden-sm ml-1c",attrs:{content:t.updatedAt.title,align:"end"}},[t._v(" "+t._s(t.updatedAt.show)+" ")]),t.script.config.removed?n("div",[n("tooltip",{attrs:{content:t.i18n("buttonRestore"),placement:"left"}},[n("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.restore,tabIndex:t.tabIndex},on:{click:t.onRestore}},[n("icon",{attrs:{name:"undo"}})],1)])],1):t._e()]:t._e()],2),n("div",{staticClass:"script-buttons flex"},[t.canRender?[n("div",{staticClass:"flex-auto flex flex-wrap"},[n("tooltip",{attrs:{content:t.i18n("buttonEdit"),align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.edit,tabIndex:t.tabIndex},on:{click:t.onEdit}},[n("icon",{attrs:{name:"code"}})],1)]),n("tooltip",{attrs:{content:t.labelEnable,align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.toggle,tabIndex:t.tabIndex},on:{click:t.onToggle}},[n("icon",{attrs:{name:"toggle-"+(t.script.config.enabled?"on":"off")}})],1)]),n("tooltip",{attrs:{disabled:!t.canUpdate||t.script.checking,content:t.i18n("buttonUpdate"),align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.update,tabIndex:t.canUpdate?t.tabIndex:-1},on:{click:t.onUpdate}},[n("icon",{attrs:{name:"refresh"}})],1)]),n("span",{staticClass:"sep"}),n("tooltip",{attrs:{disabled:!t.homepageURL,content:t.i18n("buttonHome"),align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.homepageURL,tabIndex:t.homepageURL?t.tabIndex:-1}},[n("icon",{attrs:{name:"home"}})],1)]),n("tooltip",{attrs:{disabled:!t.description,content:t.description,align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{tabIndex:t.description?t.tabIndex:-1},on:{click:t.toggleTip}},[n("icon",{attrs:{name:"info"}})],1)]),n("tooltip",{attrs:{disabled:!t.script.meta.supportURL,content:t.i18n("buttonSupport"),align:"start"}},[n("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",tabIndex:t.script.meta.supportURL?t.tabIndex:-1,href:t.script.meta.supportURL}},[n("icon",{attrs:{name:"question"}})],1)]),n("div",{staticClass:"script-message",attrs:{title:t.script.error},domProps:{textContent:t._s(t.script.message)}})],1),n("tooltip",{attrs:{content:t.i18n("buttonRemove"),align:"end"}},[n("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.remove,tabIndex:t.tabIndex},on:{click:t.onRemove}},[n("icon",{attrs:{name:"trash"}})],1)])]:t._e()],2)])},B=[];const H=50,F=20,K=16,W=500,J="VM-drop-event-relay",Y="ontouchstart"in o,G=Y?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},q=Y&&s.assign(o.createElement("div"),{className:"dragging-noscroll"}),X=["scroll","mouseenter","mouseleave"],{addEventListener:Z,removeEventListener:Q}=EventTarget.prototype;let tt,et,nt,st,at,ot,it,rt,lt,ct,dt,pt,ut,ht,mt,gt,vt;function ft(t,{onDrop:e}){dt||(dt=t.parentElement,Y&&!matchMedia("(pointer: coarse)").matches&&dt.classList.add("touch")),c(Z,t,G.start,Y?bt:wt),c(Z,t,J,()=>e(st,at))}function bt(t){ct=this,ot=t,it=setTimeout(xt,W,"timer"),c(Z,o,G.move,xt),c(Z,o,G.end,yt)}function xt(t){yt(),"timer"===t&&(c(wt,ct,ot),d&&St()&&(dt.scrollTop+=1,dt.scrollTop-=1))}function yt(){clearTimeout(it),c(Q,o,G.move,xt),c(Q,o,G.end,yt)}function wt(t){var e;ct=this,t.cancelable&&t.preventDefault();const{clientX:n,clientY:s}=(null==(e=t.touches)?void 0:e[0])||t,a=ct.getBoundingClientRect(),i=dt.getBoundingClientRect();tt=ct.cloneNode(!0),et=[...dt.children],st=et.indexOf(ct),at=st,et.splice(st,1),nt=a.height,rt=n-a.left,lt=s-a.top,pt=i.top+H,ut=i.bottom-H,vt={},ct.classList.add("dragging-placeholder"),tt.classList.add("dragging"),tt.style.transform=`translate(${a.left}px, ${a.top}px)`,tt.style.width=`${a.width}px`,dt.appendChild(tt),Y&&dt.insertAdjacentElement("afterBegin",q),c(Z,o,G.move,Ct),c(Z,o,G.end,kt)}function Ct(t){var e;const{clientX:n,clientY:s,target:a}=(null==(e=t.touches)?void 0:e[0])||t;let o;const i=Y?At(n,s):null==a.closest?void 0:a.closest(".script");if(i&&i!==ct){const t=i.getBoundingClientRect(),e=s>t.top+t.height/2;o=ct!==i[`${e?"next":"previous"}ElementSibling`],o&&(i.insertAdjacentElement(e?"afterEnd":"beforeBegin",ct),_t(et.indexOf(i)+e))}tt.style.transform=`translate(${n-rt}px, ${s-lt}px)`,(Pt(s)||o)&&(vt={})}function kt(){c(Q,o,G.move,Ct),c(Q,o,G.end,kt),Et(),tt.remove(),Y&&q.remove(),ct.classList.remove("dragging-placeholder"),ct.dispatchEvent(new Event(J))}function _t(t){const e=at<t?nt:-nt,n=et.slice(...at<t?[at,t]:[t,at]);n.forEach(t=>{t.style.transition="none",t.style.transform=`translateY(${e}px)`}),setTimeout(()=>n.forEach(t=>t.removeAttribute("style"))),at=t}function St(){return dt.scrollHeight>dt.clientHeight}function Pt(t){const e=St()&&Math.min(1,Math.max(0,t-ut,pt-t)/H);return!e&&ht&&Et(),e&&!ht&&Ut(),mt=e&&(t>ut?1:-1)*(1+e*F|0),gt=performance.now(),!!e}function $t(){const t=performance.now(),e=mt*(t-gt)/K;dt.scrollTop+=e,gt=t}function Ut(){ht=setInterval($t,K),X.forEach(t=>c(Z,i,t,Rt,!0))}function Et(){X.forEach(t=>c(Q,i,t,Rt,!0)),ht&&clearInterval(ht),ht=0}function Rt(t){t.stopPropagation()}function At(t,e){var n;const s=`${t}:${e}`;return vt[s]||(vt[s]=null==(n=o.elementFromPoint(t,e))?void 0:n.closest(".script"))}const Dt=8;var It={props:["script","draggable","visible","nameClickable","focused","hotkeys","showHotkeys"],components:{Icon:C.a,Tooltip:E.a},data(){return{canRender:this.visible&&!this.script.custom.buildIn}},computed:{canUpdate(){const{script:t}=this;return t.config.shouldUpdate&&(t.custom.updateURL||t.meta.updateURL||t.custom.downloadURL||t.meta.downloadURL||t.custom.lastInstallURL)},homepageURL(){const{script:t}=this;return t.custom.homepageURL||t.meta.homepageURL||t.meta.homepage},author(){const t=this.script.meta.author;if(!t)return;const e=t.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:e&&e[2],name:e?e[1]:t}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||s(h.m)(this.script.meta,"description")},updatedAt(){const{props:t,config:e}=this.script,n={};let a;if(e.removed?({lastModified:a}=t):a=t.lastUpdated||t.lastModified,a){const t=new Date(a);n.show=s(h.j)(Date.now()-a),e.removed?n.title=this.i18n("labelRemovedAt",t.toLocaleString()):n.title=this.i18n("labelLastUpdatedAt",t.toLocaleString())}return n},tabIndex(){return this.focused?0:-1}},watch:{visible(t){t&&(this.canRender=!0)},focused(t,e){const{$el:n}=this;if(t&&!e&&n){const t=n.getBoundingClientRect(),e=n.parentNode.getBoundingClientRect();let a=0;t.bottom>e.bottom-Dt?a+=t.bottom-e.bottom+Dt:t.top<e.top+Dt&&(a-=e.top-t.top+Dt),s(k.b)(o.activeElement)||n.focus({preventScroll:!0}),this.$emit("scrollDelta",a)}}},mounted(){ft(this.$el,{onDrop:(t,e)=>this.$emit("move",{from:t,to:e})})},methods:{onEdit(){this.$emit("edit",this.script)},onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){k.c.setContext("scriptFocus",!0)},onBlur(){k.c.setContext("scriptFocus",!1)},toggleTip(t){s(k.d)(t.target)}}},Nt=(p(146),s(M.a)(It,j,B,!1,null,null,null).exports),Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit frame flex flex-col fixed-full"},[n("div",{staticClass:"edit-header flex mr-1c"},[n("nav",t._l(t.navItems,(e,s)=>n("div",{key:s,staticClass:"edit-nav-item",class:{active:t.nav===s},domProps:{textContent:t._s(e)},on:{click:e=>{t.nav=s}}})),0),n("div",{staticClass:"edit-name text-center ellipsis flex-1",domProps:{textContent:t._s(t.scriptName)}}),n("div",{staticClass:"edit-hint text-right ellipsis"},[n("a",{attrs:{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("editHowToHint"))}})]),n("div",{staticClass:"edit-buttons"},[n("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.save}}),n("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSaveClose"))},on:{click:t.saveClose}}),n("button",{domProps:{textContent:t._s(t.i18n("buttonClose"))},on:{click:t.close}})])]),n("div",{staticClass:"frame-block flex-auto pos-rel"},[n("vm-code",{directives:[{name:"show",rawName:"v-show",value:"code"===t.nav,expression:"nav === 'code'"}],ref:"code",staticClass:"abs-full",attrs:{active:"code"===t.nav,commands:t.commands},on:{"code-dirty":e=>{t.codeDirty=e}},model:{value:t.code,callback:e=>{t.code=e},expression:"code"}}),n("vm-settings",{directives:[{name:"show",rawName:"v-show",value:"settings"===t.nav,expression:"nav === 'settings'"}],staticClass:"abs-full edit-body",attrs:{active:"settings"===t.nav,settings:t.settings,value:t.script}}),n("vm-values",{directives:[{name:"show",rawName:"v-show",value:"values"===t.nav,expression:"nav === 'values'"}],staticClass:"abs-full edit-body",attrs:{active:"values"===t.nav,script:t.script}}),"externals"===t.nav?n("vm-externals",{staticClass:"abs-full",model:{value:t.script,callback:e=>{t.script=e},expression:"script"}}):t._e(),n("vm-help",{directives:[{name:"show",rawName:"v-show",value:"help"===t.nav,expression:"nav === 'help'"}],staticClass:"abs-full edit-body",attrs:{hotkeys:t.hotkeys}})],1)])},Tt=[],Mt=p(3),zt=p.n(Mt),Vt=p(48),Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"edit-settings"},[n("h4",{domProps:{textContent:t._s(t.i18n("editLabelSettings"))}}),n("div",{staticClass:"form-group condensed"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.config.shouldUpdate,expression:"config.shouldUpdate"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.config.shouldUpdate)?t._i(t.config.shouldUpdate,null)>-1:t.config.shouldUpdate},on:{change:e=>{var n=t.config.shouldUpdate,s=e.target,a=!!s.checked;if(Array.isArray(n)){var o=null,i=t._i(n,o);s.checked?i<0&&t.$set(t.config,"shouldUpdate",n.concat([o])):i>-1&&t.$set(t.config,"shouldUpdate",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.config,"shouldUpdate",a)}}}),n("span",{domProps:{textContent:t._s(t.i18n("labelAllowUpdate"))}})]),n("span",{domProps:{textContent:t._s(t.i18n("labelNotifyThisUpdated"))}}),t._l([[t.i18n("genericOn"),"1"],[t.i18n("genericOff"),"0"],[t.i18n("genericUseGlobal"),""]],e=>{var s=e[0],a=e[1];return n("label",{key:a,staticClass:"ml-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.config.notifyUpdates,expression:"config.notifyUpdates"}],attrs:{type:"radio"},domProps:{value:a,checked:t._q(t.config.notifyUpdates,a)},on:{change:e=>t.$set(t.config,"notifyUpdates",a)}}),t._v(" "),n("span",{domProps:{textContent:t._s(s)}})])})],2),n("h4",{domProps:{textContent:t._s(t.i18n("editLabelMeta"))}}),n("tooltip",{staticClass:"form-group fit-width",attrs:{content:"@run-at",placement:"right"}},[n("label",{domProps:{textContent:t._s(t.i18n("labelRunAt"))}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.custom.runAt,expression:"custom.runAt"}],on:{change:e=>{var n=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.custom,"runAt",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelRunAtDefault"))}}),n("option",{attrs:{value:"document-start"}},[t._v("document-start")]),n("option",{attrs:{value:"document-body"}},[t._v("document-body")]),n("option",{attrs:{value:"document-end"}},[t._v("document-end")]),n("option",{attrs:{value:"document-idle"}},[t._v("document-idle")])])]),n("tooltip",{staticClass:"form-group fit-width",attrs:{content:"@noframes",placement:"right"}},[n("label",{domProps:{textContent:t._s(t.i18n("labelNoFrames"))}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.custom.noframes,expression:"custom.noframes"}],on:{change:e=>{var n=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.custom,"noframes",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelRunAtDefault"))}}),n("option",{attrs:{value:"0"},domProps:{textContent:t._s(t.i18n("genericOn"))}}),n("option",{attrs:{value:"1"},domProps:{textContent:t._s(t.i18n("genericOff"))}})])]),t._l(t.textInputs,e=>{var s=e[0],a=e[1];return n("tooltip",{key:s,staticClass:"form-group mr-tooltip",attrs:{content:"@"+s,placement:"right"}},[n("label",{domProps:{textContent:t._s(a)}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.custom[s],expression:"custom[name]"}],attrs:{type:"text",placeholder:t.placeholders[s]},domProps:{value:t.custom[s]},on:{input:e=>{e.target.composing||t.$set(t.custom,s,e.target.value)}}})])}),t._l(t.textAreas,e=>{var s=e[0],a=e[1],o=e[2];return n("div",{key:s,staticClass:"form-group"},[n("div",[n("span",{domProps:{textContent:t._s(o)}}),n("label",{staticClass:"ml-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.custom[a],expression:"custom[orig]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom[a])?t._i(t.custom[a],null)>-1:t.custom[a]},on:{change:e=>{var n=t.custom[a],s=e.target,o=!!s.checked;if(Array.isArray(n)){var i=null,r=t._i(n,i);s.checked?r<0&&t.$set(t.custom,a,n.concat([i])):r>-1&&t.$set(t.custom,a,n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.custom,a,o)}}}),n("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom[s],expression:"custom[name]"}],ref:"area",refInFor:!0,attrs:{spellcheck:"false"},domProps:{value:t.custom[s]},on:{input:e=>{e.target.composing||t.$set(t.custom,s,e.target.value)}}})])})],2)},jt=[],Bt={props:["active","settings","value"],components:{Tooltip:E.a},computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:t}=this;return{name:s(V.h)(t,"meta.name"),homepageURL:s(V.h)(t,"meta.homepageURL"),updateURL:s(V.h)(t,"meta.updateURL")||s(h.p)("hintUseDownloadURL"),downloadURL:s(V.h)(t,"meta.downloadURL")||s(V.h)(t,"custom.lastInstallURL")}},textInputs:()=>[["name",s(h.p)("labelName")],["homepageURL",s(h.p)("labelHomepageURL")],["updateURL",s(h.p)("labelUpdateURL")],["downloadURL",s(h.p)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",s(h.p)("labelInclude")],["match","origMatch",s(h.p)("labelMatch")],["exclude","origExclude",s(h.p)("labelExclude")],["excludeMatch","origExcludeMatch",s(h.p)("labelExcludeMatch")]]},watch:{active(t){t&&(this.$refs.container.querySelector("input").focus(),s(R.a)(this.$refs.area))}}},Ht=(p(148),s(M.a)(Bt,Ot,jt,!1,null,null,null).exports),Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"edit-values"},[n("div",{staticClass:"mb-1"},[n("button",{on:{click:t.onNew}},[t._v("+")]),t.totalPages>1?n("div",{staticClass:"inline-block ml-2"},[n("button",{attrs:{disabled:1===t.page},on:{click:e=>{t.page-=1}}},[t._v("\u2190")]),n("span",{staticClass:"ml-1",domProps:{textContent:t._s(t.page)}}),t._v(" / "),n("span",{staticClass:"mr-1",domProps:{textContent:t._s(t.totalPages)}}),n("button",{attrs:{disabled:t.page>=t.totalPages},on:{click:e=>{t.page+=1}}},[t._v("\u2192")])]):t._e(),n("span",{staticClass:"ml-2 mr-2c"},[n("span",[t.totalPages>1?[n("kbd",[t._v("PageUp")]),t._v(", "),n("kbd",[t._v("PageDown")]),t._v(", ")]:t._e(),n("kbd",[t._v("\u2191")]),t._v(", "),n("kbd",[t._v("\u2193")]),t._v(", "),n("kbd",[t._v("Tab")]),t._v(", "),n("kbd",[t._v("Shift-Tab")]),t._v(", ")],2),n("span",[n("kbd",[t._v("Enter")]),t._v(": "+t._s(t.i18n("buttonEdit"))+",")]),n("span",[n("kbd",[t._v("Ctrl-Del")]),t._v(": "+t._s(t.i18n("buttonRemove")))])])]),n("div",{staticClass:"edit-values-table",on:{keydown:[e=>!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onUpDown(e),e=>!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onUpDown(e)]}},[n("a",{ref:"editAll",staticClass:"edit-values-row flex",attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("editValueAllHint"))},on:{click:t.onEditAll}}),t._l(t.pageKeys,e=>n("div",{key:e,staticClass:"edit-values-row flex",on:{keydown:n=>!n.type.indexOf("key")&&t._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"])?null:n.ctrlKey?n.shiftKey||n.altKey||n.metaKey?null:t.onRemove(e):null,click:n=>t.onEdit(e)}},[n("div",{staticClass:"ellipsis"},[n("a",{attrs:{tabindex:"0"},domProps:{textContent:t._s(e)}}),n("div",{staticClass:"edit-values-btn",on:{click:n=>(n.stopPropagation(),n.preventDefault(),t.onRemove(e))}},[n("icon",{attrs:{name:"trash"}})],1)]),n("div",{staticClass:"ellipsis flex-auto",domProps:{textContent:t._s(t.getValue(e,!0))}}),n("pre",{domProps:{textContent:t._s(t.getLength(e))}})]))],2),t.keys&&!t.keys.length?n("div",{staticClass:"edit-values-empty mt-1",domProps:{textContent:t._s(t.i18n("noValues"))}}):t._e(),t.current?n("div",{staticClass:"edit-values-panel flex flex-col mb-1c"},[n("div",{staticClass:"control"},[n("h4",{domProps:{textContent:t._s(t.current.isAll?t.i18n("labelEditValueAll"):t.i18n("labelEditValue"))}}),n("div",[n("button",{class:{"has-error":t.current.error},attrs:{title:t.current.error,disabled:t.current.error||t.current.value===t.initial},domProps:{textContent:t._s(t.i18n("editValueSave"))},on:{click:t.onSave}}),n("button",{domProps:{textContent:t._s(t.i18n("editValueCancel"))},on:{click:t.onCancel}})])]),n("label",{directives:[{name:"show",rawName:"v-show",value:!t.current.isAll,expression:"!current.isAll"}]},[n("span",{domProps:{textContent:t._s(t.i18n("valueLabelKey"))}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.key,expression:"current.key"}],ref:"key",attrs:{type:"text",readOnly:!t.current.isNew,spellcheck:"false"},domProps:{value:t.current.key},on:{keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e)),input:e=>{e.target.composing||t.$set(t.current,"key",e.target.value)}}})]),n("label",[n("span",{domProps:{textContent:t._s(t.current.isAll?t.i18n("valueLabelValueAll"):t.i18n("valueLabelValue"))}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.value,expression:"current.value"}],ref:"value",attrs:{spellcheck:"false"},domProps:{value:t.current.value},on:{input:[e=>{e.target.composing||t.$set(t.current,"value",e.target.value)},t.onChange],keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e))}})])]):t._e()])},Kt=[];const Wt=25,Jt=1024,Yt=10;let Gt,qt;const Xt=t=>{try{return JSON.stringify(JSON.parse(t),null,"  ")}catch(e){return t}},Zt=()=>o.activeElement,Qt=(t,e)=>{t.page=Math.max(1,Math.min(t.totalPages,t.page+e))},te={condition:"!edit"};var ee={props:["active","script"],components:{Icon:C.a},data:()=>({current:null,keys:null,page:null,values:null}),computed:{totalPages(){var t;return Math.ceil((null==(t=this.keys)?void 0:t.length)/Wt)||0},pageKeys(){var t;const e=Wt*(this.page-1);return null==(t=this.keys)?void 0:t.slice(e,e+Wt)}},mounted(){this.$refs.container.addEventListener("focusin",t=>{k.c.setContext("edit","selectionEnd"in t.target)})},watch:{active(t){var e,n,s;t?(null==(e=this.current?this.$refs.value:qt)||e.focus(),O.a.value.getOne(this.script.props.id).then(t=>{!this.values&&this.setData(t)&&this.keys.length&&this.autofocus(!0)}),Gt=O.a.value.prefix+(null==(n=this.script)?void 0:n.props.id),this.disposeList=[k.c.register("pageup",()=>Qt(this,-1),te),k.c.register("pagedown",()=>Qt(this,1),te)]):null==(s=this.disposeList)||s.forEach(t=>t()),browser.storage.onChanged[`${t?"add":"remove"}Listener`](this.onStorageChanged)},current(t,e){if(t)qt=Zt(),this.initial=t.value,this.$nextTick(()=>{const e=this.$refs[t.isNew?"key":"value"];e.setSelectionRange(0,0),e.focus()});else if(e){var n;null==(n=qt)||n.focus()}},page(){qt=null,this.autofocus()}},methods:{autofocus(t){this.$nextTick(()=>{this.$refs.editAll[t?"click":"focus"]()})},getLength(t){const e=this.values[t].length-1;return e<1e4?e:s(h.i)(e)},getValue(t,e){let n=this.values[t];const s=n[0];return n=n.slice(1),"s"===s?n=JSON.stringify(n):e||(n=Xt(n)),e&&n.length>Jt&&(n=n.slice(0,Jt)),n},getValueAll(){return`{\n  ${this.keys.map(t=>`${JSON.stringify(t)}: ${this.getValue(t)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`},setData(t={}){if(!s(V.b)(this.values,t))return this.values=t,this.keys=s.keys(t).sort(),this.page=Math.min(this.page,this.totalPages)||1,this.calcSize(),!0},calcSize(){x.storageSize=this.keys.reduce((t,e)=>t+this.values[e].length-1,0)},updateValue({key:t,jsonValue:e,isNew:n}){const a=s(h.f)(e)||"",{id:o}=this.script.props;return s(h.y)("UpdateValue",{id:o,key:t,value:a}).then(()=>{if(a)this.$set(this.values,t,a),n&&this.keys.push(t);else{const e=this.keys.indexOf(t);e>=0&&this.keys.splice(e,1),this.$delete(this.values,t)}this.calcSize()})},onNew(){this.current={isNew:!0,key:"",value:""}},onRemove(t){this.updateValue({key:t}).then(()=>{this.current&&this.current.key===t&&(this.current=null)})},onEdit(t){this.current={isNew:!1,key:t,value:this.getValue(t)}},onEditAll(){this.current={isAll:!0,value:this.getValueAll()}},async onSave(){const{current:t}=this;if(t.jsonPaused&&(t.jsonPaused=!1,this.onChange()),t.error){const e=+t.error.match(/position\s+(\d+)|$/)[1]||0;return this.$refs.value.setSelectionRange(e,e+1),this.$refs.value.focus(),void s(R.c)({text:t.error})}this.current=null,t.isAll?await s(h.y)("SetValueStores",[{where:{id:this.script.props.id},store:c(V.f,t.jsonValue,([,t])=>s(h.f)(t)||"")}]):await this.updateValue(t)},onCancel(){this.current=null},onChange(){const{current:t}=this;if(t.error=null,t.jsonPaused)return;const e=performance.now(),n=t.value.trim();try{t.jsonValue=n?JSON.parse(n):void 0}catch(e){t.error=e.message||e,t.jsonValue=void 0}t.jsonPaused=performance.now()-e>Yt},onStorageChanged(t){var e;const n=null==(e=t[Gt])?void 0:e.newValue;if(n){const{current:t}=this,e=null==t?void 0:t.key,a=t&&(e?this.getValue:this.getValueAll),o=a&&a(e);if(this.setData(n),t){const n=a(e),i=t.value;i===n?t.isNew=!1:i===o&&(s.keys(t).filter(t=>"key"!==t&&"value"!==t).forEach(e=>delete t[e]),t.value=n)}}else x.storageSize=0},onUpDown(t){s(k.a)(("ArrowDown"===t.key?1:t.target!==this.$refs.editAll&&-1)||0)}}},ne=(p(150),s(M.a)(ee,Ft,Kt,!1,null,null,null).exports),se=p(49),ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-help mb-2c"},[n("div",[n("h3",{domProps:{innerHTML:t._s(t.i18n("editHelpDocumention"))}}),n("a",{attrs:{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"}},[t._v("violentmonkey.github.io/api/")])]),n("div",{staticClass:"keyboard"},[n("h3",{domProps:{textContent:t._s(t.i18n("editHelpKeyboard"))}}),t._l(t.hotkeys,e=>{var s=e[0],a=e[1];return n("dl",{key:s},[n("dt",{staticClass:"monospace-font",domProps:{textContent:t._s(s)}}),n("dd",{domProps:{textContent:t._s(a)}})])})],2)])},oe=[],ie={props:["hotkeys"]},re=(p(152),s(M.a)(ie,ae,oe,!1,null,null,null).exports);const le={name:"",runAt:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},ce=["include","match","exclude","excludeMatch"],de=t=>t?`${t.join("\n")}\n`:"",pe=t=>t.split("\n").map(t=>t.trim()).filter(e);let ue,he;const me=async t=>{v.a.get("editorWindow")&&(t||(t=await browser.windows.getCurrent()),"normal"===t.state&&v.a.set("editorWindowPos",s(V.i)(t,["left","top","width","height"])))},ge=({id:e,tabs:n})=>{if(1===n.length){const{onBoundsChanged:n}=t.chrome.windows;n?n.addListener(t=>{t.id===e&&me(t)}):(i.addEventListener("resize",s(h.d)(me,100)),he=!0)}};let ve;const fe="Alt-PageUp",be="Alt-PageDown",xe=(t,e)=>t<e?-1:t>e;var ye={props:["initial"],components:{VmCode:Vt.default,VmSettings:Ht,VmValues:ne,VmExternals:se.a,VmHelp:re},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null}},computed:{navItems(){const{meta:t,props:e}=this.script||{},n=(null==t?void 0:t.require.length)&&"@require",a=!s(h.r)(null==t?void 0:t.resources)&&"@resource",o=x.storageSize;return zt()({code:s(h.p)("editNavCode"),settings:s(h.p)("editNavSettings")},(null==e?void 0:e.id)&&{values:s(h.p)("editNavValues")+(o?` (${s(h.i)(o)})`:"")},{},(n||a)&&{externals:c(h.B,[n,a],"/")},{help:"?"})},scriptName(){const{script:t}=this,e=(null==t?void 0:t.meta)&&s(h.n)(t);return x.title=e,e}},watch:{nav(t){k.c.setContext("tabCode","code"===t)},canSave(t){this.toggleUnloadSentry(t),k.c.setContext("canSave",t)},"initial.error"(t){t&&s(R.c)({text:`${this.initial.message}\n\n${t}`})}},created(){var e;this.script=this.initial,this.toggleUnloadSentry=s(f.a)(null,()=>{this.$refs.code.cm.focus()}),v.a.get("editorWindow")&&1===t.history.length&&(null==(e=browser.windows)||e.getCurrent({populate:!0}).then(ge))},async mounted(){var t,n,a;x.storageSize=0,this.nav="code";const o=null==(t=this.script)||null==(n=t.props)?void 0:n.id;if(o)this.code=await s(h.y)("GetScriptCode",o);else{const{script:t,code:e}=await s(h.y)("NewScript",f.c.paths[2]);this.script=t,this.code=e}const{custom:i,config:r}=this.script,{noframes:l}=i;this.settings={config:{notifyUpdates:`${null!=(a=r.notifyUpdates)?a:""}`,shouldUpdate:e(r.shouldUpdate)},custom:zt()({},le,{},s(V.i)(i,s.keys(le)),{},s(V.i)(i,ce,de),{runAt:i.runAt||"",noframes:null==l?"":+l})},ue=s(V.a)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var c;const t=s.values(this.navItems),e=[[fe,` ${t.join(" < ")}`],[be,` ${t.join(" > ")}`],...s.entries(this.$refs.code.expandKeyMap()).sort((t,e)=>xe(t[1],e[1])||xe(t[0],e[0]))];ve=null==(c=e.find(([,t])=>"save"===t))?void 0:c[0],ve||(ve="Ctrl-S",e.unshift([ve,"save"])),this.hotkeys=e}this.disposeList=[k.c.register("a-pageup",this.switchPrevPanel),k.c.register("a-pagedown",this.switchNextPanel),k.c.register(ve.replace("Ctrl-","ctrlcmd-"),this.save),k.c.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})]},methods:{async save(){if(!this.canSave)return;he&&me();const{settings:t}=this,{config:e,custom:n}=t,{notifyUpdates:a}=e,{noframes:o}=n;try{var i,r,l;const c=this.$refs.code,d=null==(i=this.script)||null==(r=i.props)?void 0:r.id,p=await s(h.y)("ParseScript",{id:d,code:c.getRealContent(),config:zt()({},e,{notifyUpdates:a?+a:null}),custom:zt()({},s(V.i)(n,s.keys(le)),{},s(V.i)(n,ce,pe),{noframes:o?+o:null}),isNew:!d,message:""});ue=s(V.a)(t),c.cm.markClean(),this.codeDirty=!1,this.canSave=!1,(null==p||null==(l=p.where)?void 0:l.id)&&(this.script=p.update)}catch(t){s(R.b)(`${t.message||t}`,{cancel:!1})}},close(t){var e;t&&"code"!==this.nav?this.nav="code":(this.$emit("close"),d&&(null==(e=o.activeElement)||e.blur()))},saveClose(){this.save().then(this.close)},switchPanel(t){const e=s.keys(this.navItems);this.nav=e[(e.indexOf(this.nav)+t+e.length)%e.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!s(V.b)(this.settings,ue)}},beforeDestroy(){var t;x.title=null,this.toggleUnloadSentry(!1),null==(t=this.disposeList)||t.forEach(t=>{t()})}},we=(p(154),s(M.a)(ye,Lt,Tt,!1,null,null,null).exports);const Ce={sort:{exec:{title:s(h.p)("filterExecutionOrder")},alpha:{title:s(h.p)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:t}},{$cache:{lowerName:e}})=>t<e?-1:t>e},update:{title:s(h.p)("filterLastUpdateOrder"),compare:({props:{lastUpdated:t}},{props:{lastUpdated:e}})=>(+e||0)-(+t||0)}}},ke={value:null,title:null},_e={searchScope:null,showEnabledFirst:null,showOrder:null,viewSingleColumn:null,viewTable:null,get sort(){return ke},set sort(t){const e=Ce.sort[t];e?(ke.value=t,ke.title=e.title):_e.sort=s.keys(Ce.sort)[0]}},Se=t=>_e.showEnabledFirst?(e,n)=>n.config.enabled-e.config.enabled||t(e,n):t;c(V.d,_e,t=>{s(D.a)(`filters.${t}`,e=>{_e[t]=e})});const Pe=100;let $e=0,Ue=[],Ee=[];const Re="tabScripts",Ae=`${Re} && inputFocus`,De=`${Re} && !inputFocus`,Ie=`${De} && selectedScript && !showRecycle`,Ne=`${De} && selectedScript && showRecycle`,Le=`${De} && selectedScript && showHotkeys`,Te={edit:"e,Enter",toggle:"space",update:"r",restore:"r",remove:"x"},Me=(t,e)=>e.map(([e,n,s])=>k.c.register(e,t,{condition:n,caseSensitive:s})),ze=(t,...e)=>t.split(/\s*,\s*/).map(t=>[t,...e]);var Ve={components:{ScriptItem:Nt,Edit:we,Tooltip:E.a,SettingCheck:A.a,LocaleGroup:z,Dropdown:$.a,Icon:C.a},data:()=>({scriptHotkeys:Te,store:x,filterOptions:Ce,filters:_e,filteredScripts:[],focusedIndex:-1,script:null,search:null,searchError:null,modal:null,menuNewActive:!1,showRecycle:!1,sortedScripts:[],removing:!1,showHotkeys:!1,canRenderScripts:!x.route.paths[1],batchRender:{limit:$e},numColumns:null}),watch:{search:"scheduleSearch","filters.sort.value":"updateLater","filters.showEnabledFirst":"updateLater","filters.viewSingleColumn":"adjustScriptWidth","filters.viewTable":"adjustScriptWidth",showRecycle(t){k.c.setContext("showRecycle",t),this.focusedIndex=-1,this.onUpdate()},scripts:"refreshUI","store.route.paths.1":"onHashChange",selectedScript(t){k.c.setContext("selectedScript",t)},showHotkeys(t){k.c.setContext("showHotkeys",t)}},computed:{currentSortCompare(){var t;return null==(t=Ce.sort[_e.sort.value])?void 0:t.compare},selectedScript(){return this.filteredScripts[this.focusedIndex]},message(){if(this.store.loading)return null;const t=this.sortedScripts;return(this.search?t.find(t=>!1!==t.$cache.show):t.length)?null:s(h.p)("labelNoSearchScripts")},scripts(){return this.store.installedScripts},searchNeedsCodeIds(){return this.search&&["code","all"].includes(_e.searchScope)&&this.store.scripts.filter(t=>null==t.$cache.code).map(t=>t.props.id)},trash(){return this.store.removedScripts}},methods:{async refreshUI(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.onUpdate(),this.onHashChange()},onUpdate(){const t=[...this.showRecycle?this.trash:this.scripts],e=this.search?this.performSearch(t):t.length,n=this.currentSortCompare;n&&t.sort(Se(n)),this.sortedScripts=t,this.filteredScripts=this.search?t.filter(({$cache:t})=>t.show):t,this.selectScript(this.focusedIndex),!$e||e<$e?this.renderScripts():this.debouncedRender()},updateLater(){this.debouncedUpdate()},updateAll(){s(h.x)("CheckUpdateAll")},async installFromURL(){try{var t;let e=await s(R.b)(s(h.p)("hintInputURL"),{input:"",ok:{type:"submit"}});e=null==(t=e)?void 0:t.trim(),e&&(e.includes("://")||(e=`https://${e}`),new URL(e)&&await s(h.x)("ConfirmInstall",{url:e}))}catch(t){t&&s(R.c)({text:t})}},moveScript(t){t.from!==t.to&&(0!==t.from&&0!==t.to?s(h.x)("Move",{id:this.scripts[t.from].props.id,offset:t.to-t.from}).then(()=>{const{scripts:e}=this,n=Math.min(t.from,t.to),s=Math.max(t.from,t.to),a=[e.slice(0,n),e.slice(n,s+1),e.slice(s+1)];n===t.to?a[1].unshift(a[1].pop()):a[1].push(a[1].shift()),this.store.scripts=[...a.flat(),...this.trash]}):i.location.reload())},onOrderChange(t){v.a.set("filters.sort",t.target.value)},onScopeChange(t){this.search&&this.scheduleSearch(),v.a.set("filters.searchScope",t.target.value)},onStateChange(t){this.menuNewActive=t},editScript(t){const n=["scripts",t].filter(e).join("/");t||n!==s(f.b)().pathname?s(f.d)(n):i.history.back()},onHashChange(){const[t,e]=this.store.route.paths;if("_new"===e)this.script={};else{const n=e&&+e||null;this.script=n&&this.scripts.find(t=>t.props.id===n),this.script||(this.canRenderScripts||(Es(),this.canRenderScripts=!0),this.debouncedRender(),e&&s(f.d)(t,!0))}},async renderScripts(){if(!this.canRenderScripts)return;const{length:t}=this.sortedScripts;let e=9;const n={limit:e};this.batchRender=n;const o=performance.now();for(;e<t&&n===this.batchRender;){if($e&&this.search)for(let n=0;n<$e&&e<t;e+=1)n+=this.sortedScripts[e].$cache.show?1:0;else e+=$e||1;n.limit=e,await new a(t=>this.$nextTick(t)),!$e&&performance.now()-o>=Pe&&($e=2*e),$e&&e<t&&await s(h.t)()}},performSearch(t){let e,n=0;const[,s=this.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),a="i"]=this.search.match(/^\/(.+?)\/(\w*)$|$/),o=_e.searchScope,i="name"===o||"all"===o,r="code"===o||"all"===o;try{e=s&&new RegExp(s,a),t.forEach(({$cache:t})=>{t.show=!s||i&&e.test(t.search)||r&&e.test(t.code),n+=t.show}),this.searchError=null}catch(t){this.searchError=t.message}return n},async scheduleSearch(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.debouncedUpdate()},async getCodeFromStorage(t){const e=await O.a.code.getMulti(t);this.store.scripts.forEach(({$cache:t,props:{id:n}})=>{n in e&&(t.code=e[n])})},async emptyRecycleBin(){try{await s(R.b)(s(h.p)("buttonEmptyRecycleBin")),s(h.x)("CheckRemove",{force:!0}),x.scripts=x.scripts.filter(t=>!t.config.removed)}catch(t){}},adjustScriptWidth(){const t=_e.viewTable?Ue:Ee;this.numColumns=_e.viewSingleColumn?1:t.findIndex(t=>i.innerWidth<t)+1||t.length+1},selectScript(t){t=Math.min(t,this.filteredScripts.length-1),(t=Math.max(t,-1))!==this.focusedIndex&&(this.focusedIndex=t)},markRemove(t,e){t.custom.buildIn||s(h.x)("MarkRemoved",{id:t.props.id,removed:e})},handleActionEdit(t){t.custom.buildIn||this.editScript(t.props.id)},handleActionRemove(t){this.markRemove(t,1),this.removing=!0,setTimeout(()=>{this.removing=!1},1e3)},handleActionRestore(t){this.markRemove(t,0)},handleActionToggle(t){t.custom.buildIn||s(h.x)("UpdateScriptInfo",{id:t.props.id,config:{enabled:t.config.enabled?0:1}})},handleActionUpdate(t){t.custom.buildIn||s(h.x)("CheckUpdate",t.props.id)},handleSmoothScroll(t){if(!t)return;const e=this.$refs.scriptList;e.scroll({top:e.scrollTop+t,behavior:"smooth"})}},created(){this.debouncedUpdate=s(h.d)(this.onUpdate,100),this.debouncedRender=s(h.d)(this.renderScripts)},mounted(){if(x.loading||this.refreshUI(),!Ee.length){const n=getComputedStyle(o.documentElement);[Ee,Ue]=["cards","table"].map(t=>{var s;return(null==(s=n.getPropertyValue(`--columns-${t}`))?void 0:s.split(",").map(Number).filter(e))||[]}),t.addEventListener("resize",this.adjustScriptWidth)}this.adjustScriptWidth(),this.disposeList=[...d?[k.c.register("tab",()=>{s(k.a)(1)}),k.c.register("s-tab",()=>{s(k.a)(-1)})]:[],...Me(()=>{var t;null==(t=this.$refs.search)||t.focus()},[["ctrlcmd-f",Re],["/",De,!0]]),...Me(()=>{var t;null==(t=this.$refs.search)||t.blur()},[["enter",Ae]]),...Me(()=>{this.showHotkeys=!1},[["escape",Le],["q",Le,!0]]),...Me(()=>{let t=this.focusedIndex;t<0?t=0:t+=this.numColumns,t<this.filteredScripts.length&&this.selectScript(t)},[["ctrlcmd-down",Re],["down",Re],["j",De,!0]]),...Me(()=>{const t=this.focusedIndex-this.numColumns;t>=0&&this.selectScript(t)},[["ctrlcmd-up",Re],["up",Re],["k",De,!0]]),...Me(()=>{this.selectScript(this.focusedIndex-1)},[["ctrlcmd-left",Re],["left",De],["h",De,!0]]),...Me(()=>{this.selectScript(this.focusedIndex+1)},[["ctrlcmd-right",Re],["right",De],["l",De,!0]]),...Me(()=>{this.selectScript(0)},[["ctrlcmd-home",Re],["g g",De,!0]]),...Me(()=>{this.selectScript(this.filteredScripts.length-1)},[["ctrlcmd-end",Re],["G",De,!0]]),...Me(()=>{this.handleActionEdit(this.selectedScript)},ze(Te.edit,Ie,!0)),...Me(()=>{this.handleActionRemove(this.selectedScript)},[["delete",Ie],[Te.remove,Ie,!0]]),...Me(()=>{this.handleActionUpdate(this.selectedScript)},[[Te.update,Ie,!0]]),...Me(()=>{this.handleActionToggle(this.selectedScript)},[[Te.toggle,Ie,!0]]),...Me(()=>{this.handleActionRestore(this.selectedScript)},[[Te.restore,Ne,!0]])]},beforeDestroy(){var t;null==(t=this.disposeList)||t.forEach(t=>{t()})}},Oe=(p(156),s(M.a)(Ve,_,S,!1,null,null,null).exports),je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-settings mb-1c"},[n("h1",{staticClass:"mt-0",domProps:{textContent:t._s(t.i18n("labelSettings"))}}),n("section",{staticClass:"mb-1c"},[n("h3",{domProps:{textContent:t._s(t.i18n("optionPopup"))}}),n("div",[n("setting-check",{attrs:{name:"autoReload",label:t.i18n("labelAutoReloadCurrentTab")}})],1),n("div",[n("setting-check",{ref:"EW",staticClass:"mr-2",attrs:{name:"editorWindow"}},[n("tooltip",{attrs:{content:t.editorWindowHint,disabled:!t.editorWindowHint}},[n("span",{domProps:{textContent:t._s(t.i18n("optionEditorWindow"))}})])],1),n("setting-check",{directives:[{name:"show",rawName:"v-show",value:(t.$refs.EW||{}).value,expression:"($refs.EW || {}).value"}],attrs:{name:"editorWindowSimple",label:t.i18n("optionEditorWindowSimple")}})],1),n("div",{staticClass:"ml-2c"},[n("label",[n("locale-group",{attrs:{"i18n-key":"labelPopupSort"}},t._l(["filtersPopup.sort"],e=>n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[opt]"}],key:e,on:{change:n=>{var s=Array.prototype.filter.call(n.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,e,n.target.multiple?s:s[0])}}},t._l(t.items[e].enum,(s,a)=>n("option",{key:e+":"+a,domProps:{value:a,textContent:t._s(s)}})),0)),0)],1),n("label",t._l(["filtersPopup.hideDisabled"],e=>n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[opt]"}],key:e,on:{change:n=>{var s=Array.prototype.filter.call(n.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,e,n.target.multiple?s:s[0])}}},t._l(t.items[e].enum,(s,a)=>n("option",{key:e+":"+a,domProps:{value:a,textContent:t._s(s)}})),0)),0),n("setting-check",{directives:[{name:"show",rawName:"v-show",value:!t.settings["filtersPopup.hideDisabled"],expression:"!settings['filtersPopup.hideDisabled']"}],attrs:{name:"filtersPopup.enabledFirst",label:t.i18n("optionPopupEnabledFirst")}})],1),n("div",{staticClass:"mr-2c"},[n("label",[n("span",{domProps:{textContent:t._s(t.i18n("labelBadge"))}}),t._l(["showBadge"],e=>n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[opt]"}],key:e,on:{change:n=>{var s=Array.prototype.filter.call(n.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,e,n.target.multiple?s:s[0])}}},t._l(t.items[e].enum,(s,a)=>n("option",{key:e+":"+a,domProps:{value:a,textContent:t._s(s)}})),0))],2),n("label",[n("span",{domProps:{textContent:t._s(t.i18n("labelBadgeColors"))}}),t._l(t.items.badgeColor.enum,(e,s)=>n("tooltip",{key:"bc:"+s,attrs:{content:e}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings[s],expression:"settings[name]"}],attrs:{type:"color"},domProps:{value:t.settings[s]},on:{input:e=>{e.target.composing||t.$set(t.settings,s,e.target.value)}}})])),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isCustomBadgeColor,expression:"isCustomBadgeColor"}],staticClass:"ml-1",domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onResetBadgeColors}})],2)])]),n("section",{staticClass:"mb-1c"},[n("h3",{domProps:{textContent:t._s(t.i18n("titleScriptUpdated"))}}),n("div",[n("label",[n("locale-group",{attrs:{"i18n-key":"labelAutoUpdate"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoUpdate,expression:"settings.autoUpdate"}],attrs:{type:"number",min:"0",max:"365",step:"1/"},domProps:{value:t.settings.autoUpdate},on:{input:e=>{e.target.composing||t.$set(t.settings,"autoUpdate",e.target.value)}}})])],1)]),n("div",[n("setting-check",{attrs:{name:"notifyUpdates",label:t.i18n("labelNotifyUpdates")}}),n("setting-check",{staticClass:"ml-2",attrs:{name:"notifyUpdatesGlobal",label:t.i18n("labelNotifyUpdatesGlobal")}})],1)]),n("section",{staticClass:"mb-2c"},[n("h3",{domProps:{textContent:t._s(t.i18n("labelBackup"))}}),n("vm-import"),n("vm-export")],1),n("vm-sync"),n("div",{staticClass:"show-advanced"},[n("button",{on:{click:e=>{t.showAdvanced=!t.showAdvanced}}},[n("span",{domProps:{textContent:t._s(t.i18n("labelAdvanced"))}}),n("icon",{class:{rotate:t.showAdvanced},attrs:{name:"arrow"}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[n("section",{staticClass:"mb-1c"},[n("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),n("div",[n("label",[n("locale-group",{attrs:{"i18n-key":"optionUiTheme"}},t._l(["uiTheme"],e=>n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[opt]"}],key:e,on:{change:n=>{var s=Array.prototype.filter.call(n.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,e,n.target.multiple?s:s[0])}}},t._l(t.items[e].enum,(s,a)=>n("option",{key:e+":"+a,domProps:{value:a,textContent:t._s(s)}})),0)),0)],1)]),n("div",{staticClass:"mr-2c"},[n("label",[n("span",{domProps:{textContent:t._s(t.i18n("labelInjectionMode"))}}),t._l(["defaultInjectInto"],e=>n("select",{directives:[{name:"model",rawName:"v-model",value:t.settings[e],expression:"settings[opt]"}],key:e,on:{change:n=>{var s=Array.prototype.filter.call(n.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,e,n.target.multiple?s:s[0])}}},t._l(t.items[e].enum,(s,a)=>n("option",{key:e+":"+a,domProps:{value:a,textContent:t._s(a)}})),0)),n("a",{staticClass:"ml-1",attrs:{href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnInjectionMode"))}})],2),n("label",[n("setting-check",{attrs:{name:"xhrInject"}}),n("tooltip",{attrs:{content:t.i18n("labelXhrInjectHint")}},[n("span",{domProps:{textContent:t._s(t.i18n("labelXhrInject"))}})])],1)]),n("div",[n("locale-group",{staticClass:"mr-1c",attrs:{"i18n-key":"labelExposeStatus"}},t._l(t.expose,e=>{var s=e[0],a=e[1];return n("setting-check",{key:a,staticClass:"mr-1c valign-tb",attrs:{name:"expose."+s}},[n("span",{domProps:{textContent:t._s(a)}}),n("a",{attrs:{href:"https://"+a,target:"_blank",rel:"noopener noreferrer"}},[t._v("\u2197")])])}),1)],1)]),n("vm-editor"),n("vm-template"),n("vm-blacklist"),n("vm-css")],1)],1)},Be=[],He=p(6),Fe=p(20),Ke=p(17);function We(t){return new a((e,n)=>{const s=o.createElement("script");s.src=t,s.onload=e,s.onerror=n,o.body.append(s)})}var Je=s(Ke.m)(async()=>{await We("/public/lib/zip-no-worker.min.js");const{zip:t}=i,e=["/public/lib/z-worker.js"];return t.configure({workerScripts:{deflate:e,inflate:e}}),t}),Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{ref:"buttonImport",domProps:{textContent:t._s(t.i18n("buttonImportData"))},on:{click:t.pickBackup}}),n("tooltip",{attrs:{content:t.i18n("hintVacuum")}},[n("button",{attrs:{disabled:t.vacuuming},domProps:{textContent:t._s(t.labelVacuum)},on:{click:t.vacuum}})]),n("div",{staticClass:"mt-1 flex flex-col"},[n("setting-check",{attrs:{name:"importScriptData",label:t.i18n("labelImportScriptData")}}),n("setting-check",{attrs:{name:"importSettings",label:t.i18n("labelImportSettings")}})],1),n("table",{staticClass:"import-report"},t._l(t.reports,(e,s)=>{var a=e.type,o=e.name,i=e.text;return n("tr",{key:s,attrs:{"data-type":a}},[o?n("td",{domProps:{textContent:t._s(o)}}):t._e(),n("td",{attrs:{colspan:o?null:2},domProps:{textContent:t._s(i)}})])}),0)],1)},Ge=[];const qe=[];async function Xe(t){if(!t)return;qe.length=0;const n=await Je(),o=new n.ZipReader(new n.BlobReader(t)),i=await o.getEntries().catch(x)||[];if(qe.length)return;x("",t.name,"info");const r={},l=i.reduce((t,e)=>{var n;return t+(null==(n=e.filename)?void 0:n.endsWith(".user.js"))},0),c=i.find(t=>{var e;return"violentmonkey"===(null==(e=t.filename)?void 0:e.toLowerCase())}),d=c&&await m(c)||{};function p(t,e){try{return JSON.parse(t)}catch(t){x(t,e.filename,null)}}function u(t,e){return a.all(i.map(async n=>{const{filename:s}=n;if(null==s?void 0:s.endsWith(e)){const a=await m(n);return a&&t(n,a,s.slice(0,-e.length))}}))}async function m(t){const e=await t.getData(new n.TextWriter);return t.filename.endsWith(".js")?e:p(e,t)}async function g(t,e,n){var a,o,i,l;const{filename:c}=t,p=d.scripts[n],u=zt()({code:e},p&&{custom:p.custom,config:zt()({enabled:null!=(a=p.enabled)?a:1,shouldUpdate:null!=(o=p.update)?o:1},p.config),position:p.position,props:{lastModified:p.lastModified||(null==(i=p.props)?void 0:i.lastModified)||+t.lastModDate,lastUpdated:p.lastUpdated||(null==(l=p.props)?void 0:l.lastUpdated)||+t.lastModDate}});try{r[n]=(await s(h.y)("ParseScript",u)).update.props.uri,y(c)}catch(t){x(t,c,"script")}}async function f(t,e,n){const{meta:s,settings:a={},options:o}=e;if(!s||!o)return;const i=o.override||{};qe[0].text="Tampermonkey",d.scripts[n]={config:{enabled:!1!==a.enabled?1:0,shouldUpdate:o.check_for_updates?1:0},custom:{downloadURL:"string"==typeof s.file_url?s.file_url:void 0,noframes:null==i.noframes?void 0:+!!i.noframes,runAt:/^document-(start|body|end|idle)$/.test(o.run_at)?o.run_at:void 0,exclude:C(i.use_excludes),include:C(i.use_includes),match:C(i.use_matches),origExclude:!1!==i.merge_excludes,origInclude:!1!==i.merge_includes,origMatch:!1!==i.merge_matches},position:+a.position||void 0,props:{lastModified:+s.modified,lastUpdated:+s.modified}}}async function b(t,e,n){qe[0].text="Tampermonkey",d.values[r[n]]=e.data}function x(t,e,n="critical"){qe.push({text:t,name:e,type:n})}function y(t=""){const e=s.keys(r).length,n=s(h.p)("msgImported",[e===l?e:`${e} / ${l}`]);return qe[0].name=n,qe[0].text=t,n}function w(t,n){return s.entries(t||{}).map(n).filter(e)}function C(t){return s(h.h)(t).filter(t=>"string"==typeof t)}d.scripts||(d.scripts={}),d.values||(d.values={}),await u(f,".options.json"),await u(g,".user.js"),v.a.get("importScriptData")&&(await u(b,".storage.json"),s(h.y)("SetValueStores",w(d.values,([t,e])=>e&&{where:{uri:t},store:e}))),v.a.get("importSettings")&&s(h.y)("SetOptions",w(d.settings,([t,e])=>"sync"!==t&&{key:t,value:e})),s(h.y)("CheckPosition"),s(R.c)({text:y()}),await o.close()}function Ze(t){let e;const n=e=>t.classList.toggle("drop-allowed",e),a=()=>n(!1),r=()=>{clearTimeout(e),e=setTimeout(a,250)},l=t=>{clearTimeout(e);const s=t.dataTransfer.types.includes("Files");s&&t.preventDefault(),n(s)},d=async e=>{e.preventDefault(),n(!1);try{const n=e.dataTransfer.files[0];await s(R.b)(s(h.p)("buttonImportData")),t.disabled=!0,await Xe(n),t.disabled=!1}catch(t){}};return()=>{const t="#settings"===i.location.hash,e=o[`${t?"add":"remove"}EventListener`];c(e,o,"dragend",a),c(e,o,"dragleave",r),c(e,o,"dragover",l),c(e,o,"drop",d)}}var Qe={components:{SettingCheck:A.a,Tooltip:E.a},data(){return{reports:qe,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const t=o.createElement("input");t.type="file",t.accept=".zip",t.onchange=()=>{var e;return Xe(null==(e=t.files)?void 0:e[0])},t.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming");const{fixes:t,errors:e}=await s(h.y)("Vacuum"),n=null==e?void 0:e.join("\n");this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")+(t?` (${t})`:""),n&&s(R.c)({text:n})}},mounted(){const t=Ze(this.$refs.buttonImport);i.addEventListener("hashchange",t),t()}},tn=(p(158),s(M.a)(Qe,Ye,Ge,!1,null,null,null).exports),en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"export"},[n("div",{staticClass:"flex flex-wrap center-items mr-1c"},[n("button",{attrs:{disabled:t.exporting},domProps:{textContent:t._s(t.i18n("buttonExportData"))},on:{click:t.handleExport}}),n("setting-text",{ref:"tpl",staticClass:"tpl flex flex-1 center-items ml-1c",attrs:{name:"exportNameTemplate","has-reset":"","has-save":!1,rows:1}}),n("tooltip",{attrs:{content:t.i18n("msgDateFormatInfo",t.dateTokens),placement:"left"}},[n("a",{attrs:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}},[n("icon",{attrs:{name:"info"}})],1)]),n("span",{attrs:{hidden:""},domProps:{textContent:t._s(t.getFileName())}})],1),n("div",{staticClass:"mt-1"},[n("setting-check",{attrs:{name:"exportValues",label:t.i18n("labelExportScriptData")}})],1),t.store.ffDownload?n("modal",{attrs:{transition:"in-out",visible:!!t.store.ffDownload.url},on:{close:e=>{t.store.ffDownload={}}}},[n("div",{staticClass:"modal-content"},[n("a",{attrs:{download:t.store.ffDownload.name,href:t.store.ffDownload.url}},[t._v(" Right click and save as"),n("br"),n("strong",[t._v("scripts.zip")])])])]):t._e()],1)},nn=[],sn=p(47),an=p.n(sn);const on=864e5,rn=6048e5,ln=t=>`${t<10?"0":""}${t}`,cn=t=>`${(t<10?"00":t<100&&"0")||""}${t}`,dn=t=>t.getFullYear(),pn=t=>Math.floor((t-new Date(dn(t),0,1))/on)+1,un=t=>Math.floor((t-new Date(dn(t),0,1))/rn)+1,hn=(t,e)=>t.toLocaleString([navigator.language],e),mn={M:t=>t.getMonth()+1,MM:t=>ln(t.getMonth()+1),MMM:t=>hn(t,{month:"short"}),MMMM:t=>hn(t,{month:"long"}),Q:t=>Math.floor(t.getMonth()/3)+1,D:t=>t.getDate(),DD:t=>ln(t.getDate()),DDD:pn,DDDD:t=>cn(pn(t)),d:t=>t.getDay(),dd:t=>hn(t,{weekday:"short"}).slice(0,2),ddd:t=>hn(t,{weekday:"short"}),dddd:t=>hn(t,{weekday:"long"}),w:un,ww:t=>ln(un(t)),Y:dn,YY:t=>ln(dn(t)%100),YYYY:t=>`${dn(t)}`.slice(-4),H:t=>t.getHours(),HH:t=>ln(t.getHours()),m:t=>t.getMinutes(),mm:t=>ln(t.getMinutes()),s:t=>t.getSeconds(),ss:t=>ln(t.getSeconds()),S:t=>`${+t}`.slice(-3,-2),SS:t=>`${+t}`.slice(-3,-1),SSS:t=>`${+t}`.slice(-3),ZZ:t=>{const e=t.getTimezoneOffset(),n=Math.abs(e);return`${e<0?"-":"+"}${ln(Math.floor(n/60))}${ln(Math.floor(n%60))}`}};let gn;function vn(t,e=new Date){return gn||(gn=new RegExp(`${/\[([^[\]]*)]/.source}|${s.keys(mn).sort((t,e)=>e.length-t.length).join("|")}`,"g")),t.replace(gn,(t,n)=>c(r,mn,t)?mn[t](e):null!=n?n:t)}var fn=p(14),bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"text",staticClass:"monospace-font",class:{"has-error":t.parsedData.error},attrs:{spellcheck:"false",disabled:t.disabled,title:t.parsedData.error,placeholder:t.placeholder,rows:t.rows},domProps:{value:t.value},on:{change:t.onChange,input:e=>{e.target.composing||(t.value=e.target.value)}}}),t._v(" "),t.hasSave?n("button",{attrs:{disabled:t.disabled||!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.onSave}}):t._e(),t.hasReset?n("button",{attrs:{disabled:t.disabled||!t.canReset},domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onReset}}):t._e(),t._t("default")],2)},xn=[],yn={props:{name:String,json:e,disabled:e,hasSave:{type:e,default:!0},hasReset:e,rows:Number},data:()=>({value:null,placeholder:null,savedValue:null}),computed:{parsedData(){let t,e;if(this.json)try{t=JSON.parse(this.value)}catch(t){e=t.message||t}else t=this.value;return{value:t,error:e}},isDirty(){return!s(V.b)(this.parsedData.value,this.savedValue||"")},canSave(){return!this.parsedData.error&&this.isDirty},canReset(){return!s(V.b)(this.parsedData.value,this.defaultValue||"")}},watch:{isDirty(t){this.toggleUnloadSentry(t)}},created(){const t=this.json?t=>JSON.stringify(t,null,"  "):t=>Array.isArray(t)?t.join("\n"):t||"",e=s(V.h)(Fe.a,this.name);this.revoke=s(D.a)(this.name,e=>{this.savedValue=e,this.value=t(e)}),this.defaultValue=e,this.placeholder=t(e),this.toggleUnloadSentry=s(f.a)(()=>{this.value=t(this.savedValue)})},beforeDestroy(){this.revoke(),this.toggleUnloadSentry(!1)},methods:{onChange(){!this.hasSave&&this.canSave&&this.onSave()},onSave(){v.a.set(this.name,this.parsedData.value),this.$emit("save")},onReset(){const t=this.$refs.text;t.focus(),this.hasSave?(t.select(),o.execCommand("insertText",!1,this.placeholder)||(this.value=this.placeholder)):v.a.set(this.name,this.defaultValue)}}},wn=s(M.a)(yn,bn,xn,!1,null,null,null).exports;function Cn(t,e){const n=URL.createObjectURL(t),a=o.createElement("a");a.href=n,a.download=e||"",a.dispatchEvent(new MouseEvent("click")),s(h.t)(3e3).then(()=>URL.revokeObjectURL(n))}function kn(t,e){const n=fn.a.firefox;if(n&&("win"===fn.a.os?n<56:"mac"===fn.a.os?n<61:n<63)){const n=new FileReader;n.onload=()=>{x.ffDownload={name:e,url:n.result}},n.readAsDataURL(t)}else Cn(t,e)}function _n(t){return t.replace(/[\\/:*?"<>|]/g,"-")}async function Sn(){const t=v.a.get("exportValues"),e=await s(h.y)("ExportZip",{values:t}),n={},o={scripts:{},settings:v.a.get()};delete o.settings.sync,t&&(o.values={});const i=(s(V.h)(e,"items")||[]).map(({script:a,code:i})=>{let r=_n(s(h.n)(a));n[r]?(n[r]+=1,r=`${r}_${n[r]}`):n[r]=1;const{lastModified:l,lastUpdated:c}=a.props,d={custom:a.custom,config:a.config,position:a.props.position,lastModified:l,lastUpdated:c};if(t){const t=e.values[a.props.id];t&&(o.values[a.props.uri]=t)}return o.scripts[r]=d,{name:`${r}.user.js`,content:i,lastModDate:new Date(c||l)}});i.push({name:"violentmonkey",content:JSON.stringify(o)});const r=await Je(),l=new r.BlobWriter("application/zip"),c=new r.ZipWriter(l,{bufferedWrite:!0,keepOrder:!1});return await a.all(i.map(t=>c.add(t.name,new r.TextReader(t.content),{lastModDate:t.lastModDate}))),await c.close()}d&&(x.ffDownload={});var Pn={components:{SettingCheck:A.a,SettingText:wn,Icon:C.a,Modal:an.a,Tooltip:E.a},data:()=>({store:x,dateTokens:s.keys(mn).join(", "),exporting:!1}),methods:{async handleExport(){try{this.exporting=!0,kn(await Sn(),this.getFileName())}finally{this.exporting=!1}},getFileName(){var t;const{tpl:e}=this.$refs;return e&&`${vn((null==(t=e.value)?void 0:t.trim())||e.defaultValue)}.zip`}}},$n=(p(160),s(M.a)(Pn,en,nn,!1,null,null,null).exports),Un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-1c"},[n("h3",{domProps:{textContent:t._s(t.i18n("labelSync"))}}),t.state?n("div",{staticClass:"flex flex-wrap center-items"},[n("span",{domProps:{textContent:t._s(t.i18n("labelSyncService"))}}),n("select",{staticClass:"mx-1",domProps:{value:t.syncConfig.current},on:{change:t.onSyncChange}},t._l(t.syncServices,e=>n("option",{key:e.name,domProps:{value:e.name,textContent:t._s(e.displayName)}})),0),t.service.name&&"oauth"===t.state.authType?n("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.state.label)},on:{click:t.onAuthorize}}):t._e(),t.service.name?n("tooltip",{staticClass:"stretch-self flex mr-1",attrs:{content:t.i18n("labelSync")}},[n("button",{staticClass:"flex center-items",attrs:{disabled:!t.state.canSync},on:{click:t.onSync}},[n("icon",{attrs:{name:"refresh"}})],1)]):t._e(),t.state?n("p",{domProps:{textContent:t._s(t.state.message)}}):t._e()],1):t._e(),t.state&&"password"===t.state.authType?n("fieldset",{staticClass:"mt-1c"},[n("label",{staticClass:"sync-server-url"},[n("span",{domProps:{textContent:t._s(t.i18n("labelSyncServerUrl"))}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.serverUrl,expression:"state.userConfig.serverUrl"}],attrs:{type:"url",disabled:!t.state.canAuthorize},domProps:{value:t.state.userConfig.serverUrl},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"serverUrl",e.target.value)}}})]),n("div",{staticClass:"mr-2c"},[n("label",[n("span",{domProps:{textContent:t._s(t.i18n("labelSyncUsername"))}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.username,expression:"state.userConfig.username"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.username},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"username",e.target.value)}}})]),n("label",{staticClass:"inline-block"},[n("span",{domProps:{textContent:t._s(t.i18n("labelSyncPassword"))}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.password,expression:"state.userConfig.password"}],attrs:{type:"password",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.password},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"password",e.target.value)}}})]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.anonymous,expression:"state.userConfig.anonymous"}],attrs:{type:"checkbox",disabled:!t.state.canAuthorize},domProps:{checked:Array.isArray(t.state.userConfig.anonymous)?t._i(t.state.userConfig.anonymous,null)>-1:t.state.userConfig.anonymous},on:{change:e=>{var n=t.state.userConfig.anonymous,s=e.target,a=!!s.checked;if(Array.isArray(n)){var o=null,i=t._i(n,o);s.checked?i<0&&t.$set(t.state.userConfig,"anonymous",n.concat([o])):i>-1&&t.$set(t.state.userConfig,"anonymous",n.slice(0,i).concat(n.slice(i+1)))}else t.$set(t.state.userConfig,"anonymous",a)}}}),n("span",{domProps:{textContent:t._s(t.i18n("labelSyncAnonymous"))}})])]),n("div",[n("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:e=>(e.preventDefault(),t.onSaveUserConfig(e))}})])]):t._e(),t.service&&t.service.name?n("div",[n("setting-check",{attrs:{name:"syncScriptStatus",label:t.i18n("labelSyncScriptStatus")}})],1):t._e()])},En=[];const Rn="sync.current",An={current:""};s(D.a)(Rn,t=>{An.current=t||""});var Dn={components:{SettingCheck:A.a,Icon:C.a,Tooltip:E.a},data:()=>({syncConfig:An,store:x}),computed:{syncServices(){const t=this.store.sync;return t&&t.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...t]:null},service(){if(this.syncServices){const t=this.syncConfig.current||"";let e=this.syncServices.find(e=>e.name===t);return e||(console.warn("Invalid current service:",t),e=this.syncServices[0]),e}return null},state(){const{service:t}=this;if(t){const e=["idle","error"].includes(t.syncState)&&["no-auth","unauthorized","error","authorized"].includes(t.authState),n=e&&"authorized"===t.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:e,canSync:n,authType:t.properties.authType,userConfig:t.userConfig||{}}}return null}},methods:{onSaveUserConfig(){s(h.x)("SyncSetConfig",this.state.userConfig).catch(h.u)},onSyncChange(t){const{value:e}=t.target;v.a.set(Rn,e)},onAuthorize(){const{service:t}=this;["authorized"].includes(t.authState)?s(h.x)("SyncRevoke"):["no-auth","unauthorized","error"].includes(t.authState)&&s(h.x)("SyncAuthorize")},onSync(){s(h.x)("SyncStart")},getMessage(){const{service:t}=this;if("initializing"===t.authState)return this.i18n("msgSyncInit");if("no-auth"===t.authState)return this.i18n("msgSyncNoAuthYet");if("error"===t.authState)return this.i18n("msgSyncInitError");if("unauthorized"===t.authState)return this.i18n("msgSyncInitError");if("error"===t.syncState)return this.i18n("msgSyncError");if("ready"===t.syncState)return this.i18n("msgSyncReady");if("syncing"===t.syncState){let e="";return t.progress&&t.progress.total&&(e=` (${t.progress.finished}/${t.progress.total})`),this.i18n("msgSyncing")+e}if(t.lastSync){const e=new Date(t.lastSync).toLocaleString();return this.i18n("lastSync",e)}},getLabel(){const{service:t}=this;return"authorizing"===t.authState?this.i18n("labelSyncAuthorizing"):"authorized"===t.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},In=(p(162),s(M.a)(Dn,Un,En,!1,null,null,null).exports),Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h3",{domProps:{textContent:t._s(t.i18n("labelEditor"))}}),n("div",{staticClass:"mr-1c flex center-items"},[n("span",{domProps:{textContent:t._s(t.i18n("labelTheme"))}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.theme,expression:"theme"}],attrs:{disabled:t.busy,title:t.css},on:{change:e=>{var n=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.theme=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:t.DEFAULT,textContent:t._s(t.i18n("labelRunAtDefault"))}}),n("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelBadgeNone"))}}),!t.themes&&t.theme&&t.theme!==t.DEFAULT?n("option",{attrs:{"data-active":""},domProps:{textContent:t._s(t.theme)}}):t._e(),t._l(t.themes,(e,s)=>n("option",{key:"th:"+s,domProps:{textContent:t._s(e)}}))],2),n("button",{attrs:{disabled:t.busy},domProps:{textContent:t._s(t.i18n("buttonDownloadThemes"))},on:{click:t.getThemes}}),n("a",{attrs:{href:t.ghURL,target:"_blank"}},[t._v("\u2197")]),n("p",{domProps:{textContent:t._s(t.error)}})]),n("p",{staticClass:"my-1",domProps:{innerHTML:t._s(t.i18n("descEditorOptions"))}}),n("setting-text",{ref:"editor",attrs:{name:"editor",json:!0,"has-reset":!0},on:{save:t.onSave}},[n("button",{domProps:{textContent:t._s(t.i18n("buttonShowEditorState"))},on:{click:t.toggleStateHint}})]),n("pre",{staticClass:"monospace-font dim-hint",domProps:{textContent:t._s(t.hint)}})],1)},Ln=[];const Tn="editorTheme",Mn="editorThemeName",zn="editorThemeNames",Vn="github.com",On="codemirror/CodeMirror",jn="master",Bn="theme",Hn=`https://${Vn}/${On}/tree/${jn}/${Bn}`,Fn="default",Kn=()=>({hint:null,busy:!1,error:null,css:null,theme:Fn,themes:[],DEFAULT:Fn,ghURL:Hn}),Wn=20,Jn=100,Yn=t=>t?t.split("\n",Wn+1).map((t,e)=>(e===Wn?"...":t.length>Jn&&`${t.slice(0,Jn)}...`)||t).join("\n"):null;var Gn={data:Kn,components:{SettingText:wn},beforeDestroy(){this.revokers.forEach(t=>t()),this.revokers=null},async mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean),this.revokers||([this.themes]=await a.all([O.a.base.getOne(zn),v.a.ready]),this.css=Yn(v.a.get(Tn)),this.revokers=[["theme",Mn]].map(([t,e])=>{const n=e=>{this[t]=null!=e?e:Kn()[t]};return n(v.a.get(e)),s(D.a)(e,n)}),this.$watch("theme",async t=>{const e=t&&t!==Fn&&`https://raw.githubusercontent.com/${On}/${jn}/${Bn}/${t}.css`,n=e&&await this.fetch(e);v.a.set(Mn,!e||n?t:Fn),v.a.set(Tn,n||""),this.css=Yn(n)}))},methods:{async fetch(t,e="text"){const n=o.activeElement;this.busy=!0;try{const s=await(await fetch(t))[e]();return this.error=null,s}catch(t){this.error=t.message||t.code||`${t}`}finally{this.busy=!1,this.$nextTick(()=>null==n?void 0:n.focus())}},async getThemes(){var t;const e=`https://api.${Vn}/repos/${On}/contents/${Bn}`,n=null==(t=await this.fetch(e,"json"))?void 0:t.map(t=>/[-\w]+\.css$/.test(t.name)&&"file"===t.type&&t.name.slice(0,-4)).filter(t=>t&&t!==Fn);n&&(this.themes=n,O.a.base.set(zn,n))},onSave(){s(R.c)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(t){const e=t.target,{selectionStart:n,selectionEnd:s,value:a}=e,i={false:"true",true:"false"}[a.slice(n,s)];i&&!o.execCommand("insertText",!1,i)&&(e.value=a.slice(0,n)+i+a.slice(s),e.setSelectionRange(n+i.length,n+i.length),e.dispatchEvent(new Event("input")),e.onblur=()=>e.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const t=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],e={};s.entries(zt()({},(await a.resolve().then(p.t.bind(null,8,7))).defaults,{},(await a.resolve().then(p.bind(null,48))).default.data().cmDefaults,{},v.a.get("editor"))).sort(([t],[e])=>t<e?-1:t>e).filter(([e,n])=>!t.includes(e)&&"function"!=typeof n).forEach(([t,n])=>{e[t]=n}),this.hint=JSON.stringify(e,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>i.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},qn=(p(164),s(M.a)(Gn,Nn,Ln,!1,null,null,null).exports),Xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h3",{domProps:{textContent:t._s(t.i18n("labelScriptTemplate"))}}),n("setting-text",{attrs:{name:"scriptTemplate","has-reset":""},on:{save:t.onSave}})],1)},Zn=[],Qn={components:{SettingText:wn},methods:{onSave(){s(R.c)({text:this.i18n("msgSavedScriptTemplate")})}}},ts=s(M.a)(Qn,Xn,Zn,!1,null,null,null).exports,es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h3",{domProps:{textContent:t._s(t.i18n("labelBlacklist"))}}),n("p",[t._v(" "+t._s(t.i18n("descBlacklist"))+" "),n("a",{attrs:{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnBlacklist"))}})]),n("setting-text",{attrs:{name:"blacklist"},on:{save:t.onSave}})],1)},ns=[],ss={components:{SettingText:wn},methods:{onSave(){s(R.c)({text:this.i18n("msgSavedBlacklist")}),s(h.x)("BlacklistReset")}}},as=s(M.a)(ss,es,ns,!1,null,null,null).exports,os=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h3",{domProps:{textContent:t._s(t.i18n("labelCustomCSS"))}}),n("p",{domProps:{innerHTML:t._s(t.i18n("descCustomCSS"))}}),n("setting-text",{attrs:{name:"customCSS"},on:{save:t.onSave}})],1)},is=[],rs={components:{SettingText:wn},methods:{onSave(){s(R.c)({text:this.i18n("msgSavedCustomCSS")})}}},ls=s(M.a)(rs,os,is,!1,null,null,null).exports;const cs={badgeColor:s(h.p)("titleBadgeColor"),badgeColorBlocked:s(h.p)("titleBadgeColorBlocked")},ds=s.keys(cs),ps={enum:cs,normalize:(t,e)=>/^#[0-9a-f]{6}$/i.test(t)?t:Fe.a[e]},us=zt()({autoUpdate:{normalize:t=>Math.max(0,Math.min(365,+t||0))},defaultInjectInto:{enum:{[He.e]:"",[He.h]:"",[He.f]:""}},showBadge:{enum:{"":s(h.p)("labelBadgeNone"),unique:s(h.p)("labelBadgeUnique"),total:s(h.p)("labelBadgeTotal")}},"filtersPopup.hideDisabled":{enum:{"":s(h.p)("optionPopupShowDisabled"),group:s(h.p)("optionPopupGroupDisabled"),hide:s(h.p)("optionPopupHideDisabled")}},"filtersPopup.sort":{enum:{exec:s(h.p)("filterExecutionOrder"),alpha:s(h.p)("filterAlphabeticalOrder")}},uiTheme:{enum:{"":s(h.p)("optionUiThemeAuto"),dark:s(h.p)("optionUiThemeDark"),light:s(h.p)("optionUiThemeLight")}}},c(V.f,cs,()=>ps)),hs=(t,e)=>c(r,us[e].enum,t)?t:s.keys(us[e].enum)[0],ms=(t,e)=>s(h.d)((n,s)=>{(n=e(n,t))!==(s=e(s,t))&&v.a.set(t,n)},50),gs=c(V.f,us,()=>null);var vs={components:{Icon:C.a,VmImport:tn,VmExport:$n,VmSync:In,VmEditor:qn,VmTemplate:ts,VmBlacklist:as,VmCss:ls,SettingCheck:A.a,LocaleGroup:z,Tooltip:E.a},data:()=>({showAdvanced:!1,expose:null,items:us,settings:gs}),computed:{editorWindowHint(){var e;return(null==(e=t.chrome.windows)?void 0:e.onBoundsChanged)?null:this.i18n("optionEditorWindowHint")},isCustomBadgeColor:()=>ds.some(t=>gs[t]!==Fe.a[t])},methods:{onResetBadgeColors(){ds.forEach(t=>{gs[t]=Fe.a[t]})}},created(){this.revokers=[],c(V.c,us,([t,{normalize:e=hs}])=>{this.revokers.push(s(D.a)(t,n=>{gs[t]=e(n,t)})),this.$watch(()=>gs[t],ms(t,e))}),this.expose=s.keys(v.a.get("expose")).map(t=>[t,decodeURIComponent(t)]),Je()},beforeDestroy(){this.revokers.forEach(t=>{t()})}},fs=(p(166),s(M.a)(vs,je,Be,!1,null,null,null).exports),bs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-about mb-2c"},[n("h1",{staticClass:"mt-0 mr-1c"},[n("span",{domProps:{textContent:t._s(t.name)}}),n("small",{domProps:{textContent:t._s("v"+t.version)}})]),n("p",{domProps:{textContent:t._s(t.i18n("extDescription"))}}),n("div",[n("a",{attrs:{href:"https://violentmonkey.github.io/donate/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelDonate"))}}),n("span",{staticClass:"text-red"},[t._v(" \u2665")])]),n("div",[n("label",{domProps:{textContent:t._s(t.i18n("labelRelated"))}}),n("ul",[n("li",[n("a",{attrs:{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHomepage"))}})]),n("li",[n("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelFeedback"))}})]),n("li",[n("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelContributors"))}})]),n("li",[n("a",{attrs:{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelPrivacyPolicy"))}})])])]),n("div",[n("label",{domProps:{textContent:t._s(t.i18n("labelCurrentLang"))}}),n("span",{staticClass:"current",domProps:{textContent:t._s(t.language)}}),t._v(" | "),n("a",{attrs:{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHelpTranslate"))}})])])},xs=[],ys={data(){const t=browser.runtime.getManifest();return{name:t.name,version:t.version,language:browser.i18n.getUILanguage()}}},ws=(p(168),s(M.a)(ys,bs,xs,!1,null,null,null).exports);const Cs=[{name:"scripts",comp:Oe,label:s(h.p)("sideMenuInstalled")},{name:"settings",comp:fs,label:s(h.p)("sideMenuSettings")},{name:"about",comp:ws,label:s(h.p)("sideMenuAbout")}],ks=s(h.p)("extName"),_s="!editScript";var Ss={components:{Icon:C.a},data(){const[t,e]=x.route.paths;return{tabs:Cs,aside:!1,canRenderAside:"scripts"!==t||"_new"!==e&&!Number(e),store:x}},computed:{current(){const t=this.store.route.paths[0];return Cs.find(e=>e.name===t)||Cs[0]},tabComponent(){return this.current.comp}},watch:{"store.title"(t){o.title=t?`${t} - ${ks}`:ks},"store.route.paths"(){this.canRenderAside=!0,this.updateContext()}},methods:{updateContext(){const t="scripts"===this.current.name,{paths:e}=this.store.route;k.c.setContext("editScript",t&&e[1]),k.c.setContext("tabScripts",t&&!e[1])},switchTab(t){const e=this.tabs.indexOf(this.current),n=this.tabs[(e+t+this.tabs.length)%this.tabs.length];i.location.hash=(null==n?void 0:n.name)||""}},mounted(){this.disposeList=[k.c.register("a-pageup",()=>this.switchTab(-1),{condition:_s}),k.c.register("a-pagedown",()=>this.switchTab(1),{condition:_s})],k.c.enable(),this.updateContext()},beforeDestroy(){var t;null==(t=this.disposeList)||t.forEach(t=>{t()}),k.c.disable()}},Ps=(p(170),s(M.a)(Ss,y,w,!1,null,null,null).exports);function $s(){Rs();const t=new u.default({render:t=>t(Ps)}).$mount();o.body.append(t.$el)}async function Us(t){const n=t.meta||{},a=s(h.m)(n,"name"),o=[n.name,a,n.description,s(h.m)(n,"description"),t.custom.name,t.custom.description].filter(e).join("\n"),i=t.custom.name||a,r=i.toLowerCase();t.$cache={search:o,name:i,lowerName:r},await s(g.a)(t,x.cache)||(t.safeIcon=`/public/images/icon${x.HiDPI?128:t.config.removed?32:38}.png`)}async function Es(){const t=x.route.paths[1],n=t?[+t].filter(e):null,[{cache:o,scripts:i,sync:r}]=await a.all([s(h.y)("GetData",n,{retry:!0}),v.a.ready]);x.cache=o,null==i||i.forEach(Us),x.scripts=i,x.sync=r,x.loading=!1}function Rs(){x.loading=!0,Es(),s.assign(m.a,{ScriptsUpdated(){Es()},UpdateSync(t){x.sync=t},AddScript({update:t}){t.message="",Us(t),x.scripts.push(t)},UpdateScript(t){if(!t)return;const e=x.scripts.findIndex(e=>e.props.id===t.where.id);if(e>=0){const n=s.assign({},x.scripts[e],t.update);n.error&&!t.update.error&&(n.error=null),u.default.set(x.scripts,e,n),Us(n)}},RemoveScript(t){const e=x.scripts.findIndex(e=>e.props.id===t);e>=0&&x.scripts.splice(e,1)}})}u.default.prototype.i18n=h.p,s.assign(x,{loading:!1,sync:[],title:null}),$s()}]))}