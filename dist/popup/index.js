{const e=function(){return this||globalThis}(),{Boolean:n,Error:t,Object:a,Promise:i,document:s,window:o}=e,{hasOwnProperty:r,toString:l}={},c=a.call.bind(a.call);e.chrome.app,(e=>{function n(n){for(var i,o,l=n[0],c=n[1],d=n[2],u=0,m=[];u<l.length;u++)o=l[u],a.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(i in c)a.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(p&&p(n);m.length;)m.shift()();return r.push.apply(r,d||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],a=!0,i=1;i<t.length;i++){var o=t[i];0!==s[o]&&(a=!1)}a&&(r.splice(n--,1),e=l(l.s=t[0]))}return e}var i={},s={6:0},r=[];function l(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=i,l.d=(e,n,t)=>{l.o(e,n)||a.defineProperty(e,n,{enumerable:!0,get:t})},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&a.defineProperty(e,Symbol.toStringTag,{value:"Module"}),a.defineProperty(e,"__esModule",{value:!0})},l.t=(e,n)=>{if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=a.create(null);if(l.r(t),a.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)l.d(t,i,(n=>e[n]).bind(null,i));return t},l.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return l.d(n,"a",n),n},l.o=(e,n)=>a.prototype.hasOwnProperty.call(e,n),l.p="";var c=o.webpackJsonp=o.webpackJsonp||[],d=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var p=d;r.push([176,1,0]),t()})({172:(e,n,t)=>{"use strict";var a=t(46);t.n(a).a},173:(e,n,t)=>{(n=t(11)(!1)).push([e.i,'body {\n  width: 320px;\n  max-width: 100%;\n  /* Latest Chrome renders an extra blank for a nonexistent scrollbar */\n  overflow: hidden;\n  background: var(--fill-0-5);\n  font-weight: normal\n}\n@media (min-width: 360px) {\nbody {\n    width: 100%\n}\n}\na,\n  a:focus {\n    color: inherit;\n}\n.page-popup {\n  /* hardcoded popup height in Chrome */\n  max-height: 600px;\n  overflow: hidden;\n}\n.page-popup .incognito {\n    padding: 8px 8px 0 46px;\n}\nfooter {\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  font-size: 12px;\n  color: var(--fill-6);\n}\n.logo {\n  text-align: center;\n  margin: 0 7px;\n}\n.logo img {\n    width: 32px;\n}\n.logo.disabled > img {\n    opacity: .5;\n}\n.menu-area {\n  cursor: pointer\n}\n.menu-area:hover,\n  .menu-area:focus {\n    background: cornflowerblue;\n    color: var(--bg)\n}\n@media (prefers-color-scheme: dark) {\n.menu-area:hover,\n  .menu-area:focus {\n      background: #404c5c;\n      color: var(--fill-15)\n}\n}\n.script:not(.disabled):not(.runs) .menu-area .script-name,\n  .disabled:not(.runs) > .menu-area {\n    color: var(--fill-8)\n}\n.script:not(.disabled):not(.runs) .menu-area .script-name:hover,\n    .script:not(.disabled):not(.runs) .menu-area .script-name:focus,\n    .disabled:not(.runs) > .menu-area:hover,\n    .disabled:not(.runs) > .menu-area:focus {\n      color: var(--fill-2);\n}\n.ext-name.disabled {\n    color: var(--fill-8);\n}\n.script-icon:not([src]) {\n    display: none;\n}\n.script-icon {\n  max-width: 18px;\n  max-height: 18px;\n  margin-left: 2px;\n  position: absolute\n}\n.script-icon + .icon {\n    margin-left: 22px;\n    margin-right: 10px;\n}\n.menu-buttons {\n  align-items: center;\n  padding: 8px 8px 8px 0;\n  background: var(--bg);\n}\n.menu-buttons > .menu-area {\n    padding: 8px;\n}\n.menu-buttons .icon {\n    display: block;\n    width: 20px;\n    height: 20px;\n}\n.menu {\n  background: var(--bg)\n}\n.menu, .menu:not(.expand) + footer {\n    border-top: 1px solid var(--fill-4);\n}\n.menu-item {\n    position: relative;\n    display: flex;\n    align-items: center;\n    min-height: 2rem;\n    padding-left: 14px;\n    padding-right: 14px;\n    text-align: left;\n    white-space: nowrap;\n}\n.submenu .menu-item {\n      text-align: left;\n}\n.menu-item .icon {\n      flex: 0 0 14px\n}\n.menu-item .icon.icon-collapse {\n        flex: 0 0 16px;\n        width: 16px;\n        height: 16px;\n}\n.menu-item > .icon:first-child {\n      margin-right: 10px;\n}\n.menu-item > .flex-auto {\n      display: flex;\n      align-self: stretch;\n      align-items: center\n}\n.menu-item > .flex-auto:last-child {\n        padding-right: 14px;\n}\n.menu-item > .flex-1 {\n      padding-right: 2rem;\n}\n.failed .menu-item {\n      -webkit-text-decoration: line-through red;\n              text-decoration: line-through red;\n}\n.removed .menu-item {\n      text-decoration: line-through;\n}\n.menu-find {\n    padding-left: 0;\n    cursor: default;\n}\n.menu-find a {\n      display: flex;\n      align-items: center;\n      align-self: stretch;\n}\n.menu-find .icon {\n      flex-basis: 16px;\n      width: 16px;\n      height: 16px;\n      margin: 0 10px 0 20px;\n}\n.menu-group {\n    padding-left: 20px;\n    color: #4a7792\n}\n@media (prefers-color-scheme: dark) {\n.menu-group {\n      color: #eee\n}\n}\n.menu-group [data-totals]::after {\n      content: ": " attr(data-totals);\n}\n.menu.expand {\n    background: var(--fill-1);\n}\n.menu.expand > .submenu {\n      display: block;\n      border-color: var(--fill-4);\n}\n.menu.expand .icon-collapse {\n      transform: rotateZ(90deg);\n}\n.submenu {\n  display: none;\n  min-height: 4rem;\n  max-height: 30rem;\n  overflow-y: auto;\n  background: var(--bg);\n  border-top: 1px dashed var(--fill-3);\n}\n.submenu > * {\n    position: relative;\n}\n.submenu > * .menu-item {\n      padding-left: 0;\n}\n.submenu-buttons {\n    display: flex;\n    position: absolute;\n    top: 0;\n    right: 0;\n}\n.submenu-button {\n    padding: .5rem;\n    background: var(--bg);\n    cursor: pointer\n}\n.submenu-button:focus {\n      color: var(--bg);\n      background: cornflowerblue;\n}\n.menu-item:hover + .submenu-buttons .submenu-button:not(:focus) {\n      background: #a0c1fd\n}\n@media (prefers-color-scheme: dark) {\n.menu-item:hover + .submenu-buttons .submenu-button:not(:focus) {\n        background: #5b6979\n}\n}\n.submenu-button .icon {\n      display: block;\n}\n.submenu-commands {\n    font-size: .8rem;\n    color: var(--fill-12);\n}\n.submenu-commands > .menu-item {\n      padding-left: 46px;\n}\n.submenu-commands > .menu-item > .icon {\n        margin-right: .5rem;\n}\n.message {\n  position: absolute;\n  max-width: 100%;\n  left: 0;\n  bottom: 0;\n  padding: 4px 8px;\n  word-wrap: break-word;\n  font-size: 12px;\n  line-height: 1.2; /* lower values cut descender in "g" */\n  background: var(--fill-0-5);\n  border: 1px solid var(--fill-2);\n}\n.message > div {\n    max-height: 40px;\n    overflow: hidden;\n}\n.failure-reason {\n  padding: .75rem 14px .75rem 46px;\n}\n.failure-reason code {\n    max-width: 100%;\n}\n.reload-hint .icon {\n    position: absolute;\n    left: 20px;\n    width: 16px;\n    height: 16px;\n}\n.extras-menu {\n  position: fixed;\n  right: 1rem;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.53333);\n  z-index: 100;\n  background: var(--bg);\n  color: var(--fg);\n  border: 1px solid var(--fill-6)\n}\n.extras-menu > * {\n    cursor: pointer;\n    display: block;\n    padding: .25rem 1rem;\n    text-decoration: none\n}\n.extras-menu > *:first-child {\n      padding-top: .75rem;\n}\n.extras-menu > *:last-child {\n      padding-bottom: .75rem;\n}\n.extras-menu > *:focus {\n      color: var(--bg);\n      background: cornflowerblue;\n}\n.excludes-menu {\n  padding: .25rem .5rem .25rem 46px;\n}\n.excludes-menu button {\n    margin: .5rem .5rem 0 0;\n}\n.excludes-menu details summary {\n      list-style-type: none;\n}\n.excludes-menu details[open] {\n      padding-top: .25rem;\n}\n.excludes-menu details[open] summary {\n        position: absolute;\n        left: 18px;\n}\n.excludes-menu details:not([open]) {\n      display: inline;\n}\n.excludes-menu .icon {\n    cursor: pointer;\n    width: 18px;\n    height: 18px;\n}\n.extras-shown .script-name {\n  text-decoration: underline;\n}\n.block-scroll {\n  pointer-events: none;\n  -moz-user-select: none;\n       user-select: none;\n}\n',""]),e.exports=n},176:function(e,t,r){"use strict";r.r(t);var l=r(22),d=(r(26),r(0)),u=r(6),p=r(24),m=r(25),x=r(1),g=(r(51),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"page-popup",attrs:{"data-failure-reason":e.failureReason},on:{click:n=>{e.activeExtras&&e.toggleExtras(null)},contextmenu:n=>{e.activeExtras&&(e.toggleExtras(null),n.preventDefault())},"!mouseenter":n=>e.delegateMouseEnter(n),"!mouseleave":n=>e.delegateMouseLeave(n),"!focus":n=>e.updateMessage(n)}},[t("div",{staticClass:"flex menu-buttons"},[t("div",{staticClass:"logo",class:{disabled:!e.options.isApplied}},[t("img",{attrs:{src:"/public/images/icon128.png"}})]),t("div",{staticClass:"flex-1 ext-name",class:{disabled:!e.options.isApplied},domProps:{textContent:e._s(e.name)}}),t("span",{staticClass:"menu-area",class:{disabled:!e.options.isApplied},attrs:{"data-message":e.options.isApplied?e.i18n("menuScriptEnabled"):e.i18n("menuScriptDisabled"),tabIndex:e.tabIndex},on:{click:e.onToggle}},[t("icon",{attrs:{name:e.getSymbolCheck(e.options.isApplied)}})],1),t("span",{staticClass:"menu-area",attrs:{"data-message":e.i18n("menuDashboard"),tabIndex:e.tabIndex},on:{click:e.onManage}},[t("icon",{attrs:{name:"cog"}})],1),t("span",{staticClass:"menu-area",attrs:{"data-message":e.i18n("menuNewScript"),tabIndex:e.tabIndex},on:{click:e.onCreateScript}},[t("icon",{attrs:{name:"plus"}})],1)]),e.store.injectable?t("div",{directives:[{name:"show",rawName:"v-show",value:e.store.domain,expression:"store.domain"}],staticClass:"menu"},[t("div",{staticClass:"menu-item menu-area menu-find",attrs:{tabIndex:e.tabIndex}},[e._l(e.findUrls,(n,a,i)=>[t("a",{key:n,class:{ellipsis:!i,"mr-1":!i,"ml-1":i},attrs:{target:"_blank",href:n,"data-message":n.split("://")[1]}},[i?e._e():t("icon",{attrs:{name:"search"}}),e._v(e._s(a)+" ")],1),i?e._e():[e._v("/")]])],2)]):e._e(),e.failureReasonText?t("div",{staticClass:"failure-reason"},[e.injectionScopes[0]&&!e.options.isApplied?t("tooltip",{staticClass:"reload-hint",attrs:{content:e.i18n("labelAutoReloadCurrentTabDisabled"),align:"start",placement:"bottom"}},[t("icon",{attrs:{name:"info"}})],1):e._e(),t("span",{domProps:{textContent:e._s(e.failureReasonText)}}),e.store.blacklisted?t("code",{staticClass:"ellipsis inline-block",domProps:{textContent:e._s(e.store.blacklisted)}}):e._e()],1):e._e(),e._l(e.injectionScopes,n=>t("div",{key:n.name,staticClass:"menu menu-scripts",class:{expand:e.activeMenu===n.name,"block-scroll":e.activeExtras},attrs:{"data-type":n.name}},[t("div",{staticClass:"menu-item menu-area menu-group",attrs:{tabIndex:e.tabIndex},on:{click:t=>e.toggleMenu(n.name)}},[t("icon",{staticClass:"icon-collapse",attrs:{name:"arrow"}}),t("div",{staticClass:"flex-auto",attrs:{"data-totals":n.totals},domProps:{textContent:e._s(n.title)}})],1),t("div",{staticClass:"submenu"},e._l(n.list,(n,a)=>t("div",{key:a,staticClass:"script",class:{disabled:!n.data.config.enabled,failed:n.data.failed,removed:n.data.config.removed,runs:n.data.runs,"extras-shown":e.activeExtras===n,"excludes-shown":n.excludesValue}},[t("div",{staticClass:"menu-item menu-area",attrs:{tabIndex:e.tabIndex,"data-message":n.name},on:{focus:t=>{e.focusedItem=n},click:t=>e.onToggleScript(n)}},[t("img",{staticClass:"script-icon",attrs:{src:n.data.safeIcon}}),t("icon",{attrs:{name:e.getSymbolCheck(n.data.config.enabled)}}),t("div",{staticClass:"script-name flex-auto ellipsis",domProps:{textContent:e._s(n.name)},on:{click:t=>t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:(t.stopPropagation(),e.onEditScript(n)):null,contextmenu:t=>t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.stopPropagation(),e.onEditScript(n)),mousedown:t=>"button"in t&&1!==t.button||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.stopPropagation(),e.onEditScript(n))}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.data.custom.buildIn&&(e.activeExtras===n||e.focusedItem===n),expression:"!item.data.custom.buildIn && (activeExtras === item || focusedItem === item)"}],staticClass:"submenu-buttons"},[t("div",{staticClass:"submenu-button",attrs:{tabIndex:e.tabIndex,title:e.i18n("buttonEditClickHint")},on:{click:t=>e.onEditScript(n)}},[t("icon",{attrs:{name:"code"}})],1),t("div",{staticClass:"submenu-button",attrs:{tabIndex:e.tabIndex},on:{click:t=>(t.stopPropagation(),e.toggleExtras(n,t))}},[t("icon",{attrs:{name:"more"}})],1)]),null!=n.excludesValue?t("div",{staticClass:"excludes-menu flex flex-col"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.excludesValue,expression:"item.excludesValue"}],attrs:{spellcheck:"false"},domProps:{value:n.excludesValue},on:{input:t=>{t.target.composing||e.$set(n,"excludesValue",t.target.value)}}}),e._v(" "),t("div",[t("button",{domProps:{textContent:e._s(e.i18n("buttonOK"))},on:{click:t=>e.onExcludeSave(n)}}),t("button",{domProps:{textContent:e._s(e.i18n("buttonCancel"))},on:{click:t=>e.onExcludeClose(n)}}),t("details",[t("summary",[t("icon",{attrs:{name:"info"}})],1),t("small",[t("span",{domProps:{textContent:e._s(e.i18n("menuExcludeHint"))}}),e._m(0,!0)])])])]):e._e(),t("div",{staticClass:"submenu-commands"},e._l(e.store.commands[n.data.props.id],(a,i)=>t("div",{key:i,staticClass:"menu-item menu-area",attrs:{tabIndex:e.tabIndex,"data-message":a},domProps:{CMD:{id:n.data.props.id,cap:a}},on:{mousedown:e.onCommand,mouseup:e.onCommand,keydown:[n=>!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.onCommand(n),n=>!n.type.indexOf("key")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:e.onCommand(n)]}},[t("icon",{attrs:{name:"command"}}),t("div",{staticClass:"flex-auto ellipsis",domProps:{textContent:e._s(a)}})],1)),0)])),0)])),e.store.injectionFailure?t("div",{staticClass:"failure-reason"},[t("div",{domProps:{textContent:e._s(e.i18n("menuInjectionFailed"))}}),e.store.injectionFailure.fixable?t("a",{attrs:{href:"#"},domProps:{textContent:e._s(e.i18n("menuInjectionFailedFix"))},on:{click:n=>(n.preventDefault(),e.onInjectionFailureFix(n))}}):e._e()]):e._e(),e.store.currentTab&&e.store.currentTab.incognito?t("div",{staticClass:"incognito",domProps:{textContent:e._s(e.i18n("msgIncognitoChanges"))}}):e._e(),t("footer",[t("a",{attrs:{href:"https://mirav.cn/",tabIndex:e.tabIndex},domProps:{textContent:e._s(e.i18n("visitWebsite"))},on:{click:n=>(n.preventDefault(),e.onVisitWebsite(n))}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"message"},[t("div",{domProps:{textContent:e._s(e.message)}})]),e.activeExtras?t("div",{ref:"extrasMenu",staticClass:"extras-menu"},[e.activeExtras.home?t("a",{attrs:{tabindex:"0",href:e.activeExtras.home,rel:"noopener noreferrer",target:"_blank"},domProps:{textContent:e._s(e.i18n("buttonHome"))}}):e._e(),t("div",{attrs:{tabindex:"0"},domProps:{textContent:e._s(e.i18n("menuExclude"))},on:{click:e.onExclude}}),t("div",{attrs:{tabindex:"0"},domProps:{textContent:e._s(e.activeExtras.data.config.removed?e.i18n("buttonRestore"):e.i18n("buttonRemove"))},on:{click:n=>e.onRemoveScript(e.activeExtras)}})]):e._e()],2)}),f=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ul",{staticClass:"monospace-font mt-1"},[t("li",[e._v("https://www.foo.com/path/*bar*")]),t("li",[e._v("*://www.foo.com/*")]),t("li",[e._v("*://*.foo.com/*")])])}],b=r(3),h=r.n(b),v=r(15),y=r.n(v),k=r(4),C=r(13),w=r(16),E=r(7);const _={scripts:[],frameScripts:[],scriptIds:[],commands:[],domain:"",injectionFailure:null,injectable:!0,blacklisted:!1},S={init(e=100){this.ready=new i(n=>{this.resolve=n,setTimeout(n,e)})}},I=browser.runtime.getManifest(),P=`${I.name} ${I.version}`,M=".script";let j;const T={isApplied:k.a.get("isApplied"),filtersPopup:k.a.get("filtersPopup")||{}};function $(...e){return(n,t)=>{for(const a of e){const e=a(n),i=a(t);if(e<i)return-1;if(e>i)return 1}return 0}}k.a.hook(e=>{"isApplied"in e&&(T.isApplied=e.isApplied),"filtersPopup"in e&&(T.filtersPopup=h()({},T.filtersPopup,{},e.filtersPopup))});var R={components:{Icon:w.a,Tooltip:y.a},data:()=>({store:_,options:T,activeMenu:"scripts",activeExtras:null,message:null,focusedItem:null,name:P}),computed:{injectionScopes(){const{sort:e,enabledFirst:t,hideDisabled:i}=this.options.filtersPopup,s="alpha"===e||t,{injectable:o}=_,r="group"===i;return[o&&["scripts",a(d.p)("menuMatchedScripts"),r||null],o&&r&&["disabled",a(d.p)("menuMatchedDisabledScripts"),!1],["frameScripts",a(d.p)("menuMatchedFrameScripts")]].filter(n).map(([n,o,r])=>{let l=_[n]||_.scripts;null!=r&&(l=l.filter(e=>!e.config.enabled==!r));const c=l.length,u=null==r?l.reduce((e,n)=>e+n.config.enabled,0):c;return"hide"!==i&&!0!==i||(l=l.filter(e=>e.config.enabled)),l=l.map((i,o)=>{const{config:r,custom:l,meta:c}=i,u=a(d.n)(i);return{id:`${n}/${i.props.id}`,name:u,data:i,home:l.homepageURL||c.homepageURL||c.homepage,key:s&&`${t&&+!r.enabled}${"alpha"===e?u.toLowerCase():`${1e6+o}`.slice(1)}`,excludesValue:null}}),s&&l.sort((e,n)=>e.key<n.key?-1:e.key>n.key),c&&{name:n,title:o,list:l,totals:u<c?`${u} / ${c}`:`${c}`}}).filter(n)},failureReason:()=>[!_.injectable&&"noninjectable",_.blacklisted&&"blacklisted",!1===T.isApplied&&"scripts-disabled"].filter(n).join(" "),failureReasonText:()=>!_.injectable&&a(d.p)("failureReasonNoninjectable")||_.blacklisted&&a(d.p)("failureReasonBlacklisted")||!1===T.isApplied&&a(d.p)("menuScriptDisabled")||"",findUrls(){const e=encodeURIComponent(_.domain);return{[`${a(d.p)("menuFindScripts")} (GF)`]:`https://greasyfork.org/scripts/by-site/${e}`,OUJS:`https://openuserjs.org/?q=${e}`}},tabIndex(){return this.activeExtras?-1:0}},methods:{toggleMenu(e){this.activeMenu=this.activeMenu===e?null:e},toggleExtras(e,n){this.activeExtras=this.activeExtras===e?null:e,E.c.setContext("activeExtras",this.activeExtras),this.activeExtras&&(e.el=n.target.closest(M),this.$nextTick(()=>{const{extrasMenu:e}=this.$refs;e.style.top=`${Math.min(o.innerHeight-e.getBoundingClientRect().height,(n.currentTarget||n.target).getBoundingClientRect().top+16)}px`}))},getSymbolCheck:e=>`toggle-${e?"on":"off"}`,onToggle(){k.a.set("isApplied",T.isApplied=!T.isApplied),this.checkReload()},onManage(){browser.runtime.openOptionsPage(),o.close()},onVisitWebsite(){a(d.x)("TabOpen",{url:"https://violentmonkey.github.io/"}),o.close()},onEditScript(e){e.data.custom.buildIn||(a(d.x)("OpenEditor",e.data.props.id),o.close())},onCommand(e){const{type:n,currentTarget:t}=e;"mousedown"===n?(j=t,e.preventDefault()):"keydown"!==n&&j!==t||(a(d.z)(_.currentTab.id,"Command",h()({},t.CMD,{evt:a(x.i)(e,["type","button","shiftKey","altKey","ctrlKey","metaKey","key","keyCode","code"])})),o.close())},onToggleScript(e){if(e.data.custom.buildIn)return;const{data:n}=e,t=!n.config.enabled;a(d.x)("UpdateScriptInfo",{id:n.props.id,config:{enabled:t}}).then(()=>{n.config.enabled=t,this.checkReload()})},checkReload(){k.a.get("autoReload")&&(browser.tabs.reload(_.currentTab.id),_.scriptIds.length=0,_.scripts.length=0,_.frameScripts.length=0,S.init())},async onCreateScript(){a(d.x)("OpenEditor"),o.close()},async onInjectionFailureFix(){k.a.set("defaultInjectInto",u.e),await a(d.t)(100),await browser.tabs.reload(),o.close()},onRemoveScript({data:{config:e,props:{id:n}}}){const t=+!e.removed;e.removed=t,a(d.x)("MarkRemoved",{id:n,removed:t})},onExclude(){const e=this.activeExtras;e.excludesValue=[...e.data.custom.excludeMatch||[],`${_.currentTab.url.split("#")[0]}*`].join("\n"),this.$nextTick(()=>{const n=e.el.querySelector("textarea");a(C.a)([n]),n.focus()})},onExcludeClose(e){e.excludesValue=null,this.focus(e)},async onExcludeSave(e){await a(d.x)("UpdateScriptInfo",{id:e.data.props.id,custom:{excludeMatch:e.excludesValue.split("\n").map(e=>e.trim()).filter(n)}}),this.onExcludeClose(e),this.checkReload()},navigate(e){var n;const{activeElement:t}=s,a=Array.from(this.$el.querySelectorAll('[tabindex="0"]')).map(e=>({el:e,rect:e.getBoundingClientRect()})).filter(({rect:e})=>e.width&&e.height);a.sort($(e=>e.rect.top,e=>e.rect.left));let i=a.findIndex(({el:e})=>e===t);const o=(e,n)=>{for(let t=i+e;t>=0&&t<a.length;t+=e)if(n(a[i],a[t]))return t};if(i<0)i=0;else if("u"===e||"d"===e){const n="u"===e?-1:1;if(i=o(n,(e,t)=>(e.rect.top-t.rect.top)*n<0),"u"===e)for(;i>0&&a[i-1].rect.top===a[i].rect.top;)i-=1}else{const n="l"===e?-1:1;i=o(n,(e,t)=>(e.rect.left-t.rect.left)*n<0)}null==(n=a[i])||n.el.focus()},focus(e){var n,t;null==e||null==(n=e.el)||null==(t=n.querySelector(".menu-area"))||t.focus()},delegateMouseEnter(e){const{target:n}=e;n.tabIndex>=0&&n.focus()},delegateMouseLeave(e){const{target:n}=e;n!==s.activeElement||a(E.b)(n)||n.blur()},updateMessage(){var e;this.message=(null==(e=s.activeElement)?void 0:e.dataset.message)||""}},mounted(){E.c.enable(),this.disposeList=[E.c.register("escape",()=>{var e;const n=this.activeExtras;n?(this.toggleExtras(null),this.focus(n)):(null==(e=s.activeElement)?void 0:e.value)?s.activeElement.blur():o.close()}),E.c.register("up",()=>{this.navigate("u")},{condition:"!inputFocus"}),E.c.register("down",()=>{this.navigate("d")},{condition:"!inputFocus"}),E.c.register("left",()=>{this.navigate("l")},{condition:"!inputFocus"}),E.c.register("right",()=>{this.navigate("r")},{condition:"!inputFocus"}),E.c.register("e",()=>{this.onEditScript(this.focusedItem)},{condition:"!inputFocus"})]},beforeDestroy(){var e;E.c.disable(),null==(e=this.disposeList)||e.forEach(e=>{e()})}},F=(r(172),r(5)),A=a(F.a)(R,g,f,!1,null,null,null).exports;S.init(),l.default.prototype.i18n=d.p;const K=new l.default({render:e=>e(A)}).$mount();s.body.append(K.$el),a.assign(p.a,{async SetPopup(e,n){if(_.currentTab&&_.currentTab.id!==n.tab.id)return;const t=0===n.frameId;t||await S.ready;const i=e.ids.filter(e=>!_.scriptIds.includes(e));if(_.scriptIds.push(...i),t&&(S.resolve(),_.commands=c(x.f,e.menus,([,e])=>a.keys(e).sort()),_.injectable=!0),i.length){var s;const n=_[t?"scripts":"frameScripts"],o=(null==(s=e.scripts)?void 0:s.filter(({props:{id:e}})=>i.includes(e)))||a.assign(e,await a(d.y)("GetData",i)).scripts;o.forEach(n=>{a(m.a)(n,e.cache);const{id:t}=n.props;n.runs=e.runningIds.includes(t),e.failedIds.includes(t)&&(n.failed=!0,_.injectionFailure||(_.injectionFailure={fixable:e.injectInto===u.h}))}),n.push(...o)}}}),a(d.y)("CachePop","SetPopup").then(e=>{c(x.e,e,e=>p.a.SetPopup(...e))}),(null==CSS.supports?void 0:CSS.supports("list-style-type","disclosure-open"))||s.styleSheets[0].insertRule(".excludes-menu ::-webkit-details-marker {display:none}"),i.all([a(d.y)("GetTabDomain"),browser.tabs.executeScript({code:"1",runAt:"document_start"}).catch(()=>[])]).then(async([{tab:e,domain:n},[t]])=>{_.currentTab=e,_.domain=n,browser.runtime.connect({name:`${e.id}`}),t?_.blacklisted=await a(d.y)("TestBlacklist",e.url):_.injectable=!1})},46:(e,n,t)=>{var a=t(173);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,t(12).default)("79bb1cdb",a,!0,{})}})}